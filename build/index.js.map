{
  "version": 3,
  "sources": ["../node_modules/preact/src/constants.js", "../node_modules/preact/src/util.js", "../node_modules/preact/src/options.js", "../node_modules/preact/src/create-element.js", "../node_modules/preact/src/component.js", "../node_modules/preact/src/diff/props.js", "../node_modules/preact/src/create-context.js", "../node_modules/preact/src/diff/children.js", "../node_modules/preact/src/diff/index.js", "../node_modules/preact/src/render.js", "../node_modules/preact/src/clone-element.js", "../node_modules/preact/src/diff/catch-error.js", "../node_modules/eventbusjs/lib/eventbus.min.js", "../node_modules/local-storage-fallback/node_modules/cookie/src/index.ts", "../node_modules/local-storage-fallback/lib/CookieStorage.js", "../node_modules/local-storage-fallback/lib/isSupported.js", "../node_modules/local-storage-fallback/lib/MemoryStorage.js", "../node_modules/local-storage-fallback/lib/index.js", "../node_modules/seedrandom/lib/alea.js", "../node_modules/seedrandom/lib/xor128.js", "../node_modules/seedrandom/lib/xorwow.js", "../node_modules/seedrandom/lib/xorshift7.js", "../node_modules/seedrandom/lib/xor4096.js", "../node_modules/seedrandom/lib/tychei.js", "../node_modules/seedrandom/seedrandom.js", "../node_modules/seedrandom/index.js", "../node_modules/routes/dist/routes.js", "../src/index.tsx", "../src/Application.ts", "../src/config/idb.config.ts", "env-ns:env", "../src/lib/IndexedDBManager.ts", "../src/lib/utils/logging.ts", "../src/lib/AudioManager.ts", "../src/components/app/App.tsx", "../src/components/shared/RouteContext/RouteContext.tsx", "../src/config/config.ts", "../src/config/routes.tsx", "../src/components/pages/Entry/index.tsx", "../node_modules/preact/jsx-runtime/src/utils.js", "../node_modules/preact/src/constants.js", "../node_modules/preact/jsx-runtime/src/index.js", "../src/components/pages/Home/index.tsx", "../src/components/shared/JsonView/EnhancedJsonView.ts", "../node_modules/jsondiffpatch/lib/index.js", "../node_modules/jsondiffpatch/lib/diffpatcher.js", "../node_modules/jsondiffpatch/lib/clone.js", "../node_modules/jsondiffpatch/lib/contexts/diff.js", "../node_modules/jsondiffpatch/lib/contexts/context.js", "../node_modules/jsondiffpatch/lib/assertions/arrays.js", "../node_modules/jsondiffpatch/lib/contexts/patch.js", "../node_modules/jsondiffpatch/lib/contexts/reverse.js", "../node_modules/jsondiffpatch/lib/pipe.js", "../node_modules/jsondiffpatch/lib/processor.js", "../node_modules/jsondiffpatch/lib/filters/arrays.js", "../node_modules/jsondiffpatch/lib/filters/lcs.js", "../node_modules/jsondiffpatch/lib/filters/dates.js", "../node_modules/jsondiffpatch/lib/filters/nested.js", "../node_modules/jsondiffpatch/lib/filters/texts.js", "../node_modules/jsondiffpatch/lib/filters/trivial.js", "../src/lib/utils/StrUtils.ts", "../src/components/pages/Info/index.tsx", "../src/components/pages/NotFound/index.tsx", "../src/components/pages/Other/index.tsx", "../src/components/shared/BlobEditor/BlobEditor.tsx", "../src/components/shared/BlobEditor/plugins/PastePlugin.ts", "../src/components/shared/BlobEditor/plugins/TabPlugin.ts", "../src/components/shared/BlobEditor/plugins/toolbar/ToolbarPlugin.ts", "../src/lib/utils/debounce.ts", "../src/components/shared/BlobEditor/plugins/toolbar/Dropdown.ts", "../node_modules/preact/hooks/src/index.js", "../src/lib/types/Blob.ts", "../node_modules/uuid/dist/index.js", "../node_modules/uuid/dist/stringify.js", "../node_modules/uuid/dist/rng.js", "../node_modules/uuid/dist/v4.js", "../node_modules/uuid/dist/native.js", "../src/components/shared/BlobEditor/lib/BlobService.ts", "../src/components/shared/BlobEditor/lib/ApiClient.ts", "../src/components/shared/BlobEditor/lib/CacheService.ts", "../src/components/shared/BlobEditor/lib/WEditor.ts", "../src/components/shared/BlobEditor/lib/NodeEntryCache/NodeEntryCache.ts", "../src/components/shared/BlobEditor/lib/NodeEntryCache/ContentEntries.ts", "../src/components/shared/BlobEditor/lib/NodeEntryCache/nerUtils.ts", "../src/components/shared/BlobEditor/lib/NodeEntryCache/NodeEntries.ts", "../src/lib/utils/debug/DebugPanel.ts", "../src/components/shared/BlobEditor/lib/utils/domUtils.ts", "../src/components/shared/BlobEditor/lib/JsonView.ts", "../src/components/shared/BlobEditor/plugins/FilePlugin.ts", "../src/components/shared/BlobEditor/FilePreviewHandler.ts", "../src/components/pages/Play/index.tsx", "../src/components/pages/Timeline/index.tsx", "../src/components/pages/Timeline/Timeline.ts", "../src/components/pages/Work/index.tsx", "../src/components/pages/Colors/ColorPage.tsx", "../src/components/pages/Colors/ColorEditColumn.tsx", "../src/components/pages/Colors/ColorEdit.tsx", "../node_modules/vanilla-picker/dist/vanilla-picker.mjs", "../src/components/pages/Colors/InputColumn.tsx", "../src/components/pages/Colors/utils.ts", "../src/components/pages/Colors/Config.tsx", "../src/components/pages/Colors/Dropdown.tsx", "../src/components/pages/Colors/OutputColumn.tsx", "../src/lib/hooks/useRouter.ts", "../src/lib/EventService.ts", "../src/lib/Router.ts", "../node_modules/query-string/index.js", "../node_modules/query-string/base.js", "../node_modules/decode-uri-component/index.js", "../node_modules/filter-obj/index.js", "../node_modules/split-on-first/index.js"],
  "sourcesContent": ["/** Normal hydration that attaches to a DOM tree but does not diff it. */\nexport const MODE_HYDRATE = 1 << 5;\n/** Signifies this VNode suspended on the previous render */\nexport const MODE_SUSPENDED = 1 << 7;\n/** Indicates that this node needs to be inserted while patching children */\nexport const INSERT_VNODE = 1 << 2;\n/** Indicates a VNode has been matched with another VNode in the diff */\nexport const MATCHED = 1 << 1;\n\n/** Reset all mode flags */\nexport const RESET_MODE = ~(MODE_HYDRATE | MODE_SUSPENDED);\n\nexport const SVG_NAMESPACE = 'http://www.w3.org/2000/svg';\nexport const XHTML_NAMESPACE = 'http://www.w3.org/1999/xhtml';\nexport const MATH_NAMESPACE = 'http://www.w3.org/1998/Math/MathML';\n\nexport const NULL = null;\nexport const UNDEFINED = undefined;\nexport const EMPTY_OBJ = /** @type {any} */ ({});\nexport const EMPTY_ARR = [];\nexport const IS_NON_DIMENSIONAL =\n\t/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;\n", "import { EMPTY_ARR } from './constants';\n\nexport const isArray = Array.isArray;\n\n/**\n * Assign properties from `props` to `obj`\n * @template O, P The obj and props types\n * @param {O} obj The object to copy properties to\n * @param {P} props The object to copy properties from\n * @returns {O & P}\n */\nexport function assign(obj, props) {\n\t// @ts-expect-error We change the type of `obj` to be `O & P`\n\tfor (let i in props) obj[i] = props[i];\n\treturn /** @type {O & P} */ (obj);\n}\n\n/**\n * Remove a child node from its parent if attached. This is a workaround for\n * IE11 which doesn't support `Element.prototype.remove()`. Using this function\n * is smaller than including a dedicated polyfill.\n * @param {import('./index').ContainerNode} node The node to remove\n */\nexport function removeNode(node) {\n\tif (node && node.parentNode) node.parentNode.removeChild(node);\n}\n\nexport const slice = EMPTY_ARR.slice;\n", "import { _catchError } from './diff/catch-error';\n\n/**\n * The `option` object can potentially contain callback functions\n * that are called during various stages of our renderer. This is the\n * foundation on which all our addons like `preact/debug`, `preact/compat`,\n * and `preact/hooks` are based on. See the `Options` type in `internal.d.ts`\n * for a full list of available option hooks (most editors/IDEs allow you to\n * ctrl+click or cmd+click on mac the type definition below).\n * @type {import('./internal').Options}\n */\nconst options = {\n\t_catchError\n};\n\nexport default options;\n", "import { slice } from './util';\nimport options from './options';\nimport { NULL, UNDEFINED } from './constants';\n\nlet vnodeId = 0;\n\n/**\n * Create an virtual node (used for JSX)\n * @param {import('./internal').VNode[\"type\"]} type The node name or Component constructor for this\n * virtual node\n * @param {object | null | undefined} [props] The properties of the virtual node\n * @param {Array<import('.').ComponentChildren>} [children] The children of the\n * virtual node\n * @returns {import('./internal').VNode}\n */\nexport function createElement(type, props, children) {\n\tlet normalizedProps = {},\n\t\tkey,\n\t\tref,\n\t\ti;\n\tfor (i in props) {\n\t\tif (i == 'key') key = props[i];\n\t\telse if (i == 'ref') ref = props[i];\n\t\telse normalizedProps[i] = props[i];\n\t}\n\n\tif (arguments.length > 2) {\n\t\tnormalizedProps.children =\n\t\t\targuments.length > 3 ? slice.call(arguments, 2) : children;\n\t}\n\n\t// If a Component VNode, check for and apply defaultProps\n\t// Note: type may be undefined in development, must never error here.\n\tif (typeof type == 'function' && type.defaultProps != NULL) {\n\t\tfor (i in type.defaultProps) {\n\t\t\tif (normalizedProps[i] === UNDEFINED) {\n\t\t\t\tnormalizedProps[i] = type.defaultProps[i];\n\t\t\t}\n\t\t}\n\t}\n\n\treturn createVNode(type, normalizedProps, key, ref, NULL);\n}\n\n/**\n * Create a VNode (used internally by Preact)\n * @param {import('./internal').VNode[\"type\"]} type The node name or Component\n * Constructor for this virtual node\n * @param {object | string | number | null} props The properties of this virtual node.\n * If this virtual node represents a text node, this is the text of the node (string or number).\n * @param {string | number | null} key The key for this virtual node, used when\n * diffing it against its children\n * @param {import('./internal').VNode[\"ref\"]} ref The ref property that will\n * receive a reference to its created child\n * @returns {import('./internal').VNode}\n */\nexport function createVNode(type, props, key, ref, original) {\n\t// V8 seems to be better at detecting type shapes if the object is allocated from the same call site\n\t// Do not inline into createElement and coerceToVNode!\n\t/** @type {import('./internal').VNode} */\n\tconst vnode = {\n\t\ttype,\n\t\tprops,\n\t\tkey,\n\t\tref,\n\t\t_children: NULL,\n\t\t_parent: NULL,\n\t\t_depth: 0,\n\t\t_dom: NULL,\n\t\t_component: NULL,\n\t\tconstructor: UNDEFINED,\n\t\t_original: original == NULL ? ++vnodeId : original,\n\t\t_index: -1,\n\t\t_flags: 0\n\t};\n\n\t// Only invoke the vnode hook if this was *not* a direct copy:\n\tif (original == NULL && options.vnode != NULL) options.vnode(vnode);\n\n\treturn vnode;\n}\n\nexport function createRef() {\n\treturn { current: NULL };\n}\n\nexport function Fragment(props) {\n\treturn props.children;\n}\n\n/**\n * Check if a the argument is a valid Preact VNode.\n * @param {*} vnode\n * @returns {vnode is VNode}\n */\nexport const isValidElement = vnode =>\n\tvnode != NULL && vnode.constructor == UNDEFINED;\n", "import { assign } from './util';\nimport { diff, commitRoot } from './diff/index';\nimport options from './options';\nimport { Fragment } from './create-element';\nimport { MODE_HYDRATE, NULL } from './constants';\n\n/**\n * Base Component class. Provides `setState()` and `forceUpdate()`, which\n * trigger rendering\n * @param {object} props The initial component props\n * @param {object} context The initial context from parent components'\n * getChildContext\n */\nexport function BaseComponent(props, context) {\n\tthis.props = props;\n\tthis.context = context;\n}\n\n/**\n * Update component state and schedule a re-render.\n * @this {import('./internal').Component}\n * @param {object | ((s: object, p: object) => object)} update A hash of state\n * properties to update with new values or a function that given the current\n * state and props returns a new partial state\n * @param {() => void} [callback] A function to be called once component state is\n * updated\n */\nBaseComponent.prototype.setState = function (update, callback) {\n\t// only clone state when copying to nextState the first time.\n\tlet s;\n\tif (this._nextState != NULL && this._nextState != this.state) {\n\t\ts = this._nextState;\n\t} else {\n\t\ts = this._nextState = assign({}, this.state);\n\t}\n\n\tif (typeof update == 'function') {\n\t\t// Some libraries like `immer` mark the current state as readonly,\n\t\t// preventing us from mutating it, so we need to clone it. See #2716\n\t\tupdate = update(assign({}, s), this.props);\n\t}\n\n\tif (update) {\n\t\tassign(s, update);\n\t}\n\n\t// Skip update if updater function returned null\n\tif (update == NULL) return;\n\n\tif (this._vnode) {\n\t\tif (callback) {\n\t\t\tthis._stateCallbacks.push(callback);\n\t\t}\n\t\tenqueueRender(this);\n\t}\n};\n\n/**\n * Immediately perform a synchronous re-render of the component\n * @this {import('./internal').Component}\n * @param {() => void} [callback] A function to be called after component is\n * re-rendered\n */\nBaseComponent.prototype.forceUpdate = function (callback) {\n\tif (this._vnode) {\n\t\t// Set render mode so that we can differentiate where the render request\n\t\t// is coming from. We need this because forceUpdate should never call\n\t\t// shouldComponentUpdate\n\t\tthis._force = true;\n\t\tif (callback) this._renderCallbacks.push(callback);\n\t\tenqueueRender(this);\n\t}\n};\n\n/**\n * Accepts `props` and `state`, and returns a new Virtual DOM tree to build.\n * Virtual DOM is generally constructed via [JSX](https://jasonformat.com/wtf-is-jsx).\n * @param {object} props Props (eg: JSX attributes) received from parent\n * element/component\n * @param {object} state The component's current state\n * @param {object} context Context object, as returned by the nearest\n * ancestor's `getChildContext()`\n * @returns {ComponentChildren | void}\n */\nBaseComponent.prototype.render = Fragment;\n\n/**\n * @param {import('./internal').VNode} vnode\n * @param {number | null} [childIndex]\n */\nexport function getDomSibling(vnode, childIndex) {\n\tif (childIndex == NULL) {\n\t\t// Use childIndex==null as a signal to resume the search from the vnode's sibling\n\t\treturn vnode._parent\n\t\t\t? getDomSibling(vnode._parent, vnode._index + 1)\n\t\t\t: NULL;\n\t}\n\n\tlet sibling;\n\tfor (; childIndex < vnode._children.length; childIndex++) {\n\t\tsibling = vnode._children[childIndex];\n\n\t\tif (sibling != NULL && sibling._dom != NULL) {\n\t\t\t// Since updateParentDomPointers keeps _dom pointer correct,\n\t\t\t// we can rely on _dom to tell us if this subtree contains a\n\t\t\t// rendered DOM node, and what the first rendered DOM node is\n\t\t\treturn sibling._dom;\n\t\t}\n\t}\n\n\t// If we get here, we have not found a DOM node in this vnode's children.\n\t// We must resume from this vnode's sibling (in it's parent _children array)\n\t// Only climb up and search the parent if we aren't searching through a DOM\n\t// VNode (meaning we reached the DOM parent of the original vnode that began\n\t// the search)\n\treturn typeof vnode.type == 'function' ? getDomSibling(vnode) : NULL;\n}\n\n/**\n * Trigger in-place re-rendering of a component.\n * @param {import('./internal').Component} component The component to rerender\n */\nfunction renderComponent(component) {\n\tlet oldVNode = component._vnode,\n\t\toldDom = oldVNode._dom,\n\t\tcommitQueue = [],\n\t\trefQueue = [];\n\n\tif (component._parentDom) {\n\t\tconst newVNode = assign({}, oldVNode);\n\t\tnewVNode._original = oldVNode._original + 1;\n\t\tif (options.vnode) options.vnode(newVNode);\n\n\t\tdiff(\n\t\t\tcomponent._parentDom,\n\t\t\tnewVNode,\n\t\t\toldVNode,\n\t\t\tcomponent._globalContext,\n\t\t\tcomponent._parentDom.namespaceURI,\n\t\t\toldVNode._flags & MODE_HYDRATE ? [oldDom] : NULL,\n\t\t\tcommitQueue,\n\t\t\toldDom == NULL ? getDomSibling(oldVNode) : oldDom,\n\t\t\t!!(oldVNode._flags & MODE_HYDRATE),\n\t\t\trefQueue\n\t\t);\n\n\t\tnewVNode._original = oldVNode._original;\n\t\tnewVNode._parent._children[newVNode._index] = newVNode;\n\t\tcommitRoot(commitQueue, newVNode, refQueue);\n\t\toldVNode._dom = oldVNode._parent = null;\n\n\t\tif (newVNode._dom != oldDom) {\n\t\t\tupdateParentDomPointers(newVNode);\n\t\t}\n\t}\n}\n\n/**\n * @param {import('./internal').VNode} vnode\n */\nfunction updateParentDomPointers(vnode) {\n\tif ((vnode = vnode._parent) != NULL && vnode._component != NULL) {\n\t\tvnode._dom = vnode._component.base = NULL;\n\t\tfor (let i = 0; i < vnode._children.length; i++) {\n\t\t\tlet child = vnode._children[i];\n\t\t\tif (child != NULL && child._dom != NULL) {\n\t\t\t\tvnode._dom = vnode._component.base = child._dom;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn updateParentDomPointers(vnode);\n\t}\n}\n\n/**\n * The render queue\n * @type {Array<import('./internal').Component>}\n */\nlet rerenderQueue = [];\n\n/*\n * The value of `Component.debounce` must asynchronously invoke the passed in callback. It is\n * important that contributors to Preact can consistently reason about what calls to `setState`, etc.\n * do, and when their effects will be applied. See the links below for some further reading on designing\n * asynchronous APIs.\n * * [Designing APIs for Asynchrony](https://blog.izs.me/2013/08/designing-apis-for-asynchrony)\n * * [Callbacks synchronous and asynchronous](https://blog.ometer.com/2011/07/24/callbacks-synchronous-and-asynchronous/)\n */\n\nlet prevDebounce;\n\nconst defer =\n\ttypeof Promise == 'function'\n\t\t? Promise.prototype.then.bind(Promise.resolve())\n\t\t: setTimeout;\n\n/**\n * Enqueue a rerender of a component\n * @param {import('./internal').Component} c The component to rerender\n */\nexport function enqueueRender(c) {\n\tif (\n\t\t(!c._dirty &&\n\t\t\t(c._dirty = true) &&\n\t\t\trerenderQueue.push(c) &&\n\t\t\t!process._rerenderCount++) ||\n\t\tprevDebounce != options.debounceRendering\n\t) {\n\t\tprevDebounce = options.debounceRendering;\n\t\t(prevDebounce || defer)(process);\n\t}\n}\n\n/**\n * @param {import('./internal').Component} a\n * @param {import('./internal').Component} b\n */\nconst depthSort = (a, b) => a._vnode._depth - b._vnode._depth;\n\n/** Flush the render queue by rerendering all queued components */\nfunction process() {\n\tlet c,\n\t\tl = 1;\n\n\t// Don't update `renderCount` yet. Keep its value non-zero to prevent unnecessary\n\t// process() calls from getting scheduled while `queue` is still being consumed.\n\twhile (rerenderQueue.length) {\n\t\t// Keep the rerender queue sorted by (depth, insertion order). The queue\n\t\t// will initially be sorted on the first iteration only if it has more than 1 item.\n\t\t//\n\t\t// New items can be added to the queue e.g. when rerendering a provider, so we want to\n\t\t// keep the order from top to bottom with those new items so we can handle them in a\n\t\t// single pass\n\t\tif (rerenderQueue.length > l) {\n\t\t\trerenderQueue.sort(depthSort);\n\t\t}\n\n\t\tc = rerenderQueue.shift();\n\t\tl = rerenderQueue.length;\n\n\t\tif (c._dirty) {\n\t\t\trenderComponent(c);\n\t\t}\n\t}\n\tprocess._rerenderCount = 0;\n}\n\nprocess._rerenderCount = 0;\n", "import { IS_NON_DIMENSIONAL, NULL, SVG_NAMESPACE } from '../constants';\nimport options from '../options';\n\nfunction setStyle(style, key, value) {\n\tif (key[0] == '-') {\n\t\tstyle.setProperty(key, value == NULL ? '' : value);\n\t} else if (value == NULL) {\n\t\tstyle[key] = '';\n\t} else if (typeof value != 'number' || IS_NON_DIMENSIONAL.test(key)) {\n\t\tstyle[key] = value;\n\t} else {\n\t\tstyle[key] = value + 'px';\n\t}\n}\n\nconst CAPTURE_REGEX = /(PointerCapture)$|Capture$/i;\n\n// A logical clock to solve issues like https://github.com/preactjs/preact/issues/3927.\n// When the DOM performs an event it leaves micro-ticks in between bubbling up which means that\n// an event can trigger on a newly reated DOM-node while the event bubbles up.\n//\n// Originally inspired by Vue\n// (https://github.com/vuejs/core/blob/caeb8a68811a1b0f79/packages/runtime-dom/src/modules/events.ts#L90-L101),\n// but modified to use a logical clock instead of Date.now() in case event handlers get attached\n// and events get dispatched during the same millisecond.\n//\n// The clock is incremented after each new event dispatch. This allows 1 000 000 new events\n// per second for over 280 years before the value reaches Number.MAX_SAFE_INTEGER (2**53 - 1).\nlet eventClock = 0;\n\n/**\n * Set a property value on a DOM node\n * @param {import('../internal').PreactElement} dom The DOM node to modify\n * @param {string} name The name of the property to set\n * @param {*} value The value to set the property to\n * @param {*} oldValue The old value the property had\n * @param {string} namespace Whether or not this DOM node is an SVG node or not\n */\nexport function setProperty(dom, name, value, oldValue, namespace) {\n\tlet useCapture;\n\n\to: if (name == 'style') {\n\t\tif (typeof value == 'string') {\n\t\t\tdom.style.cssText = value;\n\t\t} else {\n\t\t\tif (typeof oldValue == 'string') {\n\t\t\t\tdom.style.cssText = oldValue = '';\n\t\t\t}\n\n\t\t\tif (oldValue) {\n\t\t\t\tfor (name in oldValue) {\n\t\t\t\t\tif (!(value && name in value)) {\n\t\t\t\t\t\tsetStyle(dom.style, name, '');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (value) {\n\t\t\t\tfor (name in value) {\n\t\t\t\t\tif (!oldValue || value[name] != oldValue[name]) {\n\t\t\t\t\t\tsetStyle(dom.style, name, value[name]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t// Benchmark for comparison: https://esbench.com/bench/574c954bdb965b9a00965ac6\n\telse if (name[0] == 'o' && name[1] == 'n') {\n\t\tuseCapture = name != (name = name.replace(CAPTURE_REGEX, '$1'));\n\t\tconst lowerCaseName = name.toLowerCase();\n\n\t\t// Infer correct casing for DOM built-in events:\n\t\tif (lowerCaseName in dom || name == 'onFocusOut' || name == 'onFocusIn')\n\t\t\tname = lowerCaseName.slice(2);\n\t\telse name = name.slice(2);\n\n\t\tif (!dom._listeners) dom._listeners = {};\n\t\tdom._listeners[name + useCapture] = value;\n\n\t\tif (value) {\n\t\t\tif (!oldValue) {\n\t\t\t\tvalue._attached = eventClock;\n\t\t\t\tdom.addEventListener(\n\t\t\t\t\tname,\n\t\t\t\t\tuseCapture ? eventProxyCapture : eventProxy,\n\t\t\t\t\tuseCapture\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tvalue._attached = oldValue._attached;\n\t\t\t}\n\t\t} else {\n\t\t\tdom.removeEventListener(\n\t\t\t\tname,\n\t\t\t\tuseCapture ? eventProxyCapture : eventProxy,\n\t\t\t\tuseCapture\n\t\t\t);\n\t\t}\n\t} else {\n\t\tif (namespace == SVG_NAMESPACE) {\n\t\t\t// Normalize incorrect prop usage for SVG:\n\t\t\t// - xlink:href / xlinkHref --> href (xlink:href was removed from SVG and isn't needed)\n\t\t\t// - className --> class\n\t\t\tname = name.replace(/xlink(H|:h)/, 'h').replace(/sName$/, 's');\n\t\t} else if (\n\t\t\tname != 'width' &&\n\t\t\tname != 'height' &&\n\t\t\tname != 'href' &&\n\t\t\tname != 'list' &&\n\t\t\tname != 'form' &&\n\t\t\t// Default value in browsers is `-1` and an empty string is\n\t\t\t// cast to `0` instead\n\t\t\tname != 'tabIndex' &&\n\t\t\tname != 'download' &&\n\t\t\tname != 'rowSpan' &&\n\t\t\tname != 'colSpan' &&\n\t\t\tname != 'role' &&\n\t\t\tname != 'popover' &&\n\t\t\tname in dom\n\t\t) {\n\t\t\ttry {\n\t\t\t\tdom[name] = value == NULL ? '' : value;\n\t\t\t\t// labelled break is 1b smaller here than a return statement (sorry)\n\t\t\t\tbreak o;\n\t\t\t} catch (e) {}\n\t\t}\n\n\t\t// aria- and data- attributes have no boolean representation.\n\t\t// A `false` value is different from the attribute not being\n\t\t// present, so we can't remove it. For non-boolean aria\n\t\t// attributes we could treat false as a removal, but the\n\t\t// amount of exceptions would cost too many bytes. On top of\n\t\t// that other frameworks generally stringify `false`.\n\n\t\tif (typeof value == 'function') {\n\t\t\t// never serialize functions as attribute values\n\t\t} else if (value != NULL && (value !== false || name[4] == '-')) {\n\t\t\tdom.setAttribute(name, name == 'popover' && value == true ? '' : value);\n\t\t} else {\n\t\t\tdom.removeAttribute(name);\n\t\t}\n\t}\n}\n\n/**\n * Create an event proxy function.\n * @param {boolean} useCapture Is the event handler for the capture phase.\n * @private\n */\nfunction createEventProxy(useCapture) {\n\t/**\n\t * Proxy an event to hooked event handlers\n\t * @param {import('../internal').PreactEvent} e The event object from the browser\n\t * @private\n\t */\n\treturn function (e) {\n\t\tif (this._listeners) {\n\t\t\tconst eventHandler = this._listeners[e.type + useCapture];\n\t\t\tif (e._dispatched == NULL) {\n\t\t\t\te._dispatched = eventClock++;\n\n\t\t\t\t// When `e._dispatched` is smaller than the time when the targeted event\n\t\t\t\t// handler was attached we know we have bubbled up to an element that was added\n\t\t\t\t// during patching the DOM.\n\t\t\t} else if (e._dispatched < eventHandler._attached) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\treturn eventHandler(options.event ? options.event(e) : e);\n\t\t}\n\t};\n}\n\nconst eventProxy = createEventProxy(false);\nconst eventProxyCapture = createEventProxy(true);\n", "import { enqueueRender } from './component';\nimport { NULL } from './constants';\n\nexport let i = 0;\n\nexport function createContext(defaultValue) {\n\tfunction Context(props) {\n\t\tif (!this.getChildContext) {\n\t\t\t/** @type {Set<import('./internal').Component> | null} */\n\t\t\tlet subs = new Set();\n\t\t\tlet ctx = {};\n\t\t\tctx[Context._id] = this;\n\n\t\t\tthis.getChildContext = () => ctx;\n\n\t\t\tthis.componentWillUnmount = () => {\n\t\t\t\tsubs = NULL;\n\t\t\t};\n\n\t\t\tthis.shouldComponentUpdate = function (_props) {\n\t\t\t\t// @ts-expect-error even\n\t\t\t\tif (this.props.value != _props.value) {\n\t\t\t\t\tsubs.forEach(c => {\n\t\t\t\t\t\tc._force = true;\n\t\t\t\t\t\tenqueueRender(c);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tthis.sub = c => {\n\t\t\t\tsubs.add(c);\n\t\t\t\tlet old = c.componentWillUnmount;\n\t\t\t\tc.componentWillUnmount = () => {\n\t\t\t\t\tif (subs) {\n\t\t\t\t\t\tsubs.delete(c);\n\t\t\t\t\t}\n\t\t\t\t\tif (old) old.call(c);\n\t\t\t\t};\n\t\t\t};\n\t\t}\n\n\t\treturn props.children;\n\t}\n\n\tContext._id = '__cC' + i++;\n\tContext._defaultValue = defaultValue;\n\n\t/** @type {import('./internal').FunctionComponent} */\n\tContext.Consumer = (props, contextValue) => {\n\t\treturn props.children(contextValue);\n\t};\n\n\t// we could also get rid of _contextRef entirely\n\tContext.Provider =\n\t\tContext._contextRef =\n\t\tContext.Consumer.contextType =\n\t\t\tContext;\n\n\treturn Context;\n}\n", "import { diff, unmount, applyRef } from './index';\nimport { createVNode, Fragment } from '../create-element';\nimport {\n\tEMPTY_OBJ,\n\tEMPTY_ARR,\n\tINSERT_VNODE,\n\tMATCHED,\n\tUNDEFINED,\n\tNULL\n} from '../constants';\nimport { isArray } from '../util';\nimport { getDomSibling } from '../component';\n\n/**\n * @typedef {import('../internal').ComponentChildren} ComponentChildren\n * @typedef {import('../internal').Component} Component\n * @typedef {import('../internal').PreactElement} PreactElement\n * @typedef {import('../internal').VNode} VNode\n */\n\n/**\n * Diff the children of a virtual node\n * @param {PreactElement} parentDom The DOM element whose children are being\n * diffed\n * @param {ComponentChildren[]} renderResult\n * @param {VNode} newParentVNode The new virtual node whose children should be\n * diff'ed against oldParentVNode\n * @param {VNode} oldParentVNode The old virtual node whose children should be\n * diff'ed against newParentVNode\n * @param {object} globalContext The current context object - modified by\n * getChildContext\n * @param {string} namespace Current namespace of the DOM node (HTML, SVG, or MathML)\n * @param {Array<PreactElement>} excessDomChildren\n * @param {Array<Component>} commitQueue List of components which have callbacks\n * to invoke in commitRoot\n * @param {PreactElement} oldDom The current attached DOM element any new dom\n * elements should be placed around. Likely `null` on first render (except when\n * hydrating). Can be a sibling DOM element when diffing Fragments that have\n * siblings. In most cases, it starts out as `oldChildren[0]._dom`.\n * @param {boolean} isHydrating Whether or not we are in hydration\n * @param {any[]} refQueue an array of elements needed to invoke refs\n */\nexport function diffChildren(\n\tparentDom,\n\trenderResult,\n\tnewParentVNode,\n\toldParentVNode,\n\tglobalContext,\n\tnamespace,\n\texcessDomChildren,\n\tcommitQueue,\n\toldDom,\n\tisHydrating,\n\trefQueue\n) {\n\tlet i,\n\t\t/** @type {VNode} */\n\t\toldVNode,\n\t\t/** @type {VNode} */\n\t\tchildVNode,\n\t\t/** @type {PreactElement} */\n\t\tnewDom,\n\t\t/** @type {PreactElement} */\n\t\tfirstChildDom;\n\n\t// This is a compression of oldParentVNode!=null && oldParentVNode != EMPTY_OBJ && oldParentVNode._children || EMPTY_ARR\n\t// as EMPTY_OBJ._children should be `undefined`.\n\t/** @type {VNode[]} */\n\tlet oldChildren = (oldParentVNode && oldParentVNode._children) || EMPTY_ARR;\n\n\tlet newChildrenLength = renderResult.length;\n\n\toldDom = constructNewChildrenArray(\n\t\tnewParentVNode,\n\t\trenderResult,\n\t\toldChildren,\n\t\toldDom,\n\t\tnewChildrenLength\n\t);\n\n\tfor (i = 0; i < newChildrenLength; i++) {\n\t\tchildVNode = newParentVNode._children[i];\n\t\tif (childVNode == NULL) continue;\n\n\t\t// At this point, constructNewChildrenArray has assigned _index to be the\n\t\t// matchingIndex for this VNode's oldVNode (or -1 if there is no oldVNode).\n\t\tif (childVNode._index == -1) {\n\t\t\toldVNode = EMPTY_OBJ;\n\t\t} else {\n\t\t\toldVNode = oldChildren[childVNode._index] || EMPTY_OBJ;\n\t\t}\n\n\t\t// Update childVNode._index to its final index\n\t\tchildVNode._index = i;\n\n\t\t// Morph the old element into the new one, but don't append it to the dom yet\n\t\tlet result = diff(\n\t\t\tparentDom,\n\t\t\tchildVNode,\n\t\t\toldVNode,\n\t\t\tglobalContext,\n\t\t\tnamespace,\n\t\t\texcessDomChildren,\n\t\t\tcommitQueue,\n\t\t\toldDom,\n\t\t\tisHydrating,\n\t\t\trefQueue\n\t\t);\n\n\t\t// Adjust DOM nodes\n\t\tnewDom = childVNode._dom;\n\t\tif (childVNode.ref && oldVNode.ref != childVNode.ref) {\n\t\t\tif (oldVNode.ref) {\n\t\t\t\tapplyRef(oldVNode.ref, NULL, childVNode);\n\t\t\t}\n\t\t\trefQueue.push(\n\t\t\t\tchildVNode.ref,\n\t\t\t\tchildVNode._component || newDom,\n\t\t\t\tchildVNode\n\t\t\t);\n\t\t}\n\n\t\tif (firstChildDom == NULL && newDom != NULL) {\n\t\t\tfirstChildDom = newDom;\n\t\t}\n\n\t\tlet shouldPlace = !!(childVNode._flags & INSERT_VNODE);\n\t\tif (shouldPlace || oldVNode._children === childVNode._children) {\n\t\t\toldDom = insert(childVNode, oldDom, parentDom, shouldPlace);\n\t\t} else if (typeof childVNode.type == 'function' && result !== UNDEFINED) {\n\t\t\toldDom = result;\n\t\t} else if (newDom) {\n\t\t\toldDom = newDom.nextSibling;\n\t\t}\n\n\t\t// Unset diffing flags\n\t\tchildVNode._flags &= ~(INSERT_VNODE | MATCHED);\n\t}\n\n\tnewParentVNode._dom = firstChildDom;\n\n\treturn oldDom;\n}\n\n/**\n * @param {VNode} newParentVNode\n * @param {ComponentChildren[]} renderResult\n * @param {VNode[]} oldChildren\n */\nfunction constructNewChildrenArray(\n\tnewParentVNode,\n\trenderResult,\n\toldChildren,\n\toldDom,\n\tnewChildrenLength\n) {\n\t/** @type {number} */\n\tlet i;\n\t/** @type {VNode} */\n\tlet childVNode;\n\t/** @type {VNode} */\n\tlet oldVNode;\n\n\tlet oldChildrenLength = oldChildren.length,\n\t\tremainingOldChildren = oldChildrenLength;\n\n\tlet skew = 0;\n\n\tnewParentVNode._children = new Array(newChildrenLength);\n\tfor (i = 0; i < newChildrenLength; i++) {\n\t\t// @ts-expect-error We are reusing the childVNode variable to hold both the\n\t\t// pre and post normalized childVNode\n\t\tchildVNode = renderResult[i];\n\n\t\tif (\n\t\t\tchildVNode == NULL ||\n\t\t\ttypeof childVNode == 'boolean' ||\n\t\t\ttypeof childVNode == 'function'\n\t\t) {\n\t\t\tnewParentVNode._children[i] = NULL;\n\t\t\tcontinue;\n\t\t}\n\t\t// If this newVNode is being reused (e.g. <div>{reuse}{reuse}</div>) in the same diff,\n\t\t// or we are rendering a component (e.g. setState) copy the oldVNodes so it can have\n\t\t// it's own DOM & etc. pointers\n\t\telse if (\n\t\t\ttypeof childVNode == 'string' ||\n\t\t\ttypeof childVNode == 'number' ||\n\t\t\t// eslint-disable-next-line valid-typeof\n\t\t\ttypeof childVNode == 'bigint' ||\n\t\t\tchildVNode.constructor == String\n\t\t) {\n\t\t\tchildVNode = newParentVNode._children[i] = createVNode(\n\t\t\t\tNULL,\n\t\t\t\tchildVNode,\n\t\t\t\tNULL,\n\t\t\t\tNULL,\n\t\t\t\tNULL\n\t\t\t);\n\t\t} else if (isArray(childVNode)) {\n\t\t\tchildVNode = newParentVNode._children[i] = createVNode(\n\t\t\t\tFragment,\n\t\t\t\t{ children: childVNode },\n\t\t\t\tNULL,\n\t\t\t\tNULL,\n\t\t\t\tNULL\n\t\t\t);\n\t\t} else if (childVNode.constructor == UNDEFINED && childVNode._depth > 0) {\n\t\t\t// VNode is already in use, clone it. This can happen in the following\n\t\t\t// scenario:\n\t\t\t//   const reuse = <div />\n\t\t\t//   <div>{reuse}<span />{reuse}</div>\n\t\t\tchildVNode = newParentVNode._children[i] = createVNode(\n\t\t\t\tchildVNode.type,\n\t\t\t\tchildVNode.props,\n\t\t\t\tchildVNode.key,\n\t\t\t\tchildVNode.ref ? childVNode.ref : NULL,\n\t\t\t\tchildVNode._original\n\t\t\t);\n\t\t} else {\n\t\t\tchildVNode = newParentVNode._children[i] = childVNode;\n\t\t}\n\n\t\tconst skewedIndex = i + skew;\n\t\tchildVNode._parent = newParentVNode;\n\t\tchildVNode._depth = newParentVNode._depth + 1;\n\n\t\t// Temporarily store the matchingIndex on the _index property so we can pull\n\t\t// out the oldVNode in diffChildren. We'll override this to the VNode's\n\t\t// final index after using this property to get the oldVNode\n\t\tconst matchingIndex = (childVNode._index = findMatchingIndex(\n\t\t\tchildVNode,\n\t\t\toldChildren,\n\t\t\tskewedIndex,\n\t\t\tremainingOldChildren\n\t\t));\n\n\t\toldVNode = NULL;\n\t\tif (matchingIndex != -1) {\n\t\t\toldVNode = oldChildren[matchingIndex];\n\t\t\tremainingOldChildren--;\n\t\t\tif (oldVNode) {\n\t\t\t\toldVNode._flags |= MATCHED;\n\t\t\t}\n\t\t}\n\n\t\t// Here, we define isMounting for the purposes of the skew diffing\n\t\t// algorithm. Nodes that are unsuspending are considered mounting and we detect\n\t\t// this by checking if oldVNode._original == null\n\t\tconst isMounting = oldVNode == NULL || oldVNode._original == NULL;\n\n\t\tif (isMounting) {\n\t\t\tif (matchingIndex == -1) {\n\t\t\t\t// When the array of children is growing we need to decrease the skew\n\t\t\t\t// as we are adding a new element to the array.\n\t\t\t\t// Example:\n\t\t\t\t// [1, 2, 3] --> [0, 1, 2, 3]\n\t\t\t\t// oldChildren   newChildren\n\t\t\t\t//\n\t\t\t\t// The new element is at index 0, so our skew is 0,\n\t\t\t\t// we need to decrease the skew as we are adding a new element.\n\t\t\t\t// The decrease will cause us to compare the element at position 1\n\t\t\t\t// with value 1 with the element at position 0 with value 0.\n\t\t\t\t//\n\t\t\t\t// A linear concept is applied when the array is shrinking,\n\t\t\t\t// if the length is unchanged we can assume that no skew\n\t\t\t\t// changes are needed.\n\t\t\t\tif (newChildrenLength > oldChildrenLength) {\n\t\t\t\t\tskew--;\n\t\t\t\t} else if (newChildrenLength < oldChildrenLength) {\n\t\t\t\t\tskew++;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// If we are mounting a DOM VNode, mark it for insertion\n\t\t\tif (typeof childVNode.type != 'function') {\n\t\t\t\tchildVNode._flags |= INSERT_VNODE;\n\t\t\t}\n\t\t} else if (matchingIndex != skewedIndex) {\n\t\t\t// When we move elements around i.e. [0, 1, 2] --> [1, 0, 2]\n\t\t\t// --> we diff 1, we find it at position 1 while our skewed index is 0 and our skew is 0\n\t\t\t//     we set the skew to 1 as we found an offset.\n\t\t\t// --> we diff 0, we find it at position 0 while our skewed index is at 2 and our skew is 1\n\t\t\t//     this makes us increase the skew again.\n\t\t\t// --> we diff 2, we find it at position 2 while our skewed index is at 4 and our skew is 2\n\t\t\t//\n\t\t\t// this becomes an optimization question where currently we see a 1 element offset as an insertion\n\t\t\t// or deletion i.e. we optimize for [0, 1, 2] --> [9, 0, 1, 2]\n\t\t\t// while a more than 1 offset we see as a swap.\n\t\t\t// We could probably build heuristics for having an optimized course of action here as well, but\n\t\t\t// might go at the cost of some bytes.\n\t\t\t//\n\t\t\t// If we wanted to optimize for i.e. only swaps we'd just do the last two code-branches and have\n\t\t\t// only the first item be a re-scouting and all the others fall in their skewed counter-part.\n\t\t\t// We could also further optimize for swaps\n\t\t\tif (matchingIndex == skewedIndex - 1) {\n\t\t\t\tskew--;\n\t\t\t} else if (matchingIndex == skewedIndex + 1) {\n\t\t\t\tskew++;\n\t\t\t} else {\n\t\t\t\tif (matchingIndex > skewedIndex) {\n\t\t\t\t\tskew--;\n\t\t\t\t} else {\n\t\t\t\t\tskew++;\n\t\t\t\t}\n\n\t\t\t\t// Move this VNode's DOM if the original index (matchingIndex) doesn't\n\t\t\t\t// match the new skew index (i + new skew)\n\t\t\t\t// In the former two branches we know that it matches after skewing\n\t\t\t\tchildVNode._flags |= INSERT_VNODE;\n\t\t\t}\n\t\t}\n\t}\n\n\t// Remove remaining oldChildren if there are any. Loop forwards so that as we\n\t// unmount DOM from the beginning of the oldChildren, we can adjust oldDom to\n\t// point to the next child, which needs to be the first DOM node that won't be\n\t// unmounted.\n\tif (remainingOldChildren) {\n\t\tfor (i = 0; i < oldChildrenLength; i++) {\n\t\t\toldVNode = oldChildren[i];\n\t\t\tif (oldVNode != NULL && (oldVNode._flags & MATCHED) == 0) {\n\t\t\t\tif (oldVNode._dom == oldDom) {\n\t\t\t\t\toldDom = getDomSibling(oldVNode);\n\t\t\t\t}\n\n\t\t\t\tunmount(oldVNode, oldVNode);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn oldDom;\n}\n\n/**\n * @param {VNode} parentVNode\n * @param {PreactElement} oldDom\n * @param {PreactElement} parentDom\n * @param {boolean} shouldPlace\n * @returns {PreactElement}\n */\nfunction insert(parentVNode, oldDom, parentDom, shouldPlace) {\n\t// Note: VNodes in nested suspended trees may be missing _children.\n\n\tif (typeof parentVNode.type == 'function') {\n\t\tlet children = parentVNode._children;\n\t\tfor (let i = 0; children && i < children.length; i++) {\n\t\t\tif (children[i]) {\n\t\t\t\t// If we enter this code path on sCU bailout, where we copy\n\t\t\t\t// oldVNode._children to newVNode._children, we need to update the old\n\t\t\t\t// children's _parent pointer to point to the newVNode (parentVNode\n\t\t\t\t// here).\n\t\t\t\tchildren[i]._parent = parentVNode;\n\t\t\t\toldDom = insert(children[i], oldDom, parentDom, shouldPlace);\n\t\t\t}\n\t\t}\n\n\t\treturn oldDom;\n\t} else if (parentVNode._dom != oldDom) {\n\t\tif (shouldPlace) {\n\t\t\tif (oldDom && parentVNode.type && !oldDom.parentNode) {\n\t\t\t\toldDom = getDomSibling(parentVNode);\n\t\t\t}\n\t\t\tparentDom.insertBefore(parentVNode._dom, oldDom || NULL);\n\t\t}\n\t\toldDom = parentVNode._dom;\n\t}\n\n\tdo {\n\t\toldDom = oldDom && oldDom.nextSibling;\n\t} while (oldDom != NULL && oldDom.nodeType == 8);\n\n\treturn oldDom;\n}\n\n/**\n * Flatten and loop through the children of a virtual node\n * @param {ComponentChildren} children The unflattened children of a virtual\n * node\n * @returns {VNode[]}\n */\nexport function toChildArray(children, out) {\n\tout = out || [];\n\tif (children == NULL || typeof children == 'boolean') {\n\t} else if (isArray(children)) {\n\t\tchildren.some(child => {\n\t\t\ttoChildArray(child, out);\n\t\t});\n\t} else {\n\t\tout.push(children);\n\t}\n\treturn out;\n}\n\n/**\n * @param {VNode} childVNode\n * @param {VNode[]} oldChildren\n * @param {number} skewedIndex\n * @param {number} remainingOldChildren\n * @returns {number}\n */\nfunction findMatchingIndex(\n\tchildVNode,\n\toldChildren,\n\tskewedIndex,\n\tremainingOldChildren\n) {\n\tconst key = childVNode.key;\n\tconst type = childVNode.type;\n\tlet oldVNode = oldChildren[skewedIndex];\n\tconst matched = oldVNode != NULL && (oldVNode._flags & MATCHED) == 0;\n\n\t// We only need to perform a search if there are more children\n\t// (remainingOldChildren) to search. However, if the oldVNode we just looked\n\t// at skewedIndex was not already used in this diff, then there must be at\n\t// least 1 other (so greater than 1) remainingOldChildren to attempt to match\n\t// against. So the following condition checks that ensuring\n\t// remainingOldChildren > 1 if the oldVNode is not already used/matched. Else\n\t// if the oldVNode was null or matched, then there could needs to be at least\n\t// 1 (aka `remainingOldChildren > 0`) children to find and compare against.\n\t//\n\t// If there is an unkeyed functional VNode, that isn't a built-in like our Fragment,\n\t// we should not search as we risk re-using state of an unrelated VNode. (reverted for now)\n\tlet shouldSearch =\n\t\t// (typeof type != 'function' || type === Fragment || key) &&\n\t\tremainingOldChildren > (matched ? 1 : 0);\n\n\tif (\n\t\t(oldVNode === NULL && childVNode.key == null) ||\n\t\t(matched && key == oldVNode.key && type == oldVNode.type)\n\t) {\n\t\treturn skewedIndex;\n\t} else if (shouldSearch) {\n\t\tlet x = skewedIndex - 1;\n\t\tlet y = skewedIndex + 1;\n\t\twhile (x >= 0 || y < oldChildren.length) {\n\t\t\tconst childIndex = x >= 0 ? x-- : y++;\n\t\t\toldVNode = oldChildren[childIndex];\n\t\t\tif (\n\t\t\t\toldVNode != NULL &&\n\t\t\t\t(oldVNode._flags & MATCHED) == 0 &&\n\t\t\t\tkey == oldVNode.key &&\n\t\t\t\ttype == oldVNode.type\n\t\t\t) {\n\t\t\t\treturn childIndex;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn -1;\n}\n", "import {\n\tEMPTY_OBJ,\n\tMATH_NAMESPACE,\n\tMODE_HYDRATE,\n\tMODE_SUSPENDED,\n\tNULL,\n\tRESET_MODE,\n\tSVG_NAMESPACE,\n\tUNDEFINED,\n\tXHTML_NAMESPACE\n} from '../constants';\nimport { BaseComponent, getDomSibling } from '../component';\nimport { Fragment } from '../create-element';\nimport { diffChildren } from './children';\nimport { setProperty } from './props';\nimport { assign, isArray, removeNode, slice } from '../util';\nimport options from '../options';\n\n/**\n * @typedef {import('../internal').ComponentChildren} ComponentChildren\n * @typedef {import('../internal').Component} Component\n * @typedef {import('../internal').PreactElement} PreactElement\n * @typedef {import('../internal').VNode} VNode\n */\n\n/**\n * @template {any} T\n * @typedef {import('../internal').Ref<T>} Ref<T>\n */\n\n/**\n * Diff two virtual nodes and apply proper changes to the DOM\n * @param {PreactElement} parentDom The parent of the DOM element\n * @param {VNode} newVNode The new virtual node\n * @param {VNode} oldVNode The old virtual node\n * @param {object} globalContext The current context object. Modified by\n * getChildContext\n * @param {string} namespace Current namespace of the DOM node (HTML, SVG, or MathML)\n * @param {Array<PreactElement>} excessDomChildren\n * @param {Array<Component>} commitQueue List of components which have callbacks\n * to invoke in commitRoot\n * @param {PreactElement} oldDom The current attached DOM element any new dom\n * elements should be placed around. Likely `null` on first render (except when\n * hydrating). Can be a sibling DOM element when diffing Fragments that have\n * siblings. In most cases, it starts out as `oldChildren[0]._dom`.\n * @param {boolean} isHydrating Whether or not we are in hydration\n * @param {any[]} refQueue an array of elements needed to invoke refs\n */\nexport function diff(\n\tparentDom,\n\tnewVNode,\n\toldVNode,\n\tglobalContext,\n\tnamespace,\n\texcessDomChildren,\n\tcommitQueue,\n\toldDom,\n\tisHydrating,\n\trefQueue\n) {\n\t/** @type {any} */\n\tlet tmp,\n\t\tnewType = newVNode.type;\n\n\t// When passing through createElement it assigns the object\n\t// constructor as undefined. This to prevent JSON-injection.\n\tif (newVNode.constructor != UNDEFINED) return NULL;\n\n\t// If the previous diff bailed out, resume creating/hydrating.\n\tif (oldVNode._flags & MODE_SUSPENDED) {\n\t\tisHydrating = !!(oldVNode._flags & MODE_HYDRATE);\n\t\toldDom = newVNode._dom = oldVNode._dom;\n\t\texcessDomChildren = [oldDom];\n\t}\n\n\tif ((tmp = options._diff)) tmp(newVNode);\n\n\touter: if (typeof newType == 'function') {\n\t\ttry {\n\t\t\tlet c, isNew, oldProps, oldState, snapshot, clearProcessingException;\n\t\t\tlet newProps = newVNode.props;\n\t\t\tconst isClassComponent =\n\t\t\t\t'prototype' in newType && newType.prototype.render;\n\n\t\t\t// Necessary for createContext api. Setting this property will pass\n\t\t\t// the context value as `this.context` just for this component.\n\t\t\ttmp = newType.contextType;\n\t\t\tlet provider = tmp && globalContext[tmp._id];\n\t\t\tlet componentContext = tmp\n\t\t\t\t? provider\n\t\t\t\t\t? provider.props.value\n\t\t\t\t\t: tmp._defaultValue\n\t\t\t\t: globalContext;\n\n\t\t\t// Get component and set it to `c`\n\t\t\tif (oldVNode._component) {\n\t\t\t\tc = newVNode._component = oldVNode._component;\n\t\t\t\tclearProcessingException = c._processingException = c._pendingError;\n\t\t\t} else {\n\t\t\t\t// Instantiate the new component\n\t\t\t\tif (isClassComponent) {\n\t\t\t\t\t// @ts-expect-error The check above verifies that newType is suppose to be constructed\n\t\t\t\t\tnewVNode._component = c = new newType(newProps, componentContext); // eslint-disable-line new-cap\n\t\t\t\t} else {\n\t\t\t\t\t// @ts-expect-error Trust me, Component implements the interface we want\n\t\t\t\t\tnewVNode._component = c = new BaseComponent(\n\t\t\t\t\t\tnewProps,\n\t\t\t\t\t\tcomponentContext\n\t\t\t\t\t);\n\t\t\t\t\tc.constructor = newType;\n\t\t\t\t\tc.render = doRender;\n\t\t\t\t}\n\t\t\t\tif (provider) provider.sub(c);\n\n\t\t\t\tc.props = newProps;\n\t\t\t\tif (!c.state) c.state = {};\n\t\t\t\tc.context = componentContext;\n\t\t\t\tc._globalContext = globalContext;\n\t\t\t\tisNew = c._dirty = true;\n\t\t\t\tc._renderCallbacks = [];\n\t\t\t\tc._stateCallbacks = [];\n\t\t\t}\n\n\t\t\t// Invoke getDerivedStateFromProps\n\t\t\tif (isClassComponent && c._nextState == NULL) {\n\t\t\t\tc._nextState = c.state;\n\t\t\t}\n\n\t\t\tif (isClassComponent && newType.getDerivedStateFromProps != NULL) {\n\t\t\t\tif (c._nextState == c.state) {\n\t\t\t\t\tc._nextState = assign({}, c._nextState);\n\t\t\t\t}\n\n\t\t\t\tassign(\n\t\t\t\t\tc._nextState,\n\t\t\t\t\tnewType.getDerivedStateFromProps(newProps, c._nextState)\n\t\t\t\t);\n\t\t\t}\n\n\t\t\toldProps = c.props;\n\t\t\toldState = c.state;\n\t\t\tc._vnode = newVNode;\n\n\t\t\t// Invoke pre-render lifecycle methods\n\t\t\tif (isNew) {\n\t\t\t\tif (\n\t\t\t\t\tisClassComponent &&\n\t\t\t\t\tnewType.getDerivedStateFromProps == NULL &&\n\t\t\t\t\tc.componentWillMount != NULL\n\t\t\t\t) {\n\t\t\t\t\tc.componentWillMount();\n\t\t\t\t}\n\n\t\t\t\tif (isClassComponent && c.componentDidMount != NULL) {\n\t\t\t\t\tc._renderCallbacks.push(c.componentDidMount);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (\n\t\t\t\t\tisClassComponent &&\n\t\t\t\t\tnewType.getDerivedStateFromProps == NULL &&\n\t\t\t\t\tnewProps !== oldProps &&\n\t\t\t\t\tc.componentWillReceiveProps != NULL\n\t\t\t\t) {\n\t\t\t\t\tc.componentWillReceiveProps(newProps, componentContext);\n\t\t\t\t}\n\n\t\t\t\tif (\n\t\t\t\t\t(!c._force &&\n\t\t\t\t\t\tc.shouldComponentUpdate != NULL &&\n\t\t\t\t\t\tc.shouldComponentUpdate(\n\t\t\t\t\t\t\tnewProps,\n\t\t\t\t\t\t\tc._nextState,\n\t\t\t\t\t\t\tcomponentContext\n\t\t\t\t\t\t) === false) ||\n\t\t\t\t\tnewVNode._original == oldVNode._original\n\t\t\t\t) {\n\t\t\t\t\t// More info about this here: https://gist.github.com/JoviDeCroock/bec5f2ce93544d2e6070ef8e0036e4e8\n\t\t\t\t\tif (newVNode._original != oldVNode._original) {\n\t\t\t\t\t\t// When we are dealing with a bail because of sCU we have to update\n\t\t\t\t\t\t// the props, state and dirty-state.\n\t\t\t\t\t\t// when we are dealing with strict-equality we don't as the child could still\n\t\t\t\t\t\t// be dirtied see #3883\n\t\t\t\t\t\tc.props = newProps;\n\t\t\t\t\t\tc.state = c._nextState;\n\t\t\t\t\t\tc._dirty = false;\n\t\t\t\t\t}\n\n\t\t\t\t\tnewVNode._dom = oldVNode._dom;\n\t\t\t\t\tnewVNode._children = oldVNode._children;\n\t\t\t\t\tnewVNode._children.some(vnode => {\n\t\t\t\t\t\tif (vnode) vnode._parent = newVNode;\n\t\t\t\t\t});\n\n\t\t\t\t\tfor (let i = 0; i < c._stateCallbacks.length; i++) {\n\t\t\t\t\t\tc._renderCallbacks.push(c._stateCallbacks[i]);\n\t\t\t\t\t}\n\t\t\t\t\tc._stateCallbacks = [];\n\n\t\t\t\t\tif (c._renderCallbacks.length) {\n\t\t\t\t\t\tcommitQueue.push(c);\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak outer;\n\t\t\t\t}\n\n\t\t\t\tif (c.componentWillUpdate != NULL) {\n\t\t\t\t\tc.componentWillUpdate(newProps, c._nextState, componentContext);\n\t\t\t\t}\n\n\t\t\t\tif (isClassComponent && c.componentDidUpdate != NULL) {\n\t\t\t\t\tc._renderCallbacks.push(() => {\n\t\t\t\t\t\tc.componentDidUpdate(oldProps, oldState, snapshot);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tc.context = componentContext;\n\t\t\tc.props = newProps;\n\t\t\tc._parentDom = parentDom;\n\t\t\tc._force = false;\n\n\t\t\tlet renderHook = options._render,\n\t\t\t\tcount = 0;\n\t\t\tif (isClassComponent) {\n\t\t\t\tc.state = c._nextState;\n\t\t\t\tc._dirty = false;\n\n\t\t\t\tif (renderHook) renderHook(newVNode);\n\n\t\t\t\ttmp = c.render(c.props, c.state, c.context);\n\n\t\t\t\tfor (let i = 0; i < c._stateCallbacks.length; i++) {\n\t\t\t\t\tc._renderCallbacks.push(c._stateCallbacks[i]);\n\t\t\t\t}\n\t\t\t\tc._stateCallbacks = [];\n\t\t\t} else {\n\t\t\t\tdo {\n\t\t\t\t\tc._dirty = false;\n\t\t\t\t\tif (renderHook) renderHook(newVNode);\n\n\t\t\t\t\ttmp = c.render(c.props, c.state, c.context);\n\n\t\t\t\t\t// Handle setState called in render, see #2553\n\t\t\t\t\tc.state = c._nextState;\n\t\t\t\t} while (c._dirty && ++count < 25);\n\t\t\t}\n\n\t\t\t// Handle setState called in render, see #2553\n\t\t\tc.state = c._nextState;\n\n\t\t\tif (c.getChildContext != NULL) {\n\t\t\t\tglobalContext = assign(assign({}, globalContext), c.getChildContext());\n\t\t\t}\n\n\t\t\tif (isClassComponent && !isNew && c.getSnapshotBeforeUpdate != NULL) {\n\t\t\t\tsnapshot = c.getSnapshotBeforeUpdate(oldProps, oldState);\n\t\t\t}\n\n\t\t\tlet isTopLevelFragment =\n\t\t\t\ttmp != NULL && tmp.type === Fragment && tmp.key == NULL;\n\t\t\tlet renderResult = tmp;\n\n\t\t\tif (isTopLevelFragment) {\n\t\t\t\trenderResult = cloneNode(tmp.props.children);\n\t\t\t}\n\n\t\t\toldDom = diffChildren(\n\t\t\t\tparentDom,\n\t\t\t\tisArray(renderResult) ? renderResult : [renderResult],\n\t\t\t\tnewVNode,\n\t\t\t\toldVNode,\n\t\t\t\tglobalContext,\n\t\t\t\tnamespace,\n\t\t\t\texcessDomChildren,\n\t\t\t\tcommitQueue,\n\t\t\t\toldDom,\n\t\t\t\tisHydrating,\n\t\t\t\trefQueue\n\t\t\t);\n\n\t\t\tc.base = newVNode._dom;\n\n\t\t\t// We successfully rendered this VNode, unset any stored hydration/bailout state:\n\t\t\tnewVNode._flags &= RESET_MODE;\n\n\t\t\tif (c._renderCallbacks.length) {\n\t\t\t\tcommitQueue.push(c);\n\t\t\t}\n\n\t\t\tif (clearProcessingException) {\n\t\t\t\tc._pendingError = c._processingException = NULL;\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tnewVNode._original = NULL;\n\t\t\t// if hydrating or creating initial tree, bailout preserves DOM:\n\t\t\tif (isHydrating || excessDomChildren != NULL) {\n\t\t\t\tif (e.then) {\n\t\t\t\t\tnewVNode._flags |= isHydrating\n\t\t\t\t\t\t? MODE_HYDRATE | MODE_SUSPENDED\n\t\t\t\t\t\t: MODE_SUSPENDED;\n\n\t\t\t\t\twhile (oldDom && oldDom.nodeType == 8 && oldDom.nextSibling) {\n\t\t\t\t\t\toldDom = oldDom.nextSibling;\n\t\t\t\t\t}\n\n\t\t\t\t\texcessDomChildren[excessDomChildren.indexOf(oldDom)] = NULL;\n\t\t\t\t\tnewVNode._dom = oldDom;\n\t\t\t\t} else {\n\t\t\t\t\tfor (let i = excessDomChildren.length; i--; ) {\n\t\t\t\t\t\tremoveNode(excessDomChildren[i]);\n\t\t\t\t\t}\n\t\t\t\t\tmarkAsForce(newVNode);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tnewVNode._dom = oldVNode._dom;\n\t\t\t\tnewVNode._children = oldVNode._children;\n\t\t\t\tif (!e.then) markAsForce(newVNode);\n\t\t\t}\n\t\t\toptions._catchError(e, newVNode, oldVNode);\n\t\t}\n\t} else if (\n\t\texcessDomChildren == NULL &&\n\t\tnewVNode._original == oldVNode._original\n\t) {\n\t\tnewVNode._children = oldVNode._children;\n\t\tnewVNode._dom = oldVNode._dom;\n\t} else {\n\t\toldDom = newVNode._dom = diffElementNodes(\n\t\t\toldVNode._dom,\n\t\t\tnewVNode,\n\t\t\toldVNode,\n\t\t\tglobalContext,\n\t\t\tnamespace,\n\t\t\texcessDomChildren,\n\t\t\tcommitQueue,\n\t\t\tisHydrating,\n\t\t\trefQueue\n\t\t);\n\t}\n\n\tif ((tmp = options.diffed)) tmp(newVNode);\n\n\treturn newVNode._flags & MODE_SUSPENDED ? undefined : oldDom;\n}\n\nfunction markAsForce(vnode) {\n\tif (vnode && vnode._component) vnode._component._force = true;\n\tif (vnode && vnode._children) vnode._children.forEach(markAsForce);\n}\n\n/**\n * @param {Array<Component>} commitQueue List of components\n * which have callbacks to invoke in commitRoot\n * @param {VNode} root\n */\nexport function commitRoot(commitQueue, root, refQueue) {\n\tfor (let i = 0; i < refQueue.length; i++) {\n\t\tapplyRef(refQueue[i], refQueue[++i], refQueue[++i]);\n\t}\n\n\tif (options._commit) options._commit(root, commitQueue);\n\n\tcommitQueue.some(c => {\n\t\ttry {\n\t\t\t// @ts-expect-error Reuse the commitQueue variable here so the type changes\n\t\t\tcommitQueue = c._renderCallbacks;\n\t\t\tc._renderCallbacks = [];\n\t\t\tcommitQueue.some(cb => {\n\t\t\t\t// @ts-expect-error See above comment on commitQueue\n\t\t\t\tcb.call(c);\n\t\t\t});\n\t\t} catch (e) {\n\t\t\toptions._catchError(e, c._vnode);\n\t\t}\n\t});\n}\n\nfunction cloneNode(node) {\n\tif (\n\t\ttypeof node != 'object' ||\n\t\tnode == NULL ||\n\t\t(node._depth && node._depth > 0)\n\t) {\n\t\treturn node;\n\t}\n\n\tif (isArray(node)) {\n\t\treturn node.map(cloneNode);\n\t}\n\n\treturn assign({}, node);\n}\n\n/**\n * Diff two virtual nodes representing DOM element\n * @param {PreactElement} dom The DOM element representing the virtual nodes\n * being diffed\n * @param {VNode} newVNode The new virtual node\n * @param {VNode} oldVNode The old virtual node\n * @param {object} globalContext The current context object\n * @param {string} namespace Current namespace of the DOM node (HTML, SVG, or MathML)\n * @param {Array<PreactElement>} excessDomChildren\n * @param {Array<Component>} commitQueue List of components which have callbacks\n * to invoke in commitRoot\n * @param {boolean} isHydrating Whether or not we are in hydration\n * @param {any[]} refQueue an array of elements needed to invoke refs\n * @returns {PreactElement}\n */\nfunction diffElementNodes(\n\tdom,\n\tnewVNode,\n\toldVNode,\n\tglobalContext,\n\tnamespace,\n\texcessDomChildren,\n\tcommitQueue,\n\tisHydrating,\n\trefQueue\n) {\n\tlet oldProps = oldVNode.props;\n\tlet newProps = newVNode.props;\n\tlet nodeType = /** @type {string} */ (newVNode.type);\n\t/** @type {any} */\n\tlet i;\n\t/** @type {{ __html?: string }} */\n\tlet newHtml;\n\t/** @type {{ __html?: string }} */\n\tlet oldHtml;\n\t/** @type {ComponentChildren} */\n\tlet newChildren;\n\tlet value;\n\tlet inputValue;\n\tlet checked;\n\n\t// Tracks entering and exiting namespaces when descending through the tree.\n\tif (nodeType == 'svg') namespace = SVG_NAMESPACE;\n\telse if (nodeType == 'math') namespace = MATH_NAMESPACE;\n\telse if (!namespace) namespace = XHTML_NAMESPACE;\n\n\tif (excessDomChildren != NULL) {\n\t\tfor (i = 0; i < excessDomChildren.length; i++) {\n\t\t\tvalue = excessDomChildren[i];\n\n\t\t\t// if newVNode matches an element in excessDomChildren or the `dom`\n\t\t\t// argument matches an element in excessDomChildren, remove it from\n\t\t\t// excessDomChildren so it isn't later removed in diffChildren\n\t\t\tif (\n\t\t\t\tvalue &&\n\t\t\t\t'setAttribute' in value == !!nodeType &&\n\t\t\t\t(nodeType ? value.localName == nodeType : value.nodeType == 3)\n\t\t\t) {\n\t\t\t\tdom = value;\n\t\t\t\texcessDomChildren[i] = NULL;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tif (dom == NULL) {\n\t\tif (nodeType == NULL) {\n\t\t\treturn document.createTextNode(newProps);\n\t\t}\n\n\t\tdom = document.createElementNS(\n\t\t\tnamespace,\n\t\t\tnodeType,\n\t\t\tnewProps.is && newProps\n\t\t);\n\n\t\t// we are creating a new node, so we can assume this is a new subtree (in\n\t\t// case we are hydrating), this deopts the hydrate\n\t\tif (isHydrating) {\n\t\t\tif (options._hydrationMismatch)\n\t\t\t\toptions._hydrationMismatch(newVNode, excessDomChildren);\n\t\t\tisHydrating = false;\n\t\t}\n\t\t// we created a new parent, so none of the previously attached children can be reused:\n\t\texcessDomChildren = NULL;\n\t}\n\n\tif (nodeType == NULL) {\n\t\t// During hydration, we still have to split merged text from SSR'd HTML.\n\t\tif (oldProps !== newProps && (!isHydrating || dom.data != newProps)) {\n\t\t\tdom.data = newProps;\n\t\t}\n\t} else {\n\t\t// If excessDomChildren was not null, repopulate it with the current element's children:\n\t\texcessDomChildren = excessDomChildren && slice.call(dom.childNodes);\n\n\t\toldProps = oldVNode.props || EMPTY_OBJ;\n\n\t\t// If we are in a situation where we are not hydrating but are using\n\t\t// existing DOM (e.g. replaceNode) we should read the existing DOM\n\t\t// attributes to diff them\n\t\tif (!isHydrating && excessDomChildren != NULL) {\n\t\t\toldProps = {};\n\t\t\tfor (i = 0; i < dom.attributes.length; i++) {\n\t\t\t\tvalue = dom.attributes[i];\n\t\t\t\toldProps[value.name] = value.value;\n\t\t\t}\n\t\t}\n\n\t\tfor (i in oldProps) {\n\t\t\tvalue = oldProps[i];\n\t\t\tif (i == 'children') {\n\t\t\t} else if (i == 'dangerouslySetInnerHTML') {\n\t\t\t\toldHtml = value;\n\t\t\t} else if (!(i in newProps)) {\n\t\t\t\tif (\n\t\t\t\t\t(i == 'value' && 'defaultValue' in newProps) ||\n\t\t\t\t\t(i == 'checked' && 'defaultChecked' in newProps)\n\t\t\t\t) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tsetProperty(dom, i, NULL, value, namespace);\n\t\t\t}\n\t\t}\n\n\t\t// During hydration, props are not diffed at all (including dangerouslySetInnerHTML)\n\t\t// @TODO we should warn in debug mode when props don't match here.\n\t\tfor (i in newProps) {\n\t\t\tvalue = newProps[i];\n\t\t\tif (i == 'children') {\n\t\t\t\tnewChildren = value;\n\t\t\t} else if (i == 'dangerouslySetInnerHTML') {\n\t\t\t\tnewHtml = value;\n\t\t\t} else if (i == 'value') {\n\t\t\t\tinputValue = value;\n\t\t\t} else if (i == 'checked') {\n\t\t\t\tchecked = value;\n\t\t\t} else if (\n\t\t\t\t(!isHydrating || typeof value == 'function') &&\n\t\t\t\toldProps[i] !== value\n\t\t\t) {\n\t\t\t\tsetProperty(dom, i, value, oldProps[i], namespace);\n\t\t\t}\n\t\t}\n\n\t\t// If the new vnode didn't have dangerouslySetInnerHTML, diff its children\n\t\tif (newHtml) {\n\t\t\t// Avoid re-applying the same '__html' if it did not changed between re-render\n\t\t\tif (\n\t\t\t\t!isHydrating &&\n\t\t\t\t(!oldHtml ||\n\t\t\t\t\t(newHtml.__html != oldHtml.__html && newHtml.__html != dom.innerHTML))\n\t\t\t) {\n\t\t\t\tdom.innerHTML = newHtml.__html;\n\t\t\t}\n\n\t\t\tnewVNode._children = [];\n\t\t} else {\n\t\t\tif (oldHtml) dom.innerHTML = '';\n\n\t\t\tdiffChildren(\n\t\t\t\t// @ts-expect-error\n\t\t\t\tnewVNode.type == 'template' ? dom.content : dom,\n\t\t\t\tisArray(newChildren) ? newChildren : [newChildren],\n\t\t\t\tnewVNode,\n\t\t\t\toldVNode,\n\t\t\t\tglobalContext,\n\t\t\t\tnodeType == 'foreignObject' ? XHTML_NAMESPACE : namespace,\n\t\t\t\texcessDomChildren,\n\t\t\t\tcommitQueue,\n\t\t\t\texcessDomChildren\n\t\t\t\t\t? excessDomChildren[0]\n\t\t\t\t\t: oldVNode._children && getDomSibling(oldVNode, 0),\n\t\t\t\tisHydrating,\n\t\t\t\trefQueue\n\t\t\t);\n\n\t\t\t// Remove children that are not part of any vnode.\n\t\t\tif (excessDomChildren != NULL) {\n\t\t\t\tfor (i = excessDomChildren.length; i--; ) {\n\t\t\t\t\tremoveNode(excessDomChildren[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// As above, don't diff props during hydration\n\t\tif (!isHydrating) {\n\t\t\ti = 'value';\n\t\t\tif (nodeType == 'progress' && inputValue == NULL) {\n\t\t\t\tdom.removeAttribute('value');\n\t\t\t} else if (\n\t\t\t\tinputValue != UNDEFINED &&\n\t\t\t\t// #2756 For the <progress>-element the initial value is 0,\n\t\t\t\t// despite the attribute not being present. When the attribute\n\t\t\t\t// is missing the progress bar is treated as indeterminate.\n\t\t\t\t// To fix that we'll always update it when it is 0 for progress elements\n\t\t\t\t(inputValue !== dom[i] ||\n\t\t\t\t\t(nodeType == 'progress' && !inputValue) ||\n\t\t\t\t\t// This is only for IE 11 to fix <select> value not being updated.\n\t\t\t\t\t// To avoid a stale select value we need to set the option.value\n\t\t\t\t\t// again, which triggers IE11 to re-evaluate the select value\n\t\t\t\t\t(nodeType == 'option' && inputValue != oldProps[i]))\n\t\t\t) {\n\t\t\t\tsetProperty(dom, i, inputValue, oldProps[i], namespace);\n\t\t\t}\n\n\t\t\ti = 'checked';\n\t\t\tif (checked != UNDEFINED && checked != dom[i]) {\n\t\t\t\tsetProperty(dom, i, checked, oldProps[i], namespace);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn dom;\n}\n\n/**\n * Invoke or update a ref, depending on whether it is a function or object ref.\n * @param {Ref<any> & { _unmount?: unknown }} ref\n * @param {any} value\n * @param {VNode} vnode\n */\nexport function applyRef(ref, value, vnode) {\n\ttry {\n\t\tif (typeof ref == 'function') {\n\t\t\tlet hasRefUnmount = typeof ref._unmount == 'function';\n\t\t\tif (hasRefUnmount) {\n\t\t\t\t// @ts-ignore TS doesn't like moving narrowing checks into variables\n\t\t\t\tref._unmount();\n\t\t\t}\n\n\t\t\tif (!hasRefUnmount || value != NULL) {\n\t\t\t\t// Store the cleanup function on the function\n\t\t\t\t// instance object itself to avoid shape\n\t\t\t\t// transitioning vnode\n\t\t\t\tref._unmount = ref(value);\n\t\t\t}\n\t\t} else ref.current = value;\n\t} catch (e) {\n\t\toptions._catchError(e, vnode);\n\t}\n}\n\n/**\n * Unmount a virtual node from the tree and apply DOM changes\n * @param {VNode} vnode The virtual node to unmount\n * @param {VNode} parentVNode The parent of the VNode that initiated the unmount\n * @param {boolean} [skipRemove] Flag that indicates that a parent node of the\n * current element is already detached from the DOM.\n */\nexport function unmount(vnode, parentVNode, skipRemove) {\n\tlet r;\n\tif (options.unmount) options.unmount(vnode);\n\n\tif ((r = vnode.ref)) {\n\t\tif (!r.current || r.current == vnode._dom) {\n\t\t\tapplyRef(r, NULL, parentVNode);\n\t\t}\n\t}\n\n\tif ((r = vnode._component) != NULL) {\n\t\tif (r.componentWillUnmount) {\n\t\t\ttry {\n\t\t\t\tr.componentWillUnmount();\n\t\t\t} catch (e) {\n\t\t\t\toptions._catchError(e, parentVNode);\n\t\t\t}\n\t\t}\n\n\t\tr.base = r._parentDom = NULL;\n\t}\n\n\tif ((r = vnode._children)) {\n\t\tfor (let i = 0; i < r.length; i++) {\n\t\t\tif (r[i]) {\n\t\t\t\tunmount(\n\t\t\t\t\tr[i],\n\t\t\t\t\tparentVNode,\n\t\t\t\t\tskipRemove || typeof vnode.type != 'function'\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n\n\tif (!skipRemove) {\n\t\tremoveNode(vnode._dom);\n\t}\n\n\tvnode._component = vnode._parent = vnode._dom = UNDEFINED;\n}\n\n/** The `.render()` method for a PFC backing instance. */\nfunction doRender(props, state, context) {\n\treturn this.constructor(props, context);\n}\n", "import { EMPTY_OBJ, NULL } from './constants';\nimport { commitRoot, diff } from './diff/index';\nimport { createElement, Fragment } from './create-element';\nimport options from './options';\nimport { slice } from './util';\n\n/**\n * Render a Preact virtual node into a DOM element\n * @param {import('./internal').ComponentChild} vnode The virtual node to render\n * @param {import('./internal').PreactElement} parentDom The DOM element to render into\n * @param {import('./internal').PreactElement | object} [replaceNode] Optional: Attempt to re-use an\n * existing DOM tree rooted at `replaceNode`\n */\nexport function render(vnode, parentDom, replaceNode) {\n\t// https://github.com/preactjs/preact/issues/3794\n\tif (parentDom == document) {\n\t\tparentDom = document.documentElement;\n\t}\n\n\tif (options._root) options._root(vnode, parentDom);\n\n\t// We abuse the `replaceNode` parameter in `hydrate()` to signal if we are in\n\t// hydration mode or not by passing the `hydrate` function instead of a DOM\n\t// element..\n\tlet isHydrating = typeof replaceNode == 'function';\n\n\t// To be able to support calling `render()` multiple times on the same\n\t// DOM node, we need to obtain a reference to the previous tree. We do\n\t// this by assigning a new `_children` property to DOM nodes which points\n\t// to the last rendered tree. By default this property is not present, which\n\t// means that we are mounting a new tree for the first time.\n\tlet oldVNode = isHydrating\n\t\t? NULL\n\t\t: (replaceNode && replaceNode._children) || parentDom._children;\n\n\tvnode = ((!isHydrating && replaceNode) || parentDom)._children =\n\t\tcreateElement(Fragment, NULL, [vnode]);\n\n\t// List of effects that need to be called after diffing.\n\tlet commitQueue = [],\n\t\trefQueue = [];\n\tdiff(\n\t\tparentDom,\n\t\t// Determine the new vnode tree and store it on the DOM element on\n\t\t// our custom `_children` property.\n\t\tvnode,\n\t\toldVNode || EMPTY_OBJ,\n\t\tEMPTY_OBJ,\n\t\tparentDom.namespaceURI,\n\t\t!isHydrating && replaceNode\n\t\t\t? [replaceNode]\n\t\t\t: oldVNode\n\t\t\t\t? NULL\n\t\t\t\t: parentDom.firstChild\n\t\t\t\t\t? slice.call(parentDom.childNodes)\n\t\t\t\t\t: NULL,\n\t\tcommitQueue,\n\t\t!isHydrating && replaceNode\n\t\t\t? replaceNode\n\t\t\t: oldVNode\n\t\t\t\t? oldVNode._dom\n\t\t\t\t: parentDom.firstChild,\n\t\tisHydrating,\n\t\trefQueue\n\t);\n\n\t// Flush all queued effects\n\tcommitRoot(commitQueue, vnode, refQueue);\n}\n\n/**\n * Update an existing DOM element with data from a Preact virtual node\n * @param {import('./internal').ComponentChild} vnode The virtual node to render\n * @param {import('./internal').PreactElement} parentDom The DOM element to update\n */\nexport function hydrate(vnode, parentDom) {\n\trender(vnode, parentDom, hydrate);\n}\n", "import { assign, slice } from './util';\nimport { createVNode } from './create-element';\nimport { NULL, UNDEFINED } from './constants';\n\n/**\n * Clones the given VNode, optionally adding attributes/props and replacing its\n * children.\n * @param {import('./internal').VNode} vnode The virtual DOM element to clone\n * @param {object} props Attributes/props to add when cloning\n * @param {Array<import('./internal').ComponentChildren>} rest Any additional arguments will be used\n * as replacement children.\n * @returns {import('./internal').VNode}\n */\nexport function cloneElement(vnode, props, children) {\n\tlet normalizedProps = assign({}, vnode.props),\n\t\tkey,\n\t\tref,\n\t\ti;\n\n\tlet defaultProps;\n\n\tif (vnode.type && vnode.type.defaultProps) {\n\t\tdefaultProps = vnode.type.defaultProps;\n\t}\n\n\tfor (i in props) {\n\t\tif (i == 'key') key = props[i];\n\t\telse if (i == 'ref') ref = props[i];\n\t\telse if (props[i] === UNDEFINED && defaultProps != UNDEFINED) {\n\t\t\tnormalizedProps[i] = defaultProps[i];\n\t\t} else {\n\t\t\tnormalizedProps[i] = props[i];\n\t\t}\n\t}\n\n\tif (arguments.length > 2) {\n\t\tnormalizedProps.children =\n\t\t\targuments.length > 3 ? slice.call(arguments, 2) : children;\n\t}\n\n\treturn createVNode(\n\t\tvnode.type,\n\t\tnormalizedProps,\n\t\tkey || vnode.key,\n\t\tref || vnode.ref,\n\t\tNULL\n\t);\n}\n", "import { NULL } from '../constants';\n\n/**\n * Find the closest error boundary to a thrown error and call it\n * @param {object} error The thrown value\n * @param {import('../internal').VNode} vnode The vnode that threw the error that was caught (except\n * for unmounting when this parameter is the highest parent that was being\n * unmounted)\n * @param {import('../internal').VNode} [oldVNode]\n * @param {import('../internal').ErrorInfo} [errorInfo]\n */\nexport function _catchError(error, vnode, oldVNode, errorInfo) {\n\t/** @type {import('../internal').Component} */\n\tlet component,\n\t\t/** @type {import('../internal').ComponentType} */\n\t\tctor,\n\t\t/** @type {boolean} */\n\t\thandled;\n\n\tfor (; (vnode = vnode._parent); ) {\n\t\tif ((component = vnode._component) && !component._processingException) {\n\t\t\ttry {\n\t\t\t\tctor = component.constructor;\n\n\t\t\t\tif (ctor && ctor.getDerivedStateFromError != NULL) {\n\t\t\t\t\tcomponent.setState(ctor.getDerivedStateFromError(error));\n\t\t\t\t\thandled = component._dirty;\n\t\t\t\t}\n\n\t\t\t\tif (component.componentDidCatch != NULL) {\n\t\t\t\t\tcomponent.componentDidCatch(error, errorInfo || {});\n\t\t\t\t\thandled = component._dirty;\n\t\t\t\t}\n\n\t\t\t\t// This is an error boundary. Mark it as having bailed out, and whether it was mid-hydration.\n\t\t\t\tif (handled) {\n\t\t\t\t\treturn (component._pendingError = component);\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\terror = e;\n\t\t\t}\n\t\t}\n\t}\n\n\tthrow error;\n}\n", "(function(root,factory){if(typeof exports===\"object\"&&typeof module===\"object\")module.exports=factory();else if(typeof define===\"function\"&&define.amd)define(\"EventBus\",[],factory);else if(typeof exports===\"object\")exports[\"EventBus\"]=factory();else root[\"EventBus\"]=factory()})(this,function(){var EventBusClass={};EventBusClass=function(){this.listeners={}};EventBusClass.prototype={addEventListener:function(type,callback,scope){var args=[];var numOfArgs=arguments.length;for(var i=0;i<numOfArgs;i++){args.push(arguments[i])}args=args.length>3?args.splice(3,args.length-1):[];if(typeof this.listeners[type]!=\"undefined\"){this.listeners[type].push({scope:scope,callback:callback,args:args})}else{this.listeners[type]=[{scope:scope,callback:callback,args:args}]}},removeEventListener:function(type,callback,scope){if(typeof this.listeners[type]!=\"undefined\"){var numOfCallbacks=this.listeners[type].length;var newArray=[];for(var i=0;i<numOfCallbacks;i++){var listener=this.listeners[type][i];if(listener.scope==scope&&listener.callback==callback){}else{newArray.push(listener)}}this.listeners[type]=newArray}},hasEventListener:function(type,callback,scope){if(typeof this.listeners[type]!=\"undefined\"){var numOfCallbacks=this.listeners[type].length;if(callback===undefined&&scope===undefined){return numOfCallbacks>0}for(var i=0;i<numOfCallbacks;i++){var listener=this.listeners[type][i];if((scope?listener.scope==scope:true)&&listener.callback==callback){return true}}}return false},dispatch:function(type,target){var event={type:type,target:target};var args=[];var numOfArgs=arguments.length;for(var i=0;i<numOfArgs;i++){args.push(arguments[i])}args=args.length>2?args.splice(2,args.length-1):[];args=[event].concat(args);if(typeof this.listeners[type]!=\"undefined\"){var listeners=this.listeners[type].slice();var numOfCallbacks=listeners.length;for(var i=0;i<numOfCallbacks;i++){var listener=listeners[i];if(listener&&listener.callback){var concatArgs=args.concat(listener.args);listener.callback.apply(listener.scope,concatArgs)}}}},getEvents:function(){var str=\"\";for(var type in this.listeners){var numOfCallbacks=this.listeners[type].length;for(var i=0;i<numOfCallbacks;i++){var listener=this.listeners[type][i];str+=listener.scope&&listener.scope.className?listener.scope.className:\"anonymous\";str+=\" listen for '\"+type+\"'\\n\"}}return str}};var EventBus=new EventBusClass;return EventBus});", "/**\n * RegExp to match cookie-name in RFC 6265 sec 4.1.1\n * This refers out to the obsoleted definition of token in RFC 2616 sec 2.2\n * which has been replaced by the token definition in RFC 7230 appendix B.\n *\n * cookie-name       = token\n * token             = 1*tchar\n * tchar             = \"!\" / \"#\" / \"$\" / \"%\" / \"&\" / \"'\" /\n *                     \"*\" / \"+\" / \"-\" / \".\" / \"^\" / \"_\" /\n *                     \"`\" / \"|\" / \"~\" / DIGIT / ALPHA\n *\n * Note: Allowing more characters - https://github.com/jshttp/cookie/issues/191\n * Allow same range as cookie value, except `=`, which delimits end of name.\n */\nconst cookieNameRegExp = /^[\\u0021-\\u003A\\u003C\\u003E-\\u007E]+$/;\n\n/**\n * RegExp to match cookie-value in RFC 6265 sec 4.1.1\n *\n * cookie-value      = *cookie-octet / ( DQUOTE *cookie-octet DQUOTE )\n * cookie-octet      = %x21 / %x23-2B / %x2D-3A / %x3C-5B / %x5D-7E\n *                     ; US-ASCII characters excluding CTLs,\n *                     ; whitespace DQUOTE, comma, semicolon,\n *                     ; and backslash\n *\n * Allowing more characters: https://github.com/jshttp/cookie/issues/191\n * Comma, backslash, and DQUOTE are not part of the parsing algorithm.\n */\nconst cookieValueRegExp = /^[\\u0021-\\u003A\\u003C-\\u007E]*$/;\n\n/**\n * RegExp to match domain-value in RFC 6265 sec 4.1.1\n *\n * domain-value      = <subdomain>\n *                     ; defined in [RFC1034], Section 3.5, as\n *                     ; enhanced by [RFC1123], Section 2.1\n * <subdomain>       = <label> | <subdomain> \".\" <label>\n * <label>           = <let-dig> [ [ <ldh-str> ] <let-dig> ]\n *                     Labels must be 63 characters or less.\n *                     'let-dig' not 'letter' in the first char, per RFC1123\n * <ldh-str>         = <let-dig-hyp> | <let-dig-hyp> <ldh-str>\n * <let-dig-hyp>     = <let-dig> | \"-\"\n * <let-dig>         = <letter> | <digit>\n * <letter>          = any one of the 52 alphabetic characters A through Z in\n *                     upper case and a through z in lower case\n * <digit>           = any one of the ten digits 0 through 9\n *\n * Keep support for leading dot: https://github.com/jshttp/cookie/issues/173\n *\n * > (Note that a leading %x2E (\".\"), if present, is ignored even though that\n * character is not permitted, but a trailing %x2E (\".\"), if present, will\n * cause the user agent to ignore the attribute.)\n */\nconst domainValueRegExp =\n  /^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i;\n\n/**\n * RegExp to match path-value in RFC 6265 sec 4.1.1\n *\n * path-value        = <any CHAR except CTLs or \";\">\n * CHAR              = %x01-7F\n *                     ; defined in RFC 5234 appendix B.1\n */\nconst pathValueRegExp = /^[\\u0020-\\u003A\\u003D-\\u007E]*$/;\n\nconst __toString = Object.prototype.toString;\n\nconst NullObject = /* @__PURE__ */ (() => {\n  const C = function () {};\n  C.prototype = Object.create(null);\n  return C;\n})() as unknown as { new (): any };\n\n/**\n * Parse options.\n */\nexport interface ParseOptions {\n  /**\n   * Specifies a function that will be used to decode a [cookie-value](https://datatracker.ietf.org/doc/html/rfc6265#section-4.1.1).\n   * Since the value of a cookie has a limited character set (and must be a simple string), this function can be used to decode\n   * a previously-encoded cookie value into a JavaScript string.\n   *\n   * The default function is the global `decodeURIComponent`, wrapped in a `try..catch`. If an error\n   * is thrown it will return the cookie's original value. If you provide your own encode/decode\n   * scheme you must ensure errors are appropriately handled.\n   *\n   * @default decode\n   */\n  decode?: (str: string) => string | undefined;\n}\n\n/**\n * Parse a cookie header.\n *\n * Parse the given cookie header string into an object\n * The object has the various cookies as keys(names) => values\n */\nexport function parse(\n  str: string,\n  options?: ParseOptions,\n): Record<string, string | undefined> {\n  const obj: Record<string, string | undefined> = new NullObject();\n  const len = str.length;\n  // RFC 6265 sec 4.1.1, RFC 2616 2.2 defines a cookie name consists of one char minimum, plus '='.\n  if (len < 2) return obj;\n\n  const dec = options?.decode || decode;\n  let index = 0;\n\n  do {\n    const eqIdx = str.indexOf(\"=\", index);\n    if (eqIdx === -1) break; // No more cookie pairs.\n\n    const colonIdx = str.indexOf(\";\", index);\n    const endIdx = colonIdx === -1 ? len : colonIdx;\n\n    if (eqIdx > endIdx) {\n      // backtrack on prior semicolon\n      index = str.lastIndexOf(\";\", eqIdx - 1) + 1;\n      continue;\n    }\n\n    const keyStartIdx = startIndex(str, index, eqIdx);\n    const keyEndIdx = endIndex(str, eqIdx, keyStartIdx);\n    const key = str.slice(keyStartIdx, keyEndIdx);\n\n    // only assign once\n    if (obj[key] === undefined) {\n      let valStartIdx = startIndex(str, eqIdx + 1, endIdx);\n      let valEndIdx = endIndex(str, endIdx, valStartIdx);\n\n      const value = dec(str.slice(valStartIdx, valEndIdx));\n      obj[key] = value;\n    }\n\n    index = endIdx + 1;\n  } while (index < len);\n\n  return obj;\n}\n\nfunction startIndex(str: string, index: number, max: number) {\n  do {\n    const code = str.charCodeAt(index);\n    if (code !== 0x20 /*   */ && code !== 0x09 /* \\t */) return index;\n  } while (++index < max);\n  return max;\n}\n\nfunction endIndex(str: string, index: number, min: number) {\n  while (index > min) {\n    const code = str.charCodeAt(--index);\n    if (code !== 0x20 /*   */ && code !== 0x09 /* \\t */) return index + 1;\n  }\n  return min;\n}\n\n/**\n * Serialize options.\n */\nexport interface SerializeOptions {\n  /**\n   * Specifies a function that will be used to encode a [cookie-value](https://datatracker.ietf.org/doc/html/rfc6265#section-4.1.1).\n   * Since value of a cookie has a limited character set (and must be a simple string), this function can be used to encode\n   * a value into a string suited for a cookie's value, and should mirror `decode` when parsing.\n   *\n   * @default encodeURIComponent\n   */\n  encode?: (str: string) => string;\n  /**\n   * Specifies the `number` (in seconds) to be the value for the [`Max-Age` `Set-Cookie` attribute](https://tools.ietf.org/html/rfc6265#section-5.2.2).\n   *\n   * The [cookie storage model specification](https://tools.ietf.org/html/rfc6265#section-5.3) states that if both `expires` and\n   * `maxAge` are set, then `maxAge` takes precedence, but it is possible not all clients by obey this,\n   * so if both are set, they should point to the same date and time.\n   */\n  maxAge?: number;\n  /**\n   * Specifies the `Date` object to be the value for the [`Expires` `Set-Cookie` attribute](https://tools.ietf.org/html/rfc6265#section-5.2.1).\n   * When no expiration is set clients consider this a \"non-persistent cookie\" and delete it the current session is over.\n   *\n   * The [cookie storage model specification](https://tools.ietf.org/html/rfc6265#section-5.3) states that if both `expires` and\n   * `maxAge` are set, then `maxAge` takes precedence, but it is possible not all clients by obey this,\n   * so if both are set, they should point to the same date and time.\n   */\n  expires?: Date;\n  /**\n   * Specifies the value for the [`Domain` `Set-Cookie` attribute](https://tools.ietf.org/html/rfc6265#section-5.2.3).\n   * When no domain is set clients consider the cookie to apply to the current domain only.\n   */\n  domain?: string;\n  /**\n   * Specifies the value for the [`Path` `Set-Cookie` attribute](https://tools.ietf.org/html/rfc6265#section-5.2.4).\n   * When no path is set, the path is considered the [\"default path\"](https://tools.ietf.org/html/rfc6265#section-5.1.4).\n   */\n  path?: string;\n  /**\n   * Enables the [`HttpOnly` `Set-Cookie` attribute](https://tools.ietf.org/html/rfc6265#section-5.2.6).\n   * When enabled, clients will not allow client-side JavaScript to see the cookie in `document.cookie`.\n   */\n  httpOnly?: boolean;\n  /**\n   * Enables the [`Secure` `Set-Cookie` attribute](https://tools.ietf.org/html/rfc6265#section-5.2.5).\n   * When enabled, clients will only send the cookie back if the browser has a HTTPS connection.\n   */\n  secure?: boolean;\n  /**\n   * Enables the [`Partitioned` `Set-Cookie` attribute](https://tools.ietf.org/html/draft-cutler-httpbis-partitioned-cookies/).\n   * When enabled, clients will only send the cookie back when the current domain _and_ top-level domain matches.\n   *\n   * This is an attribute that has not yet been fully standardized, and may change in the future.\n   * This also means clients may ignore this attribute until they understand it. More information\n   * about can be found in [the proposal](https://github.com/privacycg/CHIPS).\n   */\n  partitioned?: boolean;\n  /**\n   * Specifies the value for the [`Priority` `Set-Cookie` attribute](https://tools.ietf.org/html/draft-west-cookie-priority-00#section-4.1).\n   *\n   * - `'low'` will set the `Priority` attribute to `Low`.\n   * - `'medium'` will set the `Priority` attribute to `Medium`, the default priority when not set.\n   * - `'high'` will set the `Priority` attribute to `High`.\n   *\n   * More information about priority levels can be found in [the specification](https://tools.ietf.org/html/draft-west-cookie-priority-00#section-4.1).\n   */\n  priority?: \"low\" | \"medium\" | \"high\";\n  /**\n   * Specifies the value for the [`SameSite` `Set-Cookie` attribute](https://tools.ietf.org/html/draft-ietf-httpbis-rfc6265bis-09#section-5.4.7).\n   *\n   * - `true` will set the `SameSite` attribute to `Strict` for strict same site enforcement.\n   * - `'lax'` will set the `SameSite` attribute to `Lax` for lax same site enforcement.\n   * - `'none'` will set the `SameSite` attribute to `None` for an explicit cross-site cookie.\n   * - `'strict'` will set the `SameSite` attribute to `Strict` for strict same site enforcement.\n   *\n   * More information about enforcement levels can be found in [the specification](https://tools.ietf.org/html/draft-ietf-httpbis-rfc6265bis-09#section-5.4.7).\n   */\n  sameSite?: boolean | \"lax\" | \"strict\" | \"none\";\n}\n\n/**\n * Serialize data into a cookie header.\n *\n * Serialize a name value pair into a cookie string suitable for\n * http headers. An optional options object specifies cookie parameters.\n *\n * serialize('foo', 'bar', { httpOnly: true })\n *   => \"foo=bar; httpOnly\"\n */\nexport function serialize(\n  name: string,\n  val: string,\n  options?: SerializeOptions,\n): string {\n  const enc = options?.encode || encodeURIComponent;\n\n  if (!cookieNameRegExp.test(name)) {\n    throw new TypeError(`argument name is invalid: ${name}`);\n  }\n\n  const value = enc(val);\n\n  if (!cookieValueRegExp.test(value)) {\n    throw new TypeError(`argument val is invalid: ${val}`);\n  }\n\n  let str = name + \"=\" + value;\n  if (!options) return str;\n\n  if (options.maxAge !== undefined) {\n    if (!Number.isInteger(options.maxAge)) {\n      throw new TypeError(`option maxAge is invalid: ${options.maxAge}`);\n    }\n\n    str += \"; Max-Age=\" + options.maxAge;\n  }\n\n  if (options.domain) {\n    if (!domainValueRegExp.test(options.domain)) {\n      throw new TypeError(`option domain is invalid: ${options.domain}`);\n    }\n\n    str += \"; Domain=\" + options.domain;\n  }\n\n  if (options.path) {\n    if (!pathValueRegExp.test(options.path)) {\n      throw new TypeError(`option path is invalid: ${options.path}`);\n    }\n\n    str += \"; Path=\" + options.path;\n  }\n\n  if (options.expires) {\n    if (\n      !isDate(options.expires) ||\n      !Number.isFinite(options.expires.valueOf())\n    ) {\n      throw new TypeError(`option expires is invalid: ${options.expires}`);\n    }\n\n    str += \"; Expires=\" + options.expires.toUTCString();\n  }\n\n  if (options.httpOnly) {\n    str += \"; HttpOnly\";\n  }\n\n  if (options.secure) {\n    str += \"; Secure\";\n  }\n\n  if (options.partitioned) {\n    str += \"; Partitioned\";\n  }\n\n  if (options.priority) {\n    const priority =\n      typeof options.priority === \"string\"\n        ? options.priority.toLowerCase()\n        : undefined;\n    switch (priority) {\n      case \"low\":\n        str += \"; Priority=Low\";\n        break;\n      case \"medium\":\n        str += \"; Priority=Medium\";\n        break;\n      case \"high\":\n        str += \"; Priority=High\";\n        break;\n      default:\n        throw new TypeError(`option priority is invalid: ${options.priority}`);\n    }\n  }\n\n  if (options.sameSite) {\n    const sameSite =\n      typeof options.sameSite === \"string\"\n        ? options.sameSite.toLowerCase()\n        : options.sameSite;\n    switch (sameSite) {\n      case true:\n      case \"strict\":\n        str += \"; SameSite=Strict\";\n        break;\n      case \"lax\":\n        str += \"; SameSite=Lax\";\n        break;\n      case \"none\":\n        str += \"; SameSite=None\";\n        break;\n      default:\n        throw new TypeError(`option sameSite is invalid: ${options.sameSite}`);\n    }\n  }\n\n  return str;\n}\n\n/**\n * URL-decode string value. Optimized to skip native call when no %.\n */\nfunction decode(str: string): string {\n  if (str.indexOf(\"%\") === -1) return str;\n\n  try {\n    return decodeURIComponent(str);\n  } catch (e) {\n    return str;\n  }\n}\n\n/**\n * Determine if value is a Date.\n */\nfunction isDate(val: any): val is Date {\n  return __toString.call(val) === \"[object Date]\";\n}\n", "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\nexports.hasCookies = hasCookies;\nvar cookie = _interopRequireWildcard(require(\"cookie\"));\nfunction _getRequireWildcardCache(e) { if (\"function\" != typeof WeakMap) return null; var r = new WeakMap(), t = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(e) { return e ? t : r; })(e); }\nfunction _interopRequireWildcard(e, r) { if (!r && e && e.__esModule) return e; if (null === e || \"object\" != _typeof(e) && \"function\" != typeof e) return { \"default\": e }; var t = _getRequireWildcardCache(r); if (t && t.has(e)) return t.get(e); var n = { __proto__: null }, a = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var u in e) if (\"default\" !== u && {}.hasOwnProperty.call(e, u)) { var i = a ? Object.getOwnPropertyDescriptor(e, u) : null; i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u]; } return n[\"default\"] = e, t && t.set(e, n), n; }\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nvar prefix = \"lS_\";\nvar CookieStorage = exports[\"default\"] = /*#__PURE__*/function () {\n  function CookieStorage() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    _classCallCheck(this, CookieStorage);\n    this.cookieOptions = Object.assign({\n      path: \"/\"\n    }, options);\n    prefix = options.prefix === undefined ? prefix : options.prefix;\n  }\n  return _createClass(CookieStorage, [{\n    key: \"getItem\",\n    value: function getItem(key) {\n      var cookies = cookie.parse(document.cookie);\n      if (!cookies || !cookies[prefix + key]) {\n        return null;\n      }\n      return cookies[prefix + key];\n    }\n  }, {\n    key: \"setItem\",\n    value: function setItem(key, value) {\n      document.cookie = cookie.serialize(prefix + key, value, this.cookieOptions);\n      return value;\n    }\n  }, {\n    key: \"removeItem\",\n    value: function removeItem(key) {\n      var options = Object.assign({}, this.cookieOptions, {\n        maxAge: -1\n      });\n      document.cookie = cookie.serialize(prefix + key, \"\", options);\n      return null;\n    }\n  }, {\n    key: \"clear\",\n    value: function clear() {\n      var cookies = cookie.parse(document.cookie);\n      for (var key in cookies) {\n        if (key.indexOf(prefix) === 0) {\n          this.removeItem(key.substr(prefix.length));\n        }\n      }\n      return null;\n    }\n  }]);\n}();\nfunction hasCookies() {\n  var storage = new CookieStorage();\n  try {\n    var TEST_KEY = \"__test\";\n    storage.setItem(TEST_KEY, \"1\");\n    var value = storage.getItem(TEST_KEY);\n    storage.removeItem(TEST_KEY);\n    return value === \"1\";\n  } catch (e) {\n    return false;\n  }\n}", "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = isSupported;\nvar _CookieStorage = require(\"./CookieStorage\");\nvar TEST_KEY = \"__test\";\nfunction hasStorage(name) {\n  try {\n    var storage = window[name];\n    storage.setItem(TEST_KEY, \"1\");\n    storage.removeItem(TEST_KEY);\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\nfunction isSupported() {\n  var name = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"localStorage\";\n  var storage = String(name).replace(/storage$/i, \"\").toLowerCase();\n  if (storage === \"local\") {\n    return hasStorage(\"localStorage\");\n  }\n  if (storage === \"session\") {\n    return hasStorage(\"sessionStorage\");\n  }\n  if (storage === \"cookie\") {\n    return (0, _CookieStorage.hasCookies)();\n  }\n  if (storage === \"memory\") {\n    return true;\n  }\n  throw new Error(\"Storage method `\".concat(name, \"` is not available.\\n    Please use one of the following: localStorage, sessionStorage, cookieStorage, memoryStorage.\"));\n}", "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nvar MemoryStorage = exports[\"default\"] = /*#__PURE__*/function () {\n  function MemoryStorage() {\n    _classCallCheck(this, MemoryStorage);\n    this._data = {};\n  }\n  return _createClass(MemoryStorage, [{\n    key: \"getItem\",\n    value: function getItem(key) {\n      return this._data.hasOwnProperty(key) ? this._data[key] : null;\n    }\n  }, {\n    key: \"setItem\",\n    value: function setItem(key, value) {\n      return this._data[key] = String(value);\n    }\n  }, {\n    key: \"removeItem\",\n    value: function removeItem(key) {\n      return delete this._data[key];\n    }\n  }, {\n    key: \"clear\",\n    value: function clear() {\n      return this._data = {};\n    }\n  }]);\n}();", "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"CookieStorage\", {\n  enumerable: true,\n  get: function get() {\n    return _CookieStorage[\"default\"];\n  }\n});\nObject.defineProperty(exports, \"MemoryStorage\", {\n  enumerable: true,\n  get: function get() {\n    return _MemoryStorage[\"default\"];\n  }\n});\nexports[\"default\"] = void 0;\nObject.defineProperty(exports, \"isSupported\", {\n  enumerable: true,\n  get: function get() {\n    return _isSupported[\"default\"];\n  }\n});\nexports.storage = void 0;\nvar _isSupported = _interopRequireDefault(require(\"./isSupported\"));\nvar _CookieStorage = _interopRequireDefault(require(\"./CookieStorage\"));\nvar _MemoryStorage = _interopRequireDefault(require(\"./MemoryStorage\"));\nfunction _interopRequireDefault(e) { return e && e.__esModule ? e : { \"default\": e }; }\nvar storage = exports.storage = null;\nif ((0, _isSupported[\"default\"])(\"localStorage\")) {\n  // use localStorage\n  exports.storage = storage = window.localStorage;\n} else if ((0, _isSupported[\"default\"])(\"sessionStorage\")) {\n  // use sessionStorage\n  exports.storage = storage = window.sessionStorage;\n} else if ((0, _isSupported[\"default\"])(\"cookieStorage\")) {\n  // use cookies\n  exports.storage = storage = new _CookieStorage[\"default\"]();\n} else {\n  // use memory\n  exports.storage = storage = new _MemoryStorage[\"default\"]();\n}\nvar _default = exports[\"default\"] = storage;", "// A port of an algorithm by Johannes Baag\u00F8e <baagoe@baagoe.com>, 2010\n// http://baagoe.com/en/RandomMusings/javascript/\n// https://github.com/nquinlan/better-random-numbers-for-javascript-mirror\n// Original work is under MIT license -\n\n// Copyright (C) 2010 by Johannes Baag\u00F8e <baagoe@baagoe.org>\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\n\n\n(function(global, module, define) {\n\nfunction Alea(seed) {\n  var me = this, mash = Mash();\n\n  me.next = function() {\n    var t = 2091639 * me.s0 + me.c * 2.3283064365386963e-10; // 2^-32\n    me.s0 = me.s1;\n    me.s1 = me.s2;\n    return me.s2 = t - (me.c = t | 0);\n  };\n\n  // Apply the seeding algorithm from Baagoe.\n  me.c = 1;\n  me.s0 = mash(' ');\n  me.s1 = mash(' ');\n  me.s2 = mash(' ');\n  me.s0 -= mash(seed);\n  if (me.s0 < 0) { me.s0 += 1; }\n  me.s1 -= mash(seed);\n  if (me.s1 < 0) { me.s1 += 1; }\n  me.s2 -= mash(seed);\n  if (me.s2 < 0) { me.s2 += 1; }\n  mash = null;\n}\n\nfunction copy(f, t) {\n  t.c = f.c;\n  t.s0 = f.s0;\n  t.s1 = f.s1;\n  t.s2 = f.s2;\n  return t;\n}\n\nfunction impl(seed, opts) {\n  var xg = new Alea(seed),\n      state = opts && opts.state,\n      prng = xg.next;\n  prng.int32 = function() { return (xg.next() * 0x100000000) | 0; }\n  prng.double = function() {\n    return prng() + (prng() * 0x200000 | 0) * 1.1102230246251565e-16; // 2^-53\n  };\n  prng.quick = prng;\n  if (state) {\n    if (typeof(state) == 'object') copy(state, xg);\n    prng.state = function() { return copy(xg, {}); }\n  }\n  return prng;\n}\n\nfunction Mash() {\n  var n = 0xefc8249d;\n\n  var mash = function(data) {\n    data = String(data);\n    for (var i = 0; i < data.length; i++) {\n      n += data.charCodeAt(i);\n      var h = 0.02519603282416938 * n;\n      n = h >>> 0;\n      h -= n;\n      h *= n;\n      n = h >>> 0;\n      h -= n;\n      n += h * 0x100000000; // 2^32\n    }\n    return (n >>> 0) * 2.3283064365386963e-10; // 2^-32\n  };\n\n  return mash;\n}\n\n\nif (module && module.exports) {\n  module.exports = impl;\n} else if (define && define.amd) {\n  define(function() { return impl; });\n} else {\n  this.alea = impl;\n}\n\n})(\n  this,\n  (typeof module) == 'object' && module,    // present in node.js\n  (typeof define) == 'function' && define   // present with an AMD loader\n);\n\n\n", "// A Javascript implementaion of the \"xor128\" prng algorithm by\n// George Marsaglia.  See http://www.jstatsoft.org/v08/i14/paper\n\n(function(global, module, define) {\n\nfunction XorGen(seed) {\n  var me = this, strseed = '';\n\n  me.x = 0;\n  me.y = 0;\n  me.z = 0;\n  me.w = 0;\n\n  // Set up generator function.\n  me.next = function() {\n    var t = me.x ^ (me.x << 11);\n    me.x = me.y;\n    me.y = me.z;\n    me.z = me.w;\n    return me.w ^= (me.w >>> 19) ^ t ^ (t >>> 8);\n  };\n\n  if (seed === (seed | 0)) {\n    // Integer seed.\n    me.x = seed;\n  } else {\n    // String seed.\n    strseed += seed;\n  }\n\n  // Mix in string seed, then discard an initial batch of 64 values.\n  for (var k = 0; k < strseed.length + 64; k++) {\n    me.x ^= strseed.charCodeAt(k) | 0;\n    me.next();\n  }\n}\n\nfunction copy(f, t) {\n  t.x = f.x;\n  t.y = f.y;\n  t.z = f.z;\n  t.w = f.w;\n  return t;\n}\n\nfunction impl(seed, opts) {\n  var xg = new XorGen(seed),\n      state = opts && opts.state,\n      prng = function() { return (xg.next() >>> 0) / 0x100000000; };\n  prng.double = function() {\n    do {\n      var top = xg.next() >>> 11,\n          bot = (xg.next() >>> 0) / 0x100000000,\n          result = (top + bot) / (1 << 21);\n    } while (result === 0);\n    return result;\n  };\n  prng.int32 = xg.next;\n  prng.quick = prng;\n  if (state) {\n    if (typeof(state) == 'object') copy(state, xg);\n    prng.state = function() { return copy(xg, {}); }\n  }\n  return prng;\n}\n\nif (module && module.exports) {\n  module.exports = impl;\n} else if (define && define.amd) {\n  define(function() { return impl; });\n} else {\n  this.xor128 = impl;\n}\n\n})(\n  this,\n  (typeof module) == 'object' && module,    // present in node.js\n  (typeof define) == 'function' && define   // present with an AMD loader\n);\n\n\n", "// A Javascript implementaion of the \"xorwow\" prng algorithm by\n// George Marsaglia.  See http://www.jstatsoft.org/v08/i14/paper\n\n(function(global, module, define) {\n\nfunction XorGen(seed) {\n  var me = this, strseed = '';\n\n  // Set up generator function.\n  me.next = function() {\n    var t = (me.x ^ (me.x >>> 2));\n    me.x = me.y; me.y = me.z; me.z = me.w; me.w = me.v;\n    return (me.d = (me.d + 362437 | 0)) +\n       (me.v = (me.v ^ (me.v << 4)) ^ (t ^ (t << 1))) | 0;\n  };\n\n  me.x = 0;\n  me.y = 0;\n  me.z = 0;\n  me.w = 0;\n  me.v = 0;\n\n  if (seed === (seed | 0)) {\n    // Integer seed.\n    me.x = seed;\n  } else {\n    // String seed.\n    strseed += seed;\n  }\n\n  // Mix in string seed, then discard an initial batch of 64 values.\n  for (var k = 0; k < strseed.length + 64; k++) {\n    me.x ^= strseed.charCodeAt(k) | 0;\n    if (k == strseed.length) {\n      me.d = me.x << 10 ^ me.x >>> 4;\n    }\n    me.next();\n  }\n}\n\nfunction copy(f, t) {\n  t.x = f.x;\n  t.y = f.y;\n  t.z = f.z;\n  t.w = f.w;\n  t.v = f.v;\n  t.d = f.d;\n  return t;\n}\n\nfunction impl(seed, opts) {\n  var xg = new XorGen(seed),\n      state = opts && opts.state,\n      prng = function() { return (xg.next() >>> 0) / 0x100000000; };\n  prng.double = function() {\n    do {\n      var top = xg.next() >>> 11,\n          bot = (xg.next() >>> 0) / 0x100000000,\n          result = (top + bot) / (1 << 21);\n    } while (result === 0);\n    return result;\n  };\n  prng.int32 = xg.next;\n  prng.quick = prng;\n  if (state) {\n    if (typeof(state) == 'object') copy(state, xg);\n    prng.state = function() { return copy(xg, {}); }\n  }\n  return prng;\n}\n\nif (module && module.exports) {\n  module.exports = impl;\n} else if (define && define.amd) {\n  define(function() { return impl; });\n} else {\n  this.xorwow = impl;\n}\n\n})(\n  this,\n  (typeof module) == 'object' && module,    // present in node.js\n  (typeof define) == 'function' && define   // present with an AMD loader\n);\n\n\n", "// A Javascript implementaion of the \"xorshift7\" algorithm by\n// Fran\u00E7ois Panneton and Pierre L'ecuyer:\n// \"On the Xorgshift Random Number Generators\"\n// http://saluc.engr.uconn.edu/refs/crypto/rng/panneton05onthexorshift.pdf\n\n(function(global, module, define) {\n\nfunction XorGen(seed) {\n  var me = this;\n\n  // Set up generator function.\n  me.next = function() {\n    // Update xor generator.\n    var X = me.x, i = me.i, t, v, w;\n    t = X[i]; t ^= (t >>> 7); v = t ^ (t << 24);\n    t = X[(i + 1) & 7]; v ^= t ^ (t >>> 10);\n    t = X[(i + 3) & 7]; v ^= t ^ (t >>> 3);\n    t = X[(i + 4) & 7]; v ^= t ^ (t << 7);\n    t = X[(i + 7) & 7]; t = t ^ (t << 13); v ^= t ^ (t << 9);\n    X[i] = v;\n    me.i = (i + 1) & 7;\n    return v;\n  };\n\n  function init(me, seed) {\n    var j, w, X = [];\n\n    if (seed === (seed | 0)) {\n      // Seed state array using a 32-bit integer.\n      w = X[0] = seed;\n    } else {\n      // Seed state using a string.\n      seed = '' + seed;\n      for (j = 0; j < seed.length; ++j) {\n        X[j & 7] = (X[j & 7] << 15) ^\n            (seed.charCodeAt(j) + X[(j + 1) & 7] << 13);\n      }\n    }\n    // Enforce an array length of 8, not all zeroes.\n    while (X.length < 8) X.push(0);\n    for (j = 0; j < 8 && X[j] === 0; ++j);\n    if (j == 8) w = X[7] = -1; else w = X[j];\n\n    me.x = X;\n    me.i = 0;\n\n    // Discard an initial 256 values.\n    for (j = 256; j > 0; --j) {\n      me.next();\n    }\n  }\n\n  init(me, seed);\n}\n\nfunction copy(f, t) {\n  t.x = f.x.slice();\n  t.i = f.i;\n  return t;\n}\n\nfunction impl(seed, opts) {\n  if (seed == null) seed = +(new Date);\n  var xg = new XorGen(seed),\n      state = opts && opts.state,\n      prng = function() { return (xg.next() >>> 0) / 0x100000000; };\n  prng.double = function() {\n    do {\n      var top = xg.next() >>> 11,\n          bot = (xg.next() >>> 0) / 0x100000000,\n          result = (top + bot) / (1 << 21);\n    } while (result === 0);\n    return result;\n  };\n  prng.int32 = xg.next;\n  prng.quick = prng;\n  if (state) {\n    if (state.x) copy(state, xg);\n    prng.state = function() { return copy(xg, {}); }\n  }\n  return prng;\n}\n\nif (module && module.exports) {\n  module.exports = impl;\n} else if (define && define.amd) {\n  define(function() { return impl; });\n} else {\n  this.xorshift7 = impl;\n}\n\n})(\n  this,\n  (typeof module) == 'object' && module,    // present in node.js\n  (typeof define) == 'function' && define   // present with an AMD loader\n);\n\n", "// A Javascript implementaion of Richard Brent's Xorgens xor4096 algorithm.\n//\n// This fast non-cryptographic random number generator is designed for\n// use in Monte-Carlo algorithms. It combines a long-period xorshift\n// generator with a Weyl generator, and it passes all common batteries\n// of stasticial tests for randomness while consuming only a few nanoseconds\n// for each prng generated.  For background on the generator, see Brent's\n// paper: \"Some long-period random number generators using shifts and xors.\"\n// http://arxiv.org/pdf/1004.3115v1.pdf\n//\n// Usage:\n//\n// var xor4096 = require('xor4096');\n// random = xor4096(1);                        // Seed with int32 or string.\n// assert.equal(random(), 0.1520436450538547); // (0, 1) range, 53 bits.\n// assert.equal(random.int32(), 1806534897);   // signed int32, 32 bits.\n//\n// For nonzero numeric keys, this impelementation provides a sequence\n// identical to that by Brent's xorgens 3 implementaion in C.  This\n// implementation also provides for initalizing the generator with\n// string seeds, or for saving and restoring the state of the generator.\n//\n// On Chrome, this prng benchmarks about 2.1 times slower than\n// Javascript's built-in Math.random().\n\n(function(global, module, define) {\n\nfunction XorGen(seed) {\n  var me = this;\n\n  // Set up generator function.\n  me.next = function() {\n    var w = me.w,\n        X = me.X, i = me.i, t, v;\n    // Update Weyl generator.\n    me.w = w = (w + 0x61c88647) | 0;\n    // Update xor generator.\n    v = X[(i + 34) & 127];\n    t = X[i = ((i + 1) & 127)];\n    v ^= v << 13;\n    t ^= t << 17;\n    v ^= v >>> 15;\n    t ^= t >>> 12;\n    // Update Xor generator array state.\n    v = X[i] = v ^ t;\n    me.i = i;\n    // Result is the combination.\n    return (v + (w ^ (w >>> 16))) | 0;\n  };\n\n  function init(me, seed) {\n    var t, v, i, j, w, X = [], limit = 128;\n    if (seed === (seed | 0)) {\n      // Numeric seeds initialize v, which is used to generates X.\n      v = seed;\n      seed = null;\n    } else {\n      // String seeds are mixed into v and X one character at a time.\n      seed = seed + '\\0';\n      v = 0;\n      limit = Math.max(limit, seed.length);\n    }\n    // Initialize circular array and weyl value.\n    for (i = 0, j = -32; j < limit; ++j) {\n      // Put the unicode characters into the array, and shuffle them.\n      if (seed) v ^= seed.charCodeAt((j + 32) % seed.length);\n      // After 32 shuffles, take v as the starting w value.\n      if (j === 0) w = v;\n      v ^= v << 10;\n      v ^= v >>> 15;\n      v ^= v << 4;\n      v ^= v >>> 13;\n      if (j >= 0) {\n        w = (w + 0x61c88647) | 0;     // Weyl.\n        t = (X[j & 127] ^= (v + w));  // Combine xor and weyl to init array.\n        i = (0 == t) ? i + 1 : 0;     // Count zeroes.\n      }\n    }\n    // We have detected all zeroes; make the key nonzero.\n    if (i >= 128) {\n      X[(seed && seed.length || 0) & 127] = -1;\n    }\n    // Run the generator 512 times to further mix the state before using it.\n    // Factoring this as a function slows the main generator, so it is just\n    // unrolled here.  The weyl generator is not advanced while warming up.\n    i = 127;\n    for (j = 4 * 128; j > 0; --j) {\n      v = X[(i + 34) & 127];\n      t = X[i = ((i + 1) & 127)];\n      v ^= v << 13;\n      t ^= t << 17;\n      v ^= v >>> 15;\n      t ^= t >>> 12;\n      X[i] = v ^ t;\n    }\n    // Storing state as object members is faster than using closure variables.\n    me.w = w;\n    me.X = X;\n    me.i = i;\n  }\n\n  init(me, seed);\n}\n\nfunction copy(f, t) {\n  t.i = f.i;\n  t.w = f.w;\n  t.X = f.X.slice();\n  return t;\n};\n\nfunction impl(seed, opts) {\n  if (seed == null) seed = +(new Date);\n  var xg = new XorGen(seed),\n      state = opts && opts.state,\n      prng = function() { return (xg.next() >>> 0) / 0x100000000; };\n  prng.double = function() {\n    do {\n      var top = xg.next() >>> 11,\n          bot = (xg.next() >>> 0) / 0x100000000,\n          result = (top + bot) / (1 << 21);\n    } while (result === 0);\n    return result;\n  };\n  prng.int32 = xg.next;\n  prng.quick = prng;\n  if (state) {\n    if (state.X) copy(state, xg);\n    prng.state = function() { return copy(xg, {}); }\n  }\n  return prng;\n}\n\nif (module && module.exports) {\n  module.exports = impl;\n} else if (define && define.amd) {\n  define(function() { return impl; });\n} else {\n  this.xor4096 = impl;\n}\n\n})(\n  this,                                     // window object or global\n  (typeof module) == 'object' && module,    // present in node.js\n  (typeof define) == 'function' && define   // present with an AMD loader\n);\n", "// A Javascript implementaion of the \"Tyche-i\" prng algorithm by\n// Samuel Neves and Filipe Araujo.\n// See https://eden.dei.uc.pt/~sneves/pubs/2011-snfa2.pdf\n\n(function(global, module, define) {\n\nfunction XorGen(seed) {\n  var me = this, strseed = '';\n\n  // Set up generator function.\n  me.next = function() {\n    var b = me.b, c = me.c, d = me.d, a = me.a;\n    b = (b << 25) ^ (b >>> 7) ^ c;\n    c = (c - d) | 0;\n    d = (d << 24) ^ (d >>> 8) ^ a;\n    a = (a - b) | 0;\n    me.b = b = (b << 20) ^ (b >>> 12) ^ c;\n    me.c = c = (c - d) | 0;\n    me.d = (d << 16) ^ (c >>> 16) ^ a;\n    return me.a = (a - b) | 0;\n  };\n\n  /* The following is non-inverted tyche, which has better internal\n   * bit diffusion, but which is about 25% slower than tyche-i in JS.\n  me.next = function() {\n    var a = me.a, b = me.b, c = me.c, d = me.d;\n    a = (me.a + me.b | 0) >>> 0;\n    d = me.d ^ a; d = d << 16 ^ d >>> 16;\n    c = me.c + d | 0;\n    b = me.b ^ c; b = b << 12 ^ d >>> 20;\n    me.a = a = a + b | 0;\n    d = d ^ a; me.d = d = d << 8 ^ d >>> 24;\n    me.c = c = c + d | 0;\n    b = b ^ c;\n    return me.b = (b << 7 ^ b >>> 25);\n  }\n  */\n\n  me.a = 0;\n  me.b = 0;\n  me.c = 2654435769 | 0;\n  me.d = 1367130551;\n\n  if (seed === Math.floor(seed)) {\n    // Integer seed.\n    me.a = (seed / 0x100000000) | 0;\n    me.b = seed | 0;\n  } else {\n    // String seed.\n    strseed += seed;\n  }\n\n  // Mix in string seed, then discard an initial batch of 64 values.\n  for (var k = 0; k < strseed.length + 20; k++) {\n    me.b ^= strseed.charCodeAt(k) | 0;\n    me.next();\n  }\n}\n\nfunction copy(f, t) {\n  t.a = f.a;\n  t.b = f.b;\n  t.c = f.c;\n  t.d = f.d;\n  return t;\n};\n\nfunction impl(seed, opts) {\n  var xg = new XorGen(seed),\n      state = opts && opts.state,\n      prng = function() { return (xg.next() >>> 0) / 0x100000000; };\n  prng.double = function() {\n    do {\n      var top = xg.next() >>> 11,\n          bot = (xg.next() >>> 0) / 0x100000000,\n          result = (top + bot) / (1 << 21);\n    } while (result === 0);\n    return result;\n  };\n  prng.int32 = xg.next;\n  prng.quick = prng;\n  if (state) {\n    if (typeof(state) == 'object') copy(state, xg);\n    prng.state = function() { return copy(xg, {}); }\n  }\n  return prng;\n}\n\nif (module && module.exports) {\n  module.exports = impl;\n} else if (define && define.amd) {\n  define(function() { return impl; });\n} else {\n  this.tychei = impl;\n}\n\n})(\n  this,\n  (typeof module) == 'object' && module,    // present in node.js\n  (typeof define) == 'function' && define   // present with an AMD loader\n);\n\n\n", "/*\nCopyright 2019 David Bau.\n\nPermission is hereby granted, free of charge, to any person obtaining\na copy of this software and associated documentation files (the\n\"Software\"), to deal in the Software without restriction, including\nwithout limitation the rights to use, copy, modify, merge, publish,\ndistribute, sublicense, and/or sell copies of the Software, and to\npermit persons to whom the Software is furnished to do so, subject to\nthe following conditions:\n\nThe above copyright notice and this permission notice shall be\nincluded in all copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\nEXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\nMERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.\nIN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY\nCLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,\nTORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\nSOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n*/\n\n(function (global, pool, math) {\n//\n// The following constants are related to IEEE 754 limits.\n//\n\nvar width = 256,        // each RC4 output is 0 <= x < 256\n    chunks = 6,         // at least six RC4 outputs for each double\n    digits = 52,        // there are 52 significant digits in a double\n    rngname = 'random', // rngname: name for Math.random and Math.seedrandom\n    startdenom = math.pow(width, chunks),\n    significance = math.pow(2, digits),\n    overflow = significance * 2,\n    mask = width - 1,\n    nodecrypto;         // node.js crypto module, initialized at the bottom.\n\n//\n// seedrandom()\n// This is the seedrandom function described above.\n//\nfunction seedrandom(seed, options, callback) {\n  var key = [];\n  options = (options == true) ? { entropy: true } : (options || {});\n\n  // Flatten the seed string or build one from local entropy if needed.\n  var shortseed = mixkey(flatten(\n    options.entropy ? [seed, tostring(pool)] :\n    (seed == null) ? autoseed() : seed, 3), key);\n\n  // Use the seed to initialize an ARC4 generator.\n  var arc4 = new ARC4(key);\n\n  // This function returns a random double in [0, 1) that contains\n  // randomness in every bit of the mantissa of the IEEE 754 value.\n  var prng = function() {\n    var n = arc4.g(chunks),             // Start with a numerator n < 2 ^ 48\n        d = startdenom,                 //   and denominator d = 2 ^ 48.\n        x = 0;                          //   and no 'extra last byte'.\n    while (n < significance) {          // Fill up all significant digits by\n      n = (n + x) * width;              //   shifting numerator and\n      d *= width;                       //   denominator and generating a\n      x = arc4.g(1);                    //   new least-significant-byte.\n    }\n    while (n >= overflow) {             // To avoid rounding up, before adding\n      n /= 2;                           //   last byte, shift everything\n      d /= 2;                           //   right using integer math until\n      x >>>= 1;                         //   we have exactly the desired bits.\n    }\n    return (n + x) / d;                 // Form the number within [0, 1).\n  };\n\n  prng.int32 = function() { return arc4.g(4) | 0; }\n  prng.quick = function() { return arc4.g(4) / 0x100000000; }\n  prng.double = prng;\n\n  // Mix the randomness into accumulated entropy.\n  mixkey(tostring(arc4.S), pool);\n\n  // Calling convention: what to return as a function of prng, seed, is_math.\n  return (options.pass || callback ||\n      function(prng, seed, is_math_call, state) {\n        if (state) {\n          // Load the arc4 state from the given state if it has an S array.\n          if (state.S) { copy(state, arc4); }\n          // Only provide the .state method if requested via options.state.\n          prng.state = function() { return copy(arc4, {}); }\n        }\n\n        // If called as a method of Math (Math.seedrandom()), mutate\n        // Math.random because that is how seedrandom.js has worked since v1.0.\n        if (is_math_call) { math[rngname] = prng; return seed; }\n\n        // Otherwise, it is a newer calling convention, so return the\n        // prng directly.\n        else return prng;\n      })(\n  prng,\n  shortseed,\n  'global' in options ? options.global : (this == math),\n  options.state);\n}\n\n//\n// ARC4\n//\n// An ARC4 implementation.  The constructor takes a key in the form of\n// an array of at most (width) integers that should be 0 <= x < (width).\n//\n// The g(count) method returns a pseudorandom integer that concatenates\n// the next (count) outputs from ARC4.  Its return value is a number x\n// that is in the range 0 <= x < (width ^ count).\n//\nfunction ARC4(key) {\n  var t, keylen = key.length,\n      me = this, i = 0, j = me.i = me.j = 0, s = me.S = [];\n\n  // The empty key [] is treated as [0].\n  if (!keylen) { key = [keylen++]; }\n\n  // Set up S using the standard key scheduling algorithm.\n  while (i < width) {\n    s[i] = i++;\n  }\n  for (i = 0; i < width; i++) {\n    s[i] = s[j = mask & (j + key[i % keylen] + (t = s[i]))];\n    s[j] = t;\n  }\n\n  // The \"g\" method returns the next (count) outputs as one number.\n  (me.g = function(count) {\n    // Using instance members instead of closure state nearly doubles speed.\n    var t, r = 0,\n        i = me.i, j = me.j, s = me.S;\n    while (count--) {\n      t = s[i = mask & (i + 1)];\n      r = r * width + s[mask & ((s[i] = s[j = mask & (j + t)]) + (s[j] = t))];\n    }\n    me.i = i; me.j = j;\n    return r;\n    // For robust unpredictability, the function call below automatically\n    // discards an initial batch of values.  This is called RC4-drop[256].\n    // See http://google.com/search?q=rsa+fluhrer+response&btnI\n  })(width);\n}\n\n//\n// copy()\n// Copies internal state of ARC4 to or from a plain object.\n//\nfunction copy(f, t) {\n  t.i = f.i;\n  t.j = f.j;\n  t.S = f.S.slice();\n  return t;\n};\n\n//\n// flatten()\n// Converts an object tree to nested arrays of strings.\n//\nfunction flatten(obj, depth) {\n  var result = [], typ = (typeof obj), prop;\n  if (depth && typ == 'object') {\n    for (prop in obj) {\n      try { result.push(flatten(obj[prop], depth - 1)); } catch (e) {}\n    }\n  }\n  return (result.length ? result : typ == 'string' ? obj : obj + '\\0');\n}\n\n//\n// mixkey()\n// Mixes a string seed into a key that is an array of integers, and\n// returns a shortened string seed that is equivalent to the result key.\n//\nfunction mixkey(seed, key) {\n  var stringseed = seed + '', smear, j = 0;\n  while (j < stringseed.length) {\n    key[mask & j] =\n      mask & ((smear ^= key[mask & j] * 19) + stringseed.charCodeAt(j++));\n  }\n  return tostring(key);\n}\n\n//\n// autoseed()\n// Returns an object for autoseeding, using window.crypto and Node crypto\n// module if available.\n//\nfunction autoseed() {\n  try {\n    var out;\n    if (nodecrypto && (out = nodecrypto.randomBytes)) {\n      // The use of 'out' to remember randomBytes makes tight minified code.\n      out = out(width);\n    } else {\n      out = new Uint8Array(width);\n      (global.crypto || global.msCrypto).getRandomValues(out);\n    }\n    return tostring(out);\n  } catch (e) {\n    var browser = global.navigator,\n        plugins = browser && browser.plugins;\n    return [+new Date, global, plugins, global.screen, tostring(pool)];\n  }\n}\n\n//\n// tostring()\n// Converts an array of charcodes to a string\n//\nfunction tostring(a) {\n  return String.fromCharCode.apply(0, a);\n}\n\n//\n// When seedrandom.js is loaded, we immediately mix a few bits\n// from the built-in RNG into the entropy pool.  Because we do\n// not want to interfere with deterministic PRNG state later,\n// seedrandom will not call math.random on its own again after\n// initialization.\n//\nmixkey(math.random(), pool);\n\n//\n// Nodejs and AMD support: export the implementation as a module using\n// either convention.\n//\nif ((typeof module) == 'object' && module.exports) {\n  module.exports = seedrandom;\n  // When in node.js, try using crypto package for autoseeding.\n  try {\n    nodecrypto = require('crypto');\n  } catch (ex) {}\n} else if ((typeof define) == 'function' && define.amd) {\n  define(function() { return seedrandom; });\n} else {\n  // When included as a plain script, set up Math.seedrandom global.\n  math['seed' + rngname] = seedrandom;\n}\n\n\n// End anonymous scope, and pass initial values.\n})(\n  // global: `self` in browsers (including strict mode and web workers),\n  // otherwise `this` in Node and other environments\n  (typeof self !== 'undefined') ? self : this,\n  [],     // pool: entropy pool starts empty\n  Math    // math: package containing random, pow, and seedrandom\n);\n", "// A library of seedable RNGs implemented in Javascript.\n//\n// Usage:\n//\n// var seedrandom = require('seedrandom');\n// var random = seedrandom(1); // or any seed.\n// var x = random();       // 0 <= x < 1.  Every bit is random.\n// var x = random.quick(); // 0 <= x < 1.  32 bits of randomness.\n\n// alea, a 53-bit multiply-with-carry generator by Johannes Baag\u00F8e.\n// Period: ~2^116\n// Reported to pass all BigCrush tests.\nvar alea = require('./lib/alea');\n\n// xor128, a pure xor-shift generator by George Marsaglia.\n// Period: 2^128-1.\n// Reported to fail: MatrixRank and LinearComp.\nvar xor128 = require('./lib/xor128');\n\n// xorwow, George Marsaglia's 160-bit xor-shift combined plus weyl.\n// Period: 2^192-2^32\n// Reported to fail: CollisionOver, SimpPoker, and LinearComp.\nvar xorwow = require('./lib/xorwow');\n\n// xorshift7, by Fran\u00E7ois Panneton and Pierre L'ecuyer, takes\n// a different approach: it adds robustness by allowing more shifts\n// than Marsaglia's original three.  It is a 7-shift generator\n// with 256 bits, that passes BigCrush with no systmatic failures.\n// Period 2^256-1.\n// No systematic BigCrush failures reported.\nvar xorshift7 = require('./lib/xorshift7');\n\n// xor4096, by Richard Brent, is a 4096-bit xor-shift with a\n// very long period that also adds a Weyl generator. It also passes\n// BigCrush with no systematic failures.  Its long period may\n// be useful if you have many generators and need to avoid\n// collisions.\n// Period: 2^4128-2^32.\n// No systematic BigCrush failures reported.\nvar xor4096 = require('./lib/xor4096');\n\n// Tyche-i, by Samuel Neves and Filipe Araujo, is a bit-shifting random\n// number generator derived from ChaCha, a modern stream cipher.\n// https://eden.dei.uc.pt/~sneves/pubs/2011-snfa2.pdf\n// Period: ~2^127\n// No systematic BigCrush failures reported.\nvar tychei = require('./lib/tychei');\n\n// The original ARC4-based prng included in this library.\n// Period: ~2^1600\nvar sr = require('./seedrandom');\n\nsr.alea = alea;\nsr.xor128 = xor128;\nsr.xorwow = xorwow;\nsr.xorshift7 = xorshift7;\nsr.xor4096 = xor4096;\nsr.tychei = tychei;\n\nmodule.exports = sr;\n", "!function(e){if(\"object\"==typeof exports)module.exports=e();else if(\"function\"==typeof define&&define.amd)define(e);else{var f;\"undefined\"!=typeof window?f=window:\"undefined\"!=typeof global?f=global:\"undefined\"!=typeof self&&(f=self),f.routes=e()}}(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error(\"Cannot find module '\"+o+\"'\")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(_dereq_,module,exports){\n\nvar localRoutes = [];\n\n\n/**\n * Convert path to route object\n *\n * A string or RegExp should be passed,\n * will return { re, src, keys} obj\n *\n * @param  {String / RegExp} path\n * @return {Object}\n */\n\nvar Route = function(path){\n  //using 'new' is optional\n\n  var src, re, keys = [];\n\n  if(path instanceof RegExp){\n    re = path;\n    src = path.toString();\n  }else{\n    re = pathToRegExp(path, keys);\n    src = path;\n  }\n\n  return {\n  \t re: re,\n  \t src: path.toString(),\n  \t keys: keys\n  }\n};\n\n/**\n * Normalize the given path string,\n * returning a regular expression.\n *\n * An empty array should be passed,\n * which will contain the placeholder\n * key names. For example \"/user/:id\" will\n * then contain [\"id\"].\n *\n * @param  {String} path\n * @param  {Array} keys\n * @return {RegExp}\n */\nvar pathToRegExp = function (path, keys) {\n\tpath = path\n\t\t.concat('/?')\n\t\t.replace(/\\/\\(/g, '(?:/')\n\t\t.replace(/(\\/)?(\\.)?:(\\w+)(?:(\\(.*?\\)))?(\\?)?|\\*/g, function(_, slash, format, key, capture, optional){\n\t\t\tif (_ === \"*\"){\n\t\t\t\tkeys.push(undefined);\n\t\t\t\treturn _;\n\t\t\t}\n\n\t\t\tkeys.push(key);\n\t\t\tslash = slash || '';\n\t\t\treturn ''\n\t\t\t\t+ (optional ? '' : slash)\n\t\t\t\t+ '(?:'\n\t\t\t\t+ (optional ? slash : '')\n\t\t\t\t+ (format || '') + (capture || '([^/]+?)') + ')'\n\t\t\t\t+ (optional || '');\n\t\t})\n\t\t.replace(/([\\/.])/g, '\\\\$1')\n\t\t.replace(/\\*/g, '(.*)');\n\treturn new RegExp('^' + path + '$', 'i');\n};\n\n/**\n * Attempt to match the given request to\n * one of the routes. When successful\n * a  {fn, params, splats} obj is returned\n *\n * @param  {Array} routes\n * @param  {String} uri\n * @return {Object}\n */\nvar match = function (routes, uri, startAt) {\n\tvar captures, i = startAt || 0;\n\n\tfor (var len = routes.length; i < len; ++i) {\n\t\tvar route = routes[i],\n\t\t    re = route.re,\n\t\t    keys = route.keys,\n\t\t    splats = [],\n\t\t    params = {};\n\n\t\tif (captures = uri.match(re)) {\n\t\t\tfor (var j = 1, len = captures.length; j < len; ++j) {\n\t\t\t\tvar key = keys[j-1],\n\t\t\t\t\tval = typeof captures[j] === 'string'\n\t\t\t\t\t\t? unescape(captures[j])\n\t\t\t\t\t\t: captures[j];\n\t\t\t\tif (key) {\n\t\t\t\t\tparams[key] = val;\n\t\t\t\t} else {\n\t\t\t\t\tsplats.push(val);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn {\n\t\t\t\tparams: params,\n\t\t\t\tsplats: splats,\n\t\t\t\troute: route.src,\n\t\t\t\tnext: i + 1\n\t\t\t};\n\t\t}\n\t}\n};\n\n/**\n * Default \"normal\" router constructor.\n * accepts path, fn tuples via addRoute\n * returns {fn, params, splats, route}\n *  via match\n *\n * @return {Object}\n */\n\nvar Router = function(){\n  //using 'new' is optional\n  return {\n    routes: [],\n    routeMap : {},\n    addRoute: function(path, fn){\n      if (!path) throw new Error(' route requires a path');\n      if (!fn) throw new Error(' route ' + path.toString() + ' requires a callback');\n\n      if (this.routeMap[path]) {\n        throw new Error('path is already defined: ' + path);\n      }\n\n      var route = Route(path);\n      route.fn = fn;\n\n      this.routes.push(route);\n      this.routeMap[path] = fn;\n    },\n\n    removeRoute: function(path) {\n      if (!path) throw new Error(' route requires a path');\n      if (!this.routeMap[path]) {\n        throw new Error('path does not exist: ' + path);\n      }\n\n      var match;\n      var newRoutes = [];\n\n      // copy the routes excluding the route being removed\n      for (var i = 0; i < this.routes.length; i++) {\n        var route = this.routes[i];\n        if (route.src !== path) {\n          newRoutes.push(route);\n        }\n      }\n      this.routes = newRoutes;\n      delete this.routeMap[path];\n    },\n\n    match: function(pathname, startAt){\n      var route = match(this.routes, pathname, startAt);\n      if(route){\n        route.fn = this.routeMap[route.route];\n        route.next = this.match.bind(this, pathname, route.next)\n      }\n      return route;\n    }\n  }\n};\n\nRouter.Route = Route\nRouter.pathToRegExp = pathToRegExp\nRouter.match = match\n// back compat\nRouter.Router = Router\n\nmodule.exports = Router\n\n},{}]},{},[1])\n(1)\n});", "import Application from './Application';\nimport { render } from 'preact';\nimport App from './components/app/App';\n\n// initialize app db.\nconst initApp = async () => {\n\n    await Application.init();\n\n    render(<App />, document.body);\n\n}\n\ninitApp();", "import { idbTables } from 'config/idb.config';\nimport { APP_ID } from 'env';\nimport { IndexedDBManager } from 'lib/IndexedDBManager';\nimport AudioManager from './lib/AudioManager.js';\nimport { DebugPanel, DebugPanelLogModule } from './lib/utils/debug/DebugPanel';\nimport { addLogModule } from './lib/utils/logging.js';\n\nclass Application {\n\n\tconstructor() {\n\t\t// init globals and singletons\n\t}\n\n\t// Things to initialize before client can start...\n\t// Don't take too long... App waits for this method until it mounts.\n\tasync init() {\n\t\t//console.log(`Application.init()`)\n\t\tconst dbManager = new IndexedDBManager(APP_ID, 1);\n\t\tif (idbTables) for (var t of idbTables) dbManager.addStore(t.name, t.indexes);\n\n\t\tAudioManager.register('hover', '/public/sounds/click.wav');\n\t\tAudioManager.register('click', '/public/sounds/cool-click.wav');\n\n\t\t//addLogModule(new DebugPanelLogModule({ show: true }));\n\t}\n\n}\n\nexport default new Application(); ", "// specifies indexed db tables to initialize at app startup\nexport const idbTables = [\n    {\n        name: 'work',\n        options: {},\n        indexes: ['id']\n    }\n]", "{\"SHELL\":\"/bin/bash\",\"IMSETTINGS_INTEGRATE_DESKTOP\":\"yes\",\"npm_command\":\"run\",\"SESSION_MANAGER\":\"local/unix:@/tmp/.ICE-unix/4332,unix/unix:/tmp/.ICE-unix/4332\",\"WINDOWID\":\"94649016979328\",\"npm_config_userconfig\":\"/home/rw3iss/.npmrc\",\"COLORTERM\":\"truecolor\",\"XDG_CONFIG_DIRS\":\"/home/rw3iss/.config/kdedefaults:/etc/xdg:/usr/share/kde-settings/kde-profile/default/xdg\",\"npm_config_cache\":\"/home/rw3iss/.npm\",\"NVM_INC\":\"/home/rw3iss/.nvm/versions/node/v22.18.0/include/node\",\"XDG_MENU_PREFIX\":\"plasma-\",\"ICEAUTHORITY\":\"/run/user/1000/iceauth_fyfAeV\",\"LANGUAGE\":\"\",\"NODE\":\"/home/rw3iss/.nvm/versions/node/v22.18.0/bin/node\",\"FREETYPE_PROPERTIES\":\"cff:no-stem-darkening=0 autofitter:no-stem-darkening=0\",\"SSH_AUTH_SOCK\":\"/run/user/1000/ssh-agent.socket\",\"SHELL_SESSION_ID\":\"30dbc806af934fd4af97adb1efc673c2\",\"MEMORY_PRESSURE_WRITE\":\"c29tZSAyMDAwMDAgMjAwMDAwMAA=\",\"COLOR\":\"1\",\"npm_config_local_prefix\":\"/home/rw3iss/Sites/personal/ryanweiss.net\",\"XMODIFIERS\":\"@im=none\",\"DESKTOP_SESSION\":\"plasma\",\"GTK_RC_FILES\":\"/etc/gtk/gtkrc:/home/rw3iss/.gtkrc:/home/rw3iss/.config/gtkrc\",\"GDK_CORE_DEVICE_EVENTS\":\"1\",\"npm_config_globalconfig\":\"/home/rw3iss/.npm-global/etc/npmrc\",\"GPG_TTY\":\"/dev/pts/6\",\"EDITOR\":\"/usr/bin/nano\",\"XDG_SEAT\":\"seat0\",\"PWD\":\"/home/rw3iss/Sites/personal/ryanweiss.net\",\"VCPKG_ROOT\":\"/home/rw3iss/Code/Qt/vcpkg\",\"XDG_SESSION_DESKTOP\":\"plasma\",\"LOGNAME\":\"rw3iss\",\"XDG_SESSION_TYPE\":\"wayland\",\"npm_config_init_module\":\"/home/rw3iss/.npm-init.js\",\"SYSTEMD_EXEC_PID\":\"143518\",\"_\":\"/home/rw3iss/.nvm/versions/node/v22.18.0/bin/node\",\"XAUTHORITY\":\"/run/user/1000/xauth_XUgbZN\",\"GDM_LANG\":\"en_US.UTF-8\",\"GTK2_RC_FILES\":\"/home/rw3iss/.gtkrc-2.0-kde4\",\"HOME\":\"/home/rw3iss\",\"USERNAME\":\"rw3iss\",\"AGL_TOP\":\"/home/rw3iss/Code/AGL\",\"SSH_ASKPASS\":\"/usr/bin/ksshaskpass\",\"LANG\":\"en_US.UTF-8\",\"LS_COLORS\":\"rs=0:di=01;34:ln=01;36:mh=00:pi=40;33:so=01;35:do=01;35:bd=40;33;01:cd=40;33;01:or=40;31;01:mi=01;37;41:su=37;41:sg=30;43:ca=00:tw=30;42:ow=34;42:st=37;44:ex=01;32:*.7z=01;31:*.ace=01;31:*.alz=01;31:*.apk=01;31:*.arc=01;31:*.arj=01;31:*.bz=01;31:*.bz2=01;31:*.cab=01;31:*.cpio=01;31:*.crate=01;31:*.deb=01;31:*.drpm=01;31:*.dwm=01;31:*.dz=01;31:*.ear=01;31:*.egg=01;31:*.esd=01;31:*.gz=01;31:*.jar=01;31:*.lha=01;31:*.lrz=01;31:*.lz=01;31:*.lz4=01;31:*.lzh=01;31:*.lzma=01;31:*.lzo=01;31:*.pyz=01;31:*.rar=01;31:*.rpm=01;31:*.rz=01;31:*.sar=01;31:*.swm=01;31:*.t7z=01;31:*.tar=01;31:*.taz=01;31:*.tbz=01;31:*.tbz2=01;31:*.tgz=01;31:*.tlz=01;31:*.txz=01;31:*.tz=01;31:*.tzo=01;31:*.tzst=01;31:*.udeb=01;31:*.war=01;31:*.whl=01;31:*.wim=01;31:*.xz=01;31:*.z=01;31:*.zip=01;31:*.zoo=01;31:*.zst=01;31:*.avif=01;35:*.jpg=01;35:*.jpeg=01;35:*.jxl=01;35:*.mjpg=01;35:*.mjpeg=01;35:*.gif=01;35:*.bmp=01;35:*.pbm=01;35:*.pgm=01;35:*.ppm=01;35:*.tga=01;35:*.xbm=01;35:*.xpm=01;35:*.tif=01;35:*.tiff=01;35:*.png=01;35:*.svg=01;35:*.svgz=01;35:*.mng=01;35:*.pcx=01;35:*.mov=01;35:*.mpg=01;35:*.mpeg=01;35:*.m2v=01;35:*.mkv=01;35:*.webm=01;35:*.webp=01;35:*.ogm=01;35:*.mp4=01;35:*.m4v=01;35:*.mp4v=01;35:*.vob=01;35:*.qt=01;35:*.nuv=01;35:*.wmv=01;35:*.asf=01;35:*.rm=01;35:*.rmvb=01;35:*.flc=01;35:*.avi=01;35:*.fli=01;35:*.flv=01;35:*.gl=01;35:*.dl=01;35:*.xcf=01;35:*.xwd=01;35:*.yuv=01;35:*.cgm=01;35:*.emf=01;35:*.ogv=01;35:*.ogx=01;35:*.aac=01;36:*.au=01;36:*.flac=01;36:*.m4a=01;36:*.mid=01;36:*.midi=01;36:*.mka=01;36:*.mp3=01;36:*.mpc=01;36:*.ogg=01;36:*.ra=01;36:*.wav=01;36:*.oga=01;36:*.opus=01;36:*.spx=01;36:*.xspf=01;36:*~=00;90:*#=00;90:*.bak=00;90:*.crdownload=00;90:*.dpkg-dist=00;90:*.dpkg-new=00;90:*.dpkg-old=00;90:*.dpkg-tmp=00;90:*.old=00;90:*.orig=00;90:*.part=00;90:*.rej=00;90:*.rpmnew=00;90:*.rpmorig=00;90:*.rpmsave=00;90:*.swp=00;90:*.tmp=00;90:*.ucf-dist=00;90:*.ucf-new=00;90:*.ucf-old=00;90:\",\"XDG_CURRENT_DESKTOP\":\"KDE\",\"KONSOLE_DBUS_SERVICE\":\":1.415\",\"npm_package_version\":\"1.0.0\",\"MEMORY_PRESSURE_WATCH\":\"/sys/fs/cgroup/user.slice/user-1000.slice/user@1000.service/session.slice/plasma-plasmashell.service/memory.pressure\",\"STARSHIP_SHELL\":\"bash\",\"WAYLAND_DISPLAY\":\"wayland-0\",\"KONSOLE_DBUS_SESSION\":\"/Sessions/2\",\"PROFILEHOME\":\"\",\"FORCE_COLOR\":\"3\",\"INVOCATION_ID\":\"53e5fc29976f435ca4a408bc164c5c95\",\"KONSOLE_VERSION\":\"250801\",\"MANAGERPID\":\"3837\",\"IMSETTINGS_MODULE\":\"none\",\"INIT_CWD\":\"/home/rw3iss/Sites/personal/ryanweiss.net\",\"STARSHIP_SESSION_KEY\":\"2409329836883816\",\"KDE_SESSION_UID\":\"1000\",\"npm_lifecycle_script\":\"rimraf build/ && concurrently -k -r \\\"node scripts/dev.js --config tsconfig.json\\\" \\\"web-dev-server --config scripts/web-dev-server.config.js\\\"\",\"NVM_DIR\":\"/home/rw3iss/.nvm\",\"MOZ_GMP_PATH\":\"/usr/lib64/mozilla/plugins/gmp-gmpopenh264/system-installed\",\"XKB_DEFAULT_LAYOUT\":\"us\",\"npm_config_npm_version\":\"11.6.0\",\"XDG_SESSION_CLASS\":\"user\",\"TERM\":\"xterm-256color\",\"npm_package_name\":\"rw\",\"npm_config_prefix\":\"/home/rw3iss/.npm-global\",\"LESSOPEN\":\"||/usr/bin/lesspipe.sh %s\",\"USER\":\"rw3iss\",\"COLORFGBG\":\"15;0\",\"QT_WAYLAND_RECONNECT\":\"1\",\"KDE_SESSION_VERSION\":\"6\",\"DISPLAY\":\":0\",\"npm_lifecycle_event\":\"dev\",\"SHLVL\":\"1\",\"NVM_CD_FLAGS\":\"\",\"XDG_VTNR\":\"2\",\"XDG_SESSION_ID\":\"2\",\"MANAGERPIDFDID\":\"3838\",\"npm_config_user_agent\":\"npm/11.6.0 node/v22.18.0 linux x64 workspaces/false\",\"npm_execpath\":\"/home/rw3iss/.nvm/versions/node/v22.18.0/lib/node_modules/npm/bin/npm-cli.js\",\"XDG_RUNTIME_DIR\":\"/run/user/1000\",\"npm_config_strict_ssl\":\"\",\"DEBUGINFOD_URLS\":\"ima:enforcing https://debuginfod.fedoraproject.org/ ima:ignore \",\"npm_package_json\":\"/home/rw3iss/Sites/personal/ryanweiss.net/package.json\",\"DEBUGINFOD_IMA_CERT_PATH\":\"/etc/keys/ima:\",\"KDEDIRS\":\"/usr\",\"JOURNAL_STREAM\":\"9:704999\",\"XDG_DATA_DIRS\":\"/home/rw3iss/.local/share/flatpak/exports/share:/var/lib/flatpak/exports/share:/usr/local/share/:/usr/share/:/var/lib/snapd/desktop\",\"KDE_FULL_SESSION\":\"true\",\"npm_config_noproxy\":\"\",\"PATH\":\"/home/rw3iss/Sites/personal/ryanweiss.net/node_modules/.bin:/home/rw3iss/Sites/personal/node_modules/.bin:/home/rw3iss/Sites/node_modules/.bin:/home/rw3iss/node_modules/.bin:/home/node_modules/.bin:/node_modules/.bin:/home/rw3iss/.nvm/versions/node/v22.18.0/lib/node_modules/npm/node_modules/@npmcli/run-script/lib/node-gyp-bin:/home/rw3iss/.cargo/bin:/home/rw3iss/.npm-global/bin:/home/rw3iss/.local/bin:/home/rw3iss/bin:/home/rw3iss/.nvm/versions/node/v22.18.0/bin::/usr/lib64/ccache:/usr/local/bin:/usr/bin:/var/lib/snapd/snap/bin:/home/rw3iss/bin:/usr/local/bin:~/.npm-global/bin:/usr/local/go/bin:/home/rw3iss/go/bin\",\"npm_config_node_gyp\":\"/home/rw3iss/.nvm/versions/node/v22.18.0/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js\",\"GDMSESSION\":\"plasma\",\"DBUS_SESSION_BUS_ADDRESS\":\"unix:path=/run/user/1000/bus\",\"npm_config_global_prefix\":\"/home/rw3iss/.npm-global\",\"KDE_APPLICATIONS_AS_SCOPE\":\"1\",\"NVM_BIN\":\"/home/rw3iss/.nvm/versions/node/v22.18.0/bin\",\"npm_node_execpath\":\"/home/rw3iss/.nvm/versions/node/v22.18.0/bin/node\",\"OLDPWD\":\"/home/rw3iss/Sites/personal\",\"npm_package_engines_node\":\">=20\",\"KONSOLE_DBUS_WINDOW\":\"/Windows/1\",\"APP_ID\":\"rw\",\"SITE_NAME\":\"Admin\",\"DEFAULT_TIMEZONE\":\"America/New_York\",\"API_URL\":\"http://localhost:9090\",\"IDB_NAME\":\"rw\",\"IDB_VERSION\":\"11\"}", "import { APP_ID } from 'env';\nimport { getLogger } from 'lib/utils/logging';\n\nconst { log, warn, error } = getLogger('IndexedDBManager', { color: 'yellow', enabled: false });\n\nexport class IndexedDBManager {\n    private static dbs: Array<IndexedDBManager> = []; // global DB index\n\n    private db: IDBDatabase | null = null;\n    private dbName: string;\n    private version: number;\n    private stores: { [name: string]: string[] } = {};\n\n    constructor(dbName: string, initialVersion: number = 1) {\n        this.dbName = dbName;\n        this.version = this.getVersionFromLocalStorage() || initialVersion;\n        IndexedDBManager.dbs.push(this);\n    }\n\n    // static accessor for clients to retrieve an instance of a DB from anywhere.\n    public static getDb(name = APP_ID) {\n        let db = IndexedDBManager.dbs.find(d => d.dbName == APP_ID);\n        if (!db) db = new IndexedDBManager(APP_ID);\n        return db;\n    }\n\n    private getVersionFromLocalStorage(): number | null {\n        const versionString = localStorage.getItem(`${this.dbName}_version`);\n        return versionString ? parseInt(versionString, 10) : null;\n    }\n\n    private setVersionInLocalStorage(version: number) {\n        localStorage.setItem(`${this.dbName}_version`, version.toString());\n    }\n\n    private openDB(): Promise<IDBDatabase> {\n        return new Promise((resolve, reject) => {\n            log(`openDB()`, this.version);\n            const request = indexedDB.open(this.dbName, this.version);\n\n            request.onerror = (event) => {\n                error(`openDB() error:`, error);\n                // Check if the error is due to version mismatch\n                if (event.target?.error?.name === 'VersionError') {\n                    this.version++;\n                    this.setVersionInLocalStorage(this.version);\n                    resolve(this.openDB()); // Recursively try to open with new version\n                } else {\n                    reject(`Database error: ${event.target?.error}`);\n                }\n            };\n\n            request.onsuccess = (event) => {\n                log(`openDB() onsuccess:`, event);\n                this.db = (event.target as IDBOpenDBRequest).result;\n                resolve(this.db as IDBDatabase);\n            };\n\n            request.onupgradeneeded = (event) => {\n                warn(`openDB() onupgradeneeded:`, event);\n                this.db = (event.target as IDBOpenDBRequest).result;\n                this.upgradeDB(event);\n            };\n        });\n    }\n\n    private upgradeDB(event: IDBVersionChangeEvent) {\n        log(`upgradeDB():`, event);\n        const db = (event.target as IDBOpenDBRequest).result;\n        const newVersion = event.newVersion || this.version;\n\n        for (const [storeName, indexes] of Object.entries(this.stores)) {\n            if (!db.objectStoreNames.contains(storeName)) {\n                log(`creating new objectStore:`, storeName);\n                const objectStore = db.createObjectStore(storeName, { keyPath: 'id', autoIncrement: true });\n\n                for (const index of indexes) {\n                    objectStore.createIndex(index, index, { unique: false });\n                }\n            }\n        }\n\n        this.setVersionInLocalStorage(newVersion);\n    }\n\n    public addStore(storeName: string, indexNames: string[]) {\n        log(`addStore():`, storeName);\n        this.stores[storeName] = indexNames;\n        // Store is added to the list, but we don't increment version here\n    }\n\n    private handleMissingStore(storeName: string): Promise<void> {\n        log(`handleMissingStore():`, storeName);\n        return new Promise((resolve, reject) => {\n            this.version++;\n            this.setVersionInLocalStorage(this.version);\n\n            const request = indexedDB.open(this.dbName, this.version);\n            request.onupgradeneeded = (event) => {\n                warn(`handleMissingStore() onupgradeneeded:`, storeName);\n                const db = (event.target as IDBOpenDBRequest).result;\n                if (!db.objectStoreNames.contains(storeName)) {\n                    const objectStore = db.createObjectStore(storeName, { keyPath: 'id', autoIncrement: true });\n                    if (this.stores[storeName]) {\n                        for (const index of this.stores[storeName]) {\n                            objectStore.createIndex(index, index, { unique: false });\n                        }\n                    }\n                }\n                resolve();\n            };\n            request.onerror = (event) => reject(`Error creating store: ${event.target?.error}`);\n        });\n    }\n\n    public async put<T>(storeName: string, value: T): Promise<void> {\n        log(`put()`, storeName, value);\n        if (!this.db) await this.openDB();\n\n        try {\n            const transaction = this.db!.transaction(storeName, 'readwrite');\n            const objectStore = transaction.objectStore(storeName);\n            const request = objectStore.put(value);\n            return new Promise((resolve, reject) => {\n                request.onsuccess = () => resolve();\n                request.onerror = (e) => {\n                    log(`put() request error`, storeName, e);\n                    if (request.error?.name === 'NotFoundError') {\n                        this.handleMissingStore(storeName).then(() => this.put<T>(storeName, value).then(resolve).catch(reject));\n                    } else {\n                        reject(request.error);\n                    }\n                };\n            });\n        } catch (e) {\n            log(`put() error`, storeName, value);\n            if ((e as DOMException).name === 'NotFoundError') {\n                await this.handleMissingStore(storeName);\n                return this.put<T>(storeName, value); // Retry the operation\n            }\n            throw e;\n        }\n    }\n\n    public async get<T>(storeName: string, key: IDBValidKey): Promise<T | undefined> {\n        log(`get()`, storeName, key);\n        if (!this.db) await this.openDB();\n\n        try {\n            const transaction = this.db!.transaction(storeName, 'readonly');\n            const objectStore = transaction.objectStore(storeName);\n            const request = objectStore.get(key);\n            return new Promise((resolve) => {\n                request.onsuccess = () => resolve(request.result);\n                request.onerror = () => {\n                    log(`get() request error`, storeName, e);\n                    if (request.error?.name === 'NotFoundError') {\n                        this.handleMissingStore(storeName).then(() => this.get<T>(storeName, key).then(resolve));\n                    }\n                };\n            });\n        } catch (e) {\n            log(`get() error`, storeName, e);\n            if ((e as DOMException).name === 'NotFoundError') {\n                await this.handleMissingStore(storeName);\n                return this.get<T>(storeName, key);\n            }\n            return undefined;\n        }\n    }\n\n    public closeDB() {\n        log(`closeDB()`);\n        if (this.db) {\n            this.db.close();\n            this.db = null;\n        }\n    }\n}", "/* Usage:\n    import { getLogger } from 'lib/utils/logging';\n    const { log, warn, error } = getLogger('somename');\n    log('something', ...);\n*/\n\nexport interface LogModule {\n    name: string;\n    onLog(...args): void;\n}\n\nconst DISABLED_LOGGER = { log: () => { }, warn: () => { } };\nconst loggers = {};\nconst logModules: Array<LogModule> = [];\n\n// main logging output, and send to modules.\nfunction doLog(namespace, args) {\n    //let stack = (new Error()).stack.split(\"\\n\")[1].split(\"/\").slice(-1)[0].split(\":\");\n    //const [filename, linenum, linepos] = stack;\n    //args.push(`:${linenum} @${linepos}`);\n    const logEvent = { namespace, args }\n    logModules.forEach((m: LogModule) => m.onLog(logEvent));\n    console.log.apply(console, args);\n}\n\nexport const addLogModule = (m) => logModules.push(m);\n\n// START Colors\nexport const DEFAULT_LOG_COLOR = 'yellow';\nexport const Colors = {\n    reset: \"\\x1b[0m\",\n    bright: \"\\x1b[1m\",\n    dim: \"\\x1b[2m\",\n    underscore: \"\\x1b[4m\",\n    blink: \"\\x1b[5m\",\n    reverse: \"\\x1b[7m\",\n    hidden: \"\\x1b[8m\",\n\n    black: \"\\x1b[30m\",\n    red: \"\\x1b[31m\",\n    green: \"\\x1b[32m\",\n    yellow: \"\\x1b[33m\",\n    blue: \"\\x1b[34m\",\n    magenta: \"\\x1b[35m\",\n    cyan: \"\\x1b[36m\",\n    white: \"\\x1b[37m\",\n\n    BGblack: \"\\x1b[40m\",\n    BGred: \"\\x1b[41m\",\n    BGgreen: \"\\x1b[42m\",\n    BGyellow: \"\\x1b[43m\",\n    BGblue: \"\\x1b[44m\",\n    BGmagenta: \"\\x1b[45m\",\n    BGcyan: \"\\x1b[46m\",\n    BGwhite: \"\\x1b[47m\",\n};\nexport function color(color, str) {\n    let cs = color.indexOf('\\x1b') >= 0 ? color : Colors[color];\n    return `${cs}${str}${Colors['reset']}`;\n}\n// END Colors\n\n\n/**\n * @description Retrieve a logger by name.\n * @param {string} [namespace='']\n * @param {*} [opts={}]\n * @return {*}\n */\nexport const getLogger = function (namespace = '', opts: any = {}) {\n    if (opts.enabled === false) return DISABLED_LOGGER; // don't register the logger at all.\n    let l = loggers[namespace];\n    if (!l) {\n        l = new Logger(\n            namespace,\n            opts.color || DEFAULT_LOG_COLOR,\n            (typeof opts.enabled != 'undefined' ? opts.enabled : true)\n        );\n        loggers[namespace] = l;\n    } else if (opts) {\n        // replace opts with new ones if they exist\n        if (opts.color) l.color = opts.color;\n        if (typeof opts.enabled == 'boolean') l.enabled = opts.enabled;\n    }\n    return l;\n}\n\n/**\n * @description Debugs logs/arguments to a specific namespace (first parameter), or default/global.\n * @param {*} args\n */\nexport const log = function (...args) {\n    const namespace = args.length > 1 ? args[0] : '';\n    args = args.length > 1 ? args.slice(1, args.length) : [];\n    let l = getLogger(namespace);\n    if (l) {\n        let la = [...args];\n        // log if normal mode, and logger is enabled, or log if it is globally-enabled\n        if ((!isLogAllMode && l.enabled) ||\n            (isLogAllMode && (!logOnly || logOnly.includes(namespace)))) {\n            if (namespace) la.unshift(`${Colors[l.color] || Colors[l.black]}${namespace || '(no namespace)'}:${Colors[\"reset\"]}`);\n        }\n        doLog(namespace, la);\n    } else {\n        doLog(namespace, ['Warning:', ...args]);\n    }\n}\n\n/**\n * @description Debugs logs/arguments to a specific namespace (first parameter), or default/global.\n * @param {*} args\n */\nexport const warn = function (...args) {\n    const namespace = args.length > 1 ? args[0] : '';\n    args = args.length > 1 ? args.slice(1, args.length) : [];\n    let l = getLogger(namespace);\n    if (l) {\n        let la = [...args];\n        if (namespace) {\n            la.unshift(`${Colors[l.color] || Colors[l.black]}${namespace || '(no namespace)'}:${Colors[\"reset\"]} \u26A0\uFE0F`);\n        }\n        doLog(namespace, la);\n    } else {\n        doLog(namespace, ['Warning:', ...args]);\n    }\n}\n\n/**\n * @description Debugs logs/arguments to a specific namespace (first parameter), or default/global.\n * @param {*} args\n */\nexport const error = function (...args) {\n    const namespace = args.length > 1 ? args[0] : '';\n    args = args.length > 1 ? args.slice(1, args.length) : [];\n    let l = getLogger(namespace);\n    if (l) {\n        let la = [...args];\n        if (namespace) la.unshift(`${Colors[\"red\"]}${namespace || '(no namespace)'}:${Colors[\"reset\"]} \uD83D\uDED1`);\n        doLog(namespace, la);\n    } else {\n        doLog(namespace, ['Error:', ...args]);\n    }\n}\n\n/**\n * @description A Logger that utilizes the global log() method, and adds fancy stuff like colors, namespacing, and configuration.\n * @export\n * @class Logger\n */\nexport class Logger {\n    namespace = '';\n    color = 'yellow';\n    enabled = true;\n\n    public constructor(namespace, color = DEFAULT_LOG_COLOR, enabled = true) {\n        this.namespace = namespace;\n        this.color = color;\n        this.enabled = enabled;\n    }\n\n    // todo: should pass itself or use .call?\n    public log = (...args) => {\n        log(this.namespace, ...args);\n        return this;\n    }\n\n    // this is like log, but it will show it always\n    public warn = (...args) => {\n        warn(this.namespace, ...args);\n        return this;\n    }\n\n    // this is like log, but it will show it always\n    public error = (...args) => {\n        error(this.namespace, ...args);\n        return this;\n    }\n\n    public setEnabled(enabled) {\n        this.enabled = enabled;\n        return this;\n    }\n}\n\n\n/* Window url param options:\nThis is a browser-only feature to enable logging options from the url, which will enable or disable certain features.\nTodo: Could make this a module.\n*/\nlet windowParams;\nlet isLogAllMode = false;\nlet logOnly = undefined;\nif (typeof window != 'undefined' && typeof URLSearchParams != 'undefined') {\n    windowParams = new URLSearchParams(window.location.search);\n    if (windowParams.get('logAll')) {\n        let logWhat = windowParams.get('logAll');\n        if (logWhat == 'true') {\n            isLogAllMode = true;\n        } else if (logWhat && logWhat != 'true') {\n            isLogAllMode = true;\n            logOnly = logWhat.split(',');\n        }\n    }\n}\n", "import { getLogger } from \"./utils/logging.js\";\n\nconst { log } = getLogger('AudioManager', { color: 'red', enabled: false });\n\nexport async function playSound(id) {\n    await AudioManager.play(id);\n}\n\nclass _AudioManager {\n    private context: AudioContext;\n    private sounds: Map<string, { filePath: string; buffer?: AudioBuffer }> = new Map();\n\n    constructor() {\n        //this.init();\n    }\n\n    private async init(): Promise<void> {\n        log('init');\n        // Initialize the AudioContext\n        this.context = new AudioContext();\n    }\n\n    // Register a sound file by ID without loading it\n    public register(id: string, filePath: string): void {\n        log('register', id, filePath);\n        this.sounds.set(id, { filePath });\n    }\n\n    // Load a sound into memory\n    public async load(id: string): Promise<void> {\n        if (!this.context) throw new Error(`No audio context.`);\n\n        log('load', id);\n        const sound = this.sounds.get(id);\n        if (!sound) throw new Error(`Sound with id ${id} not registered`);\n\n        if (!sound.buffer) {\n            const response = await fetch(sound.filePath);\n            const arrayBuffer = await response.arrayBuffer();\n            sound.buffer = await this.context.decodeAudioData(arrayBuffer);\n        }\n    }\n\n    // Play a sound by ID, loading it if not already loaded\n    public async play(id: string): Promise<void> {\n        if (!this.context) await this.init();\n        if (!this.context) throw new Error(`No audio context.`);\n\n        log('play', id);\n        const sound = this.sounds.get(id);\n        if (!sound) throw new Error(`Sound with id ${id} not registered. Must first call AudioManager.register(id, filePath).`);\n        if (!sound.buffer) await this.load(id);\n\n        // Create a buffer source node\n        const source = this.context.createBufferSource();\n        source.buffer = sound.buffer;\n        source.connect(this.context.destination);\n        source.start();\n    }\n}\n\nconst AudioManager = new _AudioManager();\nexport default AudioManager;", "import { RouteContext } from '../shared/RouteContext/RouteContext';\nimport \"./App.scss\";\n\nconst App = (props) => {\n\n    return (\n        <main id=\"app\">\n\n            <div className=\"content-wrapper\">\n\n                {/* <div className=\"nav\">\n\n                    <div className=\"logo\" onMouseEnter={e => playSound('click')}>\n                        <div className=\"name\">Ryan<br />Weiss</div>\n                        <div className=\"title\">Developer</div>\n                        <div className=\"star\">\u2728</div>\n                    </div>\n\n                    <Menu />\n\n                    <div className=\"trees\">\n                        <img className=\"tree tree1\" src=\"/public/images/trees/tree1.png\" />\n                        <img className=\"tree tree2\" src=\"/public/images/trees/tree2.png\" />\n                        <img className=\"tree tree3\" src=\"/public/images/trees/tree3.png\" />\n                        <img className=\"tree tree4\" src=\"/public/images/trees/tree4.png\" />\n                        <img className=\"tree tree5\" src=\"/public/images/trees/tree5.png\" />\n                    </div>\n\n                </div> */}\n\n                <div className=\"page\">\n\n                    { /* Todo: need App data cache context... site is loaded until cache and data are ready */}\n\n                    <div className=\"container\">\n\n                        {/* <UnderConstruction /> */}\n\n                        <div className=\"stage\">\n                            <div className=\"stage-content\">\n\n                                <RouteContext />\n\n                            </div>\n                        </div>\n\n                    </div>\n\n                </div>\n\n            </div>\n\n        </main>\n\n    );\n\n}\n\nexport default App;", "import { DEFAULT_ROUTE } from 'config/config';\nimport routes from 'config/routes';\nimport { useRouter } from 'lib/hooks/useRouter.js';\nimport { useEffect } from 'preact/hooks';\n\nexport function RouteContext() {\n\n\tconst { route, routeParams, navigate } = useRouter();\n\n\t// tell the router to try to render the current or default route\n\tuseEffect(() => {\n\t\tlet l = location.pathname;\n\t\tif (l == '/' || l == '') l = DEFAULT_ROUTE;\n\t\telse l += location.search;\n\t\tif (!route) navigate(l);\n\t}, []);\n\n\tconst routeFn: any = route ? routes[route] : undefined;\n\n\tif (!route) return ''; // route not given\n\tif (!routeFn) return 'Not found.'; // no handler found\n\n\treturn routeFn(routeParams)\n}\n", "export const DEFAULT_ROUTE = \"/\"; ", "import EntryPage from 'components/pages/Entry';\nimport HomePage from 'components/pages/Home';\nimport InfoPage from 'components/pages/Info';\nimport NotFoundPage from 'components/pages/NotFound';\nimport OtherPage from 'components/pages/Other/index';\nimport PlayPage from 'components/pages/Play';\nimport TimelinePage from 'components/pages/Timeline/index';\nimport WorkPage from 'components/pages/Work';\nimport { ColorPage } from '../components/pages/Colors/ColorPage';\n\nexport default {\n\t\"/\": (p?) => <HomePage />,\n\t\"/work\": (p?) => <WorkPage />,\n\t\"/play\": (p?) => <PlayPage />,\n\t\"/info\": (p?) => <InfoPage />,\n\t\"/editor\": (p?) => <OtherPage />,\n\t\"/colors\": (p?) => <ColorPage />,\n\t\"/timeline\": (p?) => <TimelinePage />,\n\t\"/entries/:slug\": (p?) => <EntryPage />,\n\t\"*\": (p?) => <NotFoundPage />\n}", "import './style.scss';\n\nconst EntryPage = (props) => {\n\n    // useEffect(() => {\n    //     if (data) console.log(`got App data home`, data);\n    // }, [data])\n\n    return (\n        <div className=\"page\" id=\"entry\">\n            Entry\n        </div>\n    );\n};\n\nexport default EntryPage;\n\n// import { renderContentByType } from 'lib/utils/ContentUtils';\n// import { useEntry } from 'lib/DataProvider';\n// import { renderDate } from 'lib/utils/DateUtils';\n// import './style.scss';\n\n// const EntryPage = (props) => {\n//     const params = useParams();\n//     const entry = useEntry(params.slug);\n\n//     // useLayoutEffect(() => {\n//     //     if (params?.slug) {\n//     //         console.log(`get entry`, params.slug)\n//     //         const _entry = await DataService.getEntryBySlug(params.slug);\n//     //         if (!_entry) return navigate(\"/not-found\");\n//     //         setEntry(_entry);\n//     //     }\n//     // }, [params]);\n//     // const entries = useEntries();\n//     // console.log(`home context data`, entries);\n\n//     // useEffect(() => {\n//     //     if (data) console.log(`got App data home`, data);\n//     // }, [data])\n\n//     return (\n//         <div className=\"page\" id=\"entry\">\n//             {entry &&\n//                 <div key={entry.id} className=\"entry\">\n//                     <div className=\"date\">{renderDate(entry.dateAdded || entry.dateUpdated)}</div>\n//                     <div className=\"title\">{entry.title}</div>\n//                     <div className=\"content\">\n//                         {renderContentByType(entry.contentType, entry.content)}\n//                     </div>\n//                 </div>\n//             }\n//         </div>\n//     );\n// };\n\n// export default EntryPage;", "const ENCODED_ENTITIES = /[\"&<]/;\n\n/** @param {string} str */\nexport function encodeEntities(str) {\n\t// Skip all work for strings with no entities needing encoding:\n\tif (str.length === 0 || ENCODED_ENTITIES.test(str) === false) return str;\n\n\tlet last = 0,\n\t\ti = 0,\n\t\tout = '',\n\t\tch = '';\n\n\t// Seek forward in str until the next entity char:\n\tfor (; i < str.length; i++) {\n\t\tswitch (str.charCodeAt(i)) {\n\t\t\tcase 34:\n\t\t\t\tch = '&quot;';\n\t\t\t\tbreak;\n\t\t\tcase 38:\n\t\t\t\tch = '&amp;';\n\t\t\t\tbreak;\n\t\t\tcase 60:\n\t\t\t\tch = '&lt;';\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tcontinue;\n\t\t}\n\t\t// Append skipped/buffered characters and the encoded entity:\n\t\tif (i !== last) out += str.slice(last, i);\n\t\tout += ch;\n\t\t// Start the next seek/buffer after the entity's offset:\n\t\tlast = i + 1;\n\t}\n\tif (i !== last) out += str.slice(last, i);\n\treturn out;\n}\n", "/** Normal hydration that attaches to a DOM tree but does not diff it. */\nexport const MODE_HYDRATE = 1 << 5;\n/** Signifies this VNode suspended on the previous render */\nexport const MODE_SUSPENDED = 1 << 7;\n/** Indicates that this node needs to be inserted while patching children */\nexport const INSERT_VNODE = 1 << 2;\n/** Indicates a VNode has been matched with another VNode in the diff */\nexport const MATCHED = 1 << 1;\n\n/** Reset all mode flags */\nexport const RESET_MODE = ~(MODE_HYDRATE | MODE_SUSPENDED);\n\nexport const SVG_NAMESPACE = 'http://www.w3.org/2000/svg';\nexport const XHTML_NAMESPACE = 'http://www.w3.org/1999/xhtml';\nexport const MATH_NAMESPACE = 'http://www.w3.org/1998/Math/MathML';\n\nexport const NULL = null;\nexport const UNDEFINED = undefined;\nexport const EMPTY_OBJ = /** @type {any} */ ({});\nexport const EMPTY_ARR = [];\nexport const IS_NON_DIMENSIONAL =\n\t/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;\n", "import { options, Fragment } from 'preact';\nimport { encodeEntities } from './utils';\nimport { IS_NON_DIMENSIONAL } from '../../src/constants';\n\nlet vnodeId = 0;\n\nconst isArray = Array.isArray;\n\n/**\n * @fileoverview\n * This file exports various methods that implement Babel's \"automatic\" JSX runtime API:\n * - jsx(type, props, key)\n * - jsxs(type, props, key)\n * - jsxDEV(type, props, key, __source, __self)\n *\n * The implementation of createVNode here is optimized for performance.\n * Benchmarks: https://esbench.com/bench/5f6b54a0b4632100a7dcd2b3\n */\n\n/**\n * JSX.Element factory used by Babel's {runtime:\"automatic\"} JSX transform\n * @param {VNode['type']} type\n * @param {VNode['props']} props\n * @param {VNode['key']} [key]\n * @param {unknown} [isStaticChildren]\n * @param {unknown} [__source]\n * @param {unknown} [__self]\n */\nfunction createVNode(type, props, key, isStaticChildren, __source, __self) {\n\tif (!props) props = {};\n\t// We'll want to preserve `ref` in props to get rid of the need for\n\t// forwardRef components in the future, but that should happen via\n\t// a separate PR.\n\tlet normalizedProps = props,\n\t\tref,\n\t\ti;\n\n\tif ('ref' in normalizedProps) {\n\t\tnormalizedProps = {};\n\t\tfor (i in props) {\n\t\t\tif (i == 'ref') {\n\t\t\t\tref = props[i];\n\t\t\t} else {\n\t\t\t\tnormalizedProps[i] = props[i];\n\t\t\t}\n\t\t}\n\t}\n\n\t/** @type {VNode & { __source: any; __self: any }} */\n\tconst vnode = {\n\t\ttype,\n\t\tprops: normalizedProps,\n\t\tkey,\n\t\tref,\n\t\t_children: null,\n\t\t_parent: null,\n\t\t_depth: 0,\n\t\t_dom: null,\n\t\t_component: null,\n\t\tconstructor: undefined,\n\t\t_original: --vnodeId,\n\t\t_index: -1,\n\t\t_flags: 0,\n\t\t__source,\n\t\t__self\n\t};\n\n\t// If a Component VNode, check for and apply defaultProps.\n\t// Note: `type` is often a String, and can be `undefined` in development.\n\tif (typeof type === 'function' && (ref = type.defaultProps)) {\n\t\tfor (i in ref)\n\t\t\tif (normalizedProps[i] === undefined) {\n\t\t\t\tnormalizedProps[i] = ref[i];\n\t\t\t}\n\t}\n\n\tif (options.vnode) options.vnode(vnode);\n\treturn vnode;\n}\n\n/**\n * Create a template vnode. This function is not expected to be\n * used directly, but rather through a precompile JSX transform\n * @param {string[]} templates\n * @param  {Array<string | null | VNode>} exprs\n * @returns {VNode}\n */\nfunction jsxTemplate(templates, ...exprs) {\n\tconst vnode = createVNode(Fragment, { tpl: templates, exprs });\n\t// Bypass render to string top level Fragment optimization\n\tvnode.key = vnode._vnode;\n\treturn vnode;\n}\n\nconst JS_TO_CSS = {};\nconst CSS_REGEX = /[A-Z]/g;\n\n/**\n * Unwrap potential signals.\n * @param {*} value\n * @returns {*}\n */\nfunction normalizeAttrValue(value) {\n\treturn value !== null &&\n\t\ttypeof value === 'object' &&\n\t\ttypeof value.valueOf === 'function'\n\t\t? value.valueOf()\n\t\t: value;\n}\n\n/**\n * Serialize an HTML attribute to a string. This function is not\n * expected to be used directly, but rather through a precompile\n * JSX transform\n * @param {string} name The attribute name\n * @param {*} value The attribute value\n * @returns {string}\n */\nfunction jsxAttr(name, value) {\n\tif (options.attr) {\n\t\tconst result = options.attr(name, value);\n\t\tif (typeof result === 'string') return result;\n\t}\n\n\tvalue = normalizeAttrValue(value);\n\n\tif (name === 'ref' || name === 'key') return '';\n\tif (name === 'style' && typeof value === 'object') {\n\t\tlet str = '';\n\t\tfor (let prop in value) {\n\t\t\tlet val = value[prop];\n\t\t\tif (val != null && val !== '') {\n\t\t\t\tconst name =\n\t\t\t\t\tprop[0] == '-'\n\t\t\t\t\t\t? prop\n\t\t\t\t\t\t: JS_TO_CSS[prop] ||\n\t\t\t\t\t\t\t(JS_TO_CSS[prop] = prop.replace(CSS_REGEX, '-$&').toLowerCase());\n\n\t\t\t\tlet suffix = ';';\n\t\t\t\tif (\n\t\t\t\t\ttypeof val === 'number' &&\n\t\t\t\t\t// Exclude custom-attributes\n\t\t\t\t\t!name.startsWith('--') &&\n\t\t\t\t\t!IS_NON_DIMENSIONAL.test(name)\n\t\t\t\t) {\n\t\t\t\t\tsuffix = 'px;';\n\t\t\t\t}\n\t\t\t\tstr = str + name + ':' + val + suffix;\n\t\t\t}\n\t\t}\n\t\treturn name + '=\"' + encodeEntities(str) + '\"';\n\t}\n\n\tif (\n\t\tvalue == null ||\n\t\tvalue === false ||\n\t\ttypeof value === 'function' ||\n\t\ttypeof value === 'object'\n\t) {\n\t\treturn '';\n\t} else if (value === true) return name;\n\n\treturn name + '=\"' + encodeEntities('' + value) + '\"';\n}\n\n/**\n * Escape a dynamic child passed to `jsxTemplate`. This function\n * is not expected to be used directly, but rather through a\n * precompile JSX transform\n * @param {*} value\n * @returns {string | null | VNode | Array<string | null | VNode>}\n */\nfunction jsxEscape(value) {\n\tif (\n\t\tvalue == null ||\n\t\ttypeof value === 'boolean' ||\n\t\ttypeof value === 'function'\n\t) {\n\t\treturn null;\n\t}\n\n\tif (typeof value === 'object') {\n\t\t// Check for VNode\n\t\tif (value.constructor === undefined) return value;\n\n\t\tif (isArray(value)) {\n\t\t\tfor (let i = 0; i < value.length; i++) {\n\t\t\t\tvalue[i] = jsxEscape(value[i]);\n\t\t\t}\n\t\t\treturn value;\n\t\t}\n\t}\n\n\treturn encodeEntities('' + value);\n}\n\nexport {\n\tcreateVNode as jsx,\n\tcreateVNode as jsxs,\n\tcreateVNode as jsxDEV,\n\tFragment,\n\t// precompiled JSX transform\n\tjsxTemplate,\n\tjsxAttr,\n\tjsxEscape\n};\n", "import './style.scss';\nimport { useEffect } from 'preact/hooks';\nimport { EnhancedJsonView } from '../../shared/JsonView/EnhancedJsonView';\n\nconst data = {\n\t'updated': new Date().toLocaleDateString(),\n\t'Home': {\n\t\t'Featured': {\n\t\t\t'Look at this': {\n\t\t\t\timage: 'https://auction-site-staging-storage.s3.us-east-2.amazonaws.com/products/72583/Screenshot20250904144307.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAVN3I3QVJQ2HWDYQY%2F20251003%2Fus-east-2%2Fs3%2Faws4_request&X-Amz-Date=20251003T025804Z&X-Amz-Expires=86400&X-Amz-Signature=a34a323c62b6b7b320aa5272b052bfe845a46a426e93356d855d4acb649f4f68&X-Amz-SignedHeaders=host'\n\t\t\t},\n\t\t},\n\t\t'Contact': {\n\t\t\t'Email': 'rw3iss@gmail.com'\n\t\t}\n\t},\n\n\t'Work': {\n\t\t'Latest': {\n\t\t\t'Project Label': {\n\t\t\t\tdate: new Date()\n\t\t\t}\n\t\t},\n\t}\n}\n\nconst HomePage = (props) => {\n\n\t// const jsonWrapper = createRef(undefined);\n\n\t// useEffect(() => {\n\t// \tif (jsonWrapper.current) {\n\t// \t\tconst jsonView = new JsonView(data, jsonWrapper.current as HTMLElement, {\n\t// \t\t\texpandObjs: [/children/, /children\\/(.*)/, /entry/]\n\t// \t\t});\n\t// \t}\n\t// }, [jsonWrapper.current])\n\n\treturn (\n\t\t<div className=\"page\" id=\"home\">\n\n\t\t\t<div className=\"json-wrapper\" ref={dom => {\n\t\t\t\tif (dom) {\n\t\t\t\t\tconsole.log(`new json view`)\n\t\t\t\t\tconst jsonView = new EnhancedJsonView(data, dom, {\n\t\t\t\t\t\texpandObjs: [/children/, /children\\/(.*)/, /entry/, 'Home']\n\t\t\t\t\t});\n\t\t\t\t\treturn () => { } // unmounted, cleanup?\n\t\t\t\t}\n\t\t\t}} />\n\n\t\t\t{/* <EntryList entries={entries} /> */}\n\n\t\t</div>\n\t);\n};\n\nexport default HomePage; ", "import * as jsondiffpatch from 'jsondiffpatch';\nimport { isValidEmail, isValidUrl } from '../../../lib/utils/StrUtils';\n\ntype JsonViewOptions = {\n\texpandAll?: boolean;\n\texpandObjs?: Array<string | RegExp>;\n\tuseViewState?: boolean;\n};\n\nconst DEFAULT_OPTIONS = () => ({\n\texpandAll: false,\n\texpandObjects: [],\n\tuseViewState: true\n});\n\nexport class EnhancedJsonView {\n\tprivate json: any;\n\tprivate parentContainer: HTMLElement;\n\tprivate options: JsonViewOptions;\n\tprivate viewStates = {}; // viewstate tree for retaining view during state updates\n\n\tconstructor(json: any, parentContainer: HTMLElement, options?: JsonViewOptions) {\n\t\tthis.json = json;\n\t\tthis.parentContainer = parentContainer;\n\t\tthis.options = Object.assign({}, DEFAULT_OPTIONS(), options || {});\n\t\tthis.render();\n\t}\n\n\tprivate render(): void {\n\t\tthis.parentContainer.innerHTML = ''; // Clear existing content\n\t\tconst rootNode = this.drawJsonNode(this.json);\n\t\tthis.parentContainer.classList.add('json-view');\n\t\tthis.parentContainer.appendChild(rootNode);\n\t}\n\n\tprivate toggleSection(childNode, keyPath, toggleButton): void {\n\t\tconst isCollapsed = childNode.classList.contains('collapsed');\n\t\tchildNode.classList.toggle('collapsed', !isCollapsed);\n\t\tthis.viewStates[keyPath] = !isCollapsed;\n\t\ttoggleButton.textContent = isCollapsed ? '[-]' : '[+]';\n\t}\n\n\t// only redraws changed nodes\n\tprivate drawJsonNode(jsonObj: any, currPath: string = ''): HTMLElement {\n\t\tconst nodeContainer = document.createElement('div');\n\t\tnodeContainer.classList.add('json-node');\n\n\t\tconst propertiesContainer = document.createElement('div');\n\t\tpropertiesContainer.classList.add('json-properties');\n\n\t\tfor (const key in jsonObj) {\n\t\t\tif (Object.prototype.hasOwnProperty.call(jsonObj, key)) {\n\t\t\t\tconst keyPath = `${currPath}${key}`;\n\t\t\t\tconst propertyRow = document.createElement('div');\n\t\t\t\tpropertyRow.classList.add('json-property');\n\t\t\t\tpropertyRow.setAttribute('data-path', keyPath);\n\n\t\t\t\tconst label = document.createElement('span');\n\t\t\t\tlabel.classList.add('json-key');\n\t\t\t\tlabel.textContent = key + ': ';\n\n\t\t\t\tconst valueContainer = document.createElement('div');\n\t\t\t\tvalueContainer.classList.add('json-value');\n\n\t\t\t\tconst value = jsonObj[key];\n\t\t\t\tconst isObject = typeof value === 'object' && value !== null;\n\t\t\t\tconst isArray = Array.isArray(value);\n\t\t\t\t//console.log(`value:`, value, 'obj?', isObject, 'array?', isArray);\n\n\t\t\t\tif (value instanceof Date) {\n\t\t\t\t\tvalueContainer.textContent = value.toLocaleDateString();\n\t\t\t\t} else if (isObject) {\n\t\t\t\t\tpropertyRow.classList.add('object');\n\n\t\t\t\t\tif (isArray) label.textContent = `${key} (${value.length})`;\n\t\t\t\t\telse label.textContent = key;\n\n\t\t\t\t\tconst hasChildren = isArray && value.length > 0 ? true : Object.keys(value).length > 0;\n\t\t\t\t\tconst toggleButton = document.createElement('button');\n\t\t\t\t\ttoggleButton.classList.add('json-toggle');\n\n\t\t\t\t\t// Recursive call to render child object\n\t\t\t\t\tconst childNode = this.drawJsonNode(value, keyPath + '/');\n\t\t\t\t\t//console.log(`KP`, keyPath)\n\n\t\t\t\t\tif (this.options.expandAll) {\n\t\t\t\t\t\ttoggleButton.textContent = '[-]';\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlet expand = false;\n\t\t\t\t\t\t// expand empty objects by default:\n\t\t\t\t\t\tif (isArray && hasChildren) {\n\t\t\t\t\t\t\t//console.log(`no children`, keyPath)\n\t\t\t\t\t\t\texpand = true;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.options.expandObjs?.forEach((e) => {\n\t\t\t\t\t\t\t\tif (new RegExp(e).test(keyPath)) expand = true;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// if a viewstate exists use that always:\n\t\t\t\t\t\tif (this.options.useViewState) {\n\t\t\t\t\t\t\tif (typeof this.viewStates[keyPath] != 'undefined') expand = !this.viewStates[keyPath];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (expand) {\n\t\t\t\t\t\t\ttoggleButton.textContent = '[-]';\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\ttoggleButton.textContent = '[+]';\n\t\t\t\t\t\t\tchildNode.classList.add('collapsed'); // Start collapsed\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Toggle function for expanding/collapsing\n\t\t\t\t\t// toggleButton.onclick = () => {\n\t\t\t\t\t// \tthis.toggleSection(childNode, keyPath, toggleButton);\n\t\t\t\t\t// };\n\n\t\t\t\t\tlabel.onclick = () => {\n\t\t\t\t\t\tthis.toggleSection(childNode, keyPath, toggleButton);\n\t\t\t\t\t};\n\n\t\t\t\t\tlabel.appendChild(toggleButton);\n\n\t\t\t\t\t//propertyRow.appendChild(toggleButton);\n\t\t\t\t\tvalueContainer.appendChild(childNode);\n\t\t\t\t} else {\n\t\t\t\t\t// todo: if link, render a link...\n\t\t\t\t\tif (key == 'image') {\n\t\t\t\t\t\tvalueContainer.classList.add('image');\n\t\t\t\t\t\tvalueContainer.innerHTML = `<a target=\"_blank\" href=\"${value}\"><img src=\"${value}\"/></a>`;\n\t\t\t\t\t} else if (isValidEmail(value)) {\n\t\t\t\t\t\tvalueContainer.classList.add('email');\n\t\t\t\t\t\tvalueContainer.innerHTML = `<a href=\"mailto:r${value}\">${value}</a>`;\n\t\t\t\t\t} else if (isValidUrl(value)) {\n\t\t\t\t\t\tvalueContainer.classList.add('link');\n\t\t\t\t\t\tvalueContainer.innerHTML = `<a href=\"${value}\">${value}</a>`;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvalueContainer.textContent = String(value);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (key != 'image') propertyRow.appendChild(label);\n\t\t\t\tpropertyRow.appendChild(valueContainer);\n\t\t\t\tpropertiesContainer.appendChild(propertyRow);\n\t\t\t}\n\t\t}\n\n\t\tnodeContainer.appendChild(propertiesContainer);\n\t\treturn nodeContainer;\n\t}\n\n\tpublic updateJson(newJson: any): void {\n\t\tconst delta = jsondiffpatch.diff(this.json, newJson);\n\t\t//console.log(`json delta`, delta)\n\t\tjsondiffpatch.patch(this.json, delta);\n\t\t//this.json = newJson;\n\t\t// todo: only render changed nodes... how? use data-path=\"\" for each node?\n\t\t// ... could keep track of each path in a viewstate... during render... restore viewstate...\n\n\t\tthis.render();\n\t}\n}\n", "import dateReviver from \"./date-reviver.js\";\nimport DiffPatcher from \"./diffpatcher.js\";\nexport { DiffPatcher, dateReviver };\nexport function create(options) {\n    return new DiffPatcher(options);\n}\nlet defaultInstance;\nexport function diff(left, right) {\n    if (!defaultInstance) {\n        defaultInstance = new DiffPatcher();\n    }\n    return defaultInstance.diff(left, right);\n}\nexport function patch(left, delta) {\n    if (!defaultInstance) {\n        defaultInstance = new DiffPatcher();\n    }\n    return defaultInstance.patch(left, delta);\n}\nexport function unpatch(right, delta) {\n    if (!defaultInstance) {\n        defaultInstance = new DiffPatcher();\n    }\n    return defaultInstance.unpatch(right, delta);\n}\nexport function reverse(delta) {\n    if (!defaultInstance) {\n        defaultInstance = new DiffPatcher();\n    }\n    return defaultInstance.reverse(delta);\n}\nexport function clone(value) {\n    if (!defaultInstance) {\n        defaultInstance = new DiffPatcher();\n    }\n    return defaultInstance.clone(value);\n}\n", "import clone from \"./clone.js\";\nimport DiffContext from \"./contexts/diff.js\";\nimport PatchContext from \"./contexts/patch.js\";\nimport ReverseContext from \"./contexts/reverse.js\";\nimport Pipe from \"./pipe.js\";\nimport Processor from \"./processor.js\";\nimport * as arrays from \"./filters/arrays.js\";\nimport * as dates from \"./filters/dates.js\";\nimport * as nested from \"./filters/nested.js\";\nimport * as texts from \"./filters/texts.js\";\nimport * as trivial from \"./filters/trivial.js\";\nclass DiffPatcher {\n    constructor(options) {\n        this.processor = new Processor(options);\n        this.processor.pipe(new Pipe(\"diff\")\n            .append(nested.collectChildrenDiffFilter, trivial.diffFilter, dates.diffFilter, texts.diffFilter, nested.objectsDiffFilter, arrays.diffFilter)\n            .shouldHaveResult());\n        this.processor.pipe(new Pipe(\"patch\")\n            .append(nested.collectChildrenPatchFilter, arrays.collectChildrenPatchFilter, trivial.patchFilter, texts.patchFilter, nested.patchFilter, arrays.patchFilter)\n            .shouldHaveResult());\n        this.processor.pipe(new Pipe(\"reverse\")\n            .append(nested.collectChildrenReverseFilter, arrays.collectChildrenReverseFilter, trivial.reverseFilter, texts.reverseFilter, nested.reverseFilter, arrays.reverseFilter)\n            .shouldHaveResult());\n    }\n    options(options) {\n        return this.processor.options(options);\n    }\n    diff(left, right) {\n        return this.processor.process(new DiffContext(left, right));\n    }\n    patch(left, delta) {\n        return this.processor.process(new PatchContext(left, delta));\n    }\n    reverse(delta) {\n        return this.processor.process(new ReverseContext(delta));\n    }\n    unpatch(right, delta) {\n        return this.patch(right, this.reverse(delta));\n    }\n    clone(value) {\n        return clone(value);\n    }\n}\nexport default DiffPatcher;\n", "function cloneRegExp(re) {\n    var _a;\n    const regexMatch = /^\\/(.*)\\/([gimyu]*)$/.exec(re.toString());\n    if (!regexMatch) {\n        throw new Error(\"Invalid RegExp\");\n    }\n    return new RegExp((_a = regexMatch[1]) !== null && _a !== void 0 ? _a : \"\", regexMatch[2]);\n}\nexport default function clone(arg) {\n    if (typeof arg !== \"object\") {\n        return arg;\n    }\n    if (arg === null) {\n        return null;\n    }\n    if (Array.isArray(arg)) {\n        return arg.map(clone);\n    }\n    if (arg instanceof Date) {\n        return new Date(arg.getTime());\n    }\n    if (arg instanceof RegExp) {\n        return cloneRegExp(arg);\n    }\n    const cloned = {};\n    for (const name in arg) {\n        if (Object.prototype.hasOwnProperty.call(arg, name)) {\n            cloned[name] = clone(arg[name]);\n        }\n    }\n    return cloned;\n}\n", "import defaultClone from \"../clone.js\";\nimport Context from \"./context.js\";\nclass DiffContext extends Context {\n    constructor(left, right) {\n        super();\n        this.left = left;\n        this.right = right;\n        this.pipe = \"diff\";\n    }\n    prepareDeltaResult(result) {\n        var _a, _b, _c, _d;\n        if (typeof result === \"object\") {\n            if (((_a = this.options) === null || _a === void 0 ? void 0 : _a.omitRemovedValues) &&\n                Array.isArray(result) &&\n                result.length > 1 &&\n                (result.length === 2 || // modified\n                    result[2] === 0 || // deleted\n                    result[2] === 3) // moved\n            ) {\n                // omit the left/old value (this delta will be more compact but irreversible)\n                result[0] = 0;\n            }\n            if ((_b = this.options) === null || _b === void 0 ? void 0 : _b.cloneDiffValues) {\n                const clone = typeof ((_c = this.options) === null || _c === void 0 ? void 0 : _c.cloneDiffValues) === \"function\"\n                    ? (_d = this.options) === null || _d === void 0 ? void 0 : _d.cloneDiffValues\n                    : defaultClone;\n                if (typeof result[0] === \"object\") {\n                    result[0] = clone(result[0]);\n                }\n                if (typeof result[1] === \"object\") {\n                    result[1] = clone(result[1]);\n                }\n            }\n        }\n        return result;\n    }\n    setResult(result) {\n        this.prepareDeltaResult(result);\n        return super.setResult(result);\n    }\n}\nexport default DiffContext;\n", "import { assertNonEmptyArray, lastNonEmpty } from \"../assertions/arrays.js\";\nexport default class Context {\n    setResult(result) {\n        this.result = result;\n        this.hasResult = true;\n        return this;\n    }\n    exit() {\n        this.exiting = true;\n        return this;\n    }\n    push(child, name) {\n        child.parent = this;\n        if (typeof name !== \"undefined\") {\n            child.childName = name;\n        }\n        child.root = this.root || this;\n        child.options = child.options || this.options;\n        if (!this.children) {\n            this.children = [child];\n            this.nextAfterChildren = this.next || null;\n            this.next = child;\n        }\n        else {\n            assertNonEmptyArray(this.children);\n            lastNonEmpty(this.children).next = child;\n            this.children.push(child);\n        }\n        child.next = this;\n        return this;\n    }\n}\n", "export function assertNonEmptyArray(arr, message) {\n    if (arr.length === 0) {\n        throw new Error(message || \"Expected a non-empty array\");\n    }\n}\nexport function assertArrayHasExactly2(arr, message) {\n    if (arr.length !== 2) {\n        throw new Error(message || \"Expected an array with exactly 2 items\");\n    }\n}\nexport function assertArrayHasExactly1(arr, message) {\n    if (arr.length !== 1) {\n        throw new Error(message || \"Expected an array with exactly 1 item\");\n    }\n}\nexport function assertArrayHasAtLeast2(arr, message) {\n    if (arr.length < 2) {\n        throw new Error(message || \"Expected an array with at least 2 items\");\n    }\n}\nexport function isNonEmptyArray(arr) {\n    return arr.length > 0;\n}\nexport function isArrayWithAtLeast2(arr) {\n    return arr.length >= 2;\n}\nexport function isArrayWithAtLeast3(arr) {\n    return arr.length >= 3;\n}\nexport function isArrayWithExactly1(arr) {\n    return arr.length === 1;\n}\nexport function isArrayWithExactly2(arr) {\n    return arr.length === 2;\n}\nexport function isArrayWithExactly3(arr) {\n    return arr.length === 3;\n}\n/**\n * type-safe version of `arr[arr.length - 1]`\n * @param arr a non empty array\n * @returns the last element of the array\n */\nexport const lastNonEmpty = (arr) => arr[arr.length - 1];\n", "import Context from \"./context.js\";\nclass PatchContext extends Context {\n    constructor(left, delta) {\n        super();\n        this.left = left;\n        this.delta = delta;\n        this.pipe = \"patch\";\n    }\n}\nexport default PatchContext;\n", "import Context from \"./context.js\";\nclass ReverseContext extends Context {\n    constructor(delta) {\n        super();\n        this.delta = delta;\n        this.pipe = \"reverse\";\n    }\n}\nexport default ReverseContext;\n", "// eslint-disable-next-line @typescript-eslint/no-explicit-any\nclass Pipe {\n    constructor(name) {\n        this.name = name;\n        this.filters = [];\n    }\n    process(input) {\n        if (!this.processor) {\n            throw new Error(\"add this pipe to a processor before using it\");\n        }\n        const debug = this.debug;\n        const length = this.filters.length;\n        const context = input;\n        for (let index = 0; index < length; index++) {\n            const filter = this.filters[index];\n            if (!filter)\n                continue;\n            if (debug) {\n                this.log(`filter: ${filter.filterName}`);\n            }\n            filter(context);\n            if (typeof context === \"object\" && context.exiting) {\n                context.exiting = false;\n                break;\n            }\n        }\n        if (!context.next && this.resultCheck) {\n            this.resultCheck(context);\n        }\n    }\n    log(msg) {\n        console.log(`[jsondiffpatch] ${this.name} pipe, ${msg}`);\n    }\n    append(...args) {\n        this.filters.push(...args);\n        return this;\n    }\n    prepend(...args) {\n        this.filters.unshift(...args);\n        return this;\n    }\n    indexOf(filterName) {\n        if (!filterName) {\n            throw new Error(\"a filter name is required\");\n        }\n        for (let index = 0; index < this.filters.length; index++) {\n            const filter = this.filters[index];\n            if ((filter === null || filter === void 0 ? void 0 : filter.filterName) === filterName) {\n                return index;\n            }\n        }\n        throw new Error(`filter not found: ${filterName}`);\n    }\n    list() {\n        return this.filters.map((f) => f.filterName);\n    }\n    after(filterName, ...params) {\n        const index = this.indexOf(filterName);\n        this.filters.splice(index + 1, 0, ...params);\n        return this;\n    }\n    before(filterName, ...params) {\n        const index = this.indexOf(filterName);\n        this.filters.splice(index, 0, ...params);\n        return this;\n    }\n    replace(filterName, ...params) {\n        const index = this.indexOf(filterName);\n        this.filters.splice(index, 1, ...params);\n        return this;\n    }\n    remove(filterName) {\n        const index = this.indexOf(filterName);\n        this.filters.splice(index, 1);\n        return this;\n    }\n    clear() {\n        this.filters.length = 0;\n        return this;\n    }\n    shouldHaveResult(should) {\n        if (should === false) {\n            this.resultCheck = null;\n            return this;\n        }\n        if (this.resultCheck) {\n            return this;\n        }\n        this.resultCheck = (context) => {\n            if (!context.hasResult) {\n                console.log(context);\n                const error = new Error(`${this.name} failed`);\n                error.noResult = true;\n                throw error;\n            }\n        };\n        return this;\n    }\n}\nexport default Pipe;\n", "class Processor {\n    constructor(options) {\n        this.selfOptions = options || {};\n        this.pipes = {};\n    }\n    options(options) {\n        if (options) {\n            this.selfOptions = options;\n        }\n        return this.selfOptions;\n    }\n    pipe(name, pipeArg) {\n        let pipe = pipeArg;\n        if (typeof name === \"string\") {\n            if (typeof pipe === \"undefined\") {\n                return this.pipes[name];\n            }\n            this.pipes[name] = pipe;\n        }\n        if (name && name.name) {\n            pipe = name;\n            if (pipe.processor === this) {\n                return pipe;\n            }\n            this.pipes[pipe.name] = pipe;\n        }\n        if (!pipe) {\n            throw new Error(`pipe is not defined: ${name}`);\n        }\n        pipe.processor = this;\n        return pipe;\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    process(input, pipe) {\n        let context = input;\n        context.options = this.options();\n        let nextPipe = pipe || input.pipe || \"default\";\n        let lastPipe = undefined;\n        while (nextPipe) {\n            if (typeof context.nextAfterChildren !== \"undefined\") {\n                // children processed and coming back to parent\n                context.next = context.nextAfterChildren;\n                context.nextAfterChildren = null;\n            }\n            if (typeof nextPipe === \"string\") {\n                nextPipe = this.pipe(nextPipe);\n            }\n            nextPipe.process(context);\n            lastPipe = nextPipe;\n            nextPipe = null;\n            if (context) {\n                if (context.next) {\n                    context = context.next;\n                    nextPipe = context.pipe || lastPipe;\n                }\n            }\n        }\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-return\n        return context.hasResult ? context.result : undefined;\n    }\n}\nexport default Processor;\n", "import DiffContext from \"../contexts/diff.js\";\nimport PatchContext from \"../contexts/patch.js\";\nimport ReverseContext from \"../contexts/reverse.js\";\nimport lcs from \"./lcs.js\";\nconst ARRAY_MOVE = 3;\nfunction arraysHaveMatchByRef(array1, array2, len1, len2) {\n    for (let index1 = 0; index1 < len1; index1++) {\n        const val1 = array1[index1];\n        for (let index2 = 0; index2 < len2; index2++) {\n            const val2 = array2[index2];\n            if (index1 !== index2 && val1 === val2) {\n                return true;\n            }\n        }\n    }\n    return false;\n}\nfunction matchItems(array1, array2, index1, index2, context) {\n    const value1 = array1[index1];\n    const value2 = array2[index2];\n    if (value1 === value2) {\n        return true;\n    }\n    if (typeof value1 !== \"object\" || typeof value2 !== \"object\") {\n        return false;\n    }\n    const objectHash = context.objectHash;\n    if (!objectHash) {\n        // no way to match objects was provided, try match by position\n        return context.matchByPosition && index1 === index2;\n    }\n    context.hashCache1 = context.hashCache1 || [];\n    let hash1 = context.hashCache1[index1];\n    if (typeof hash1 === \"undefined\") {\n        context.hashCache1[index1] = hash1 = objectHash(value1, index1);\n    }\n    if (typeof hash1 === \"undefined\") {\n        return false;\n    }\n    context.hashCache2 = context.hashCache2 || [];\n    let hash2 = context.hashCache2[index2];\n    if (typeof hash2 === \"undefined\") {\n        context.hashCache2[index2] = hash2 = objectHash(value2, index2);\n    }\n    if (typeof hash2 === \"undefined\") {\n        return false;\n    }\n    return hash1 === hash2;\n}\nexport const diffFilter = function arraysDiffFilter(context) {\n    var _a, _b, _c, _d, _e;\n    if (!context.leftIsArray) {\n        return;\n    }\n    const matchContext = {\n        objectHash: (_a = context.options) === null || _a === void 0 ? void 0 : _a.objectHash,\n        matchByPosition: (_b = context.options) === null || _b === void 0 ? void 0 : _b.matchByPosition,\n    };\n    let commonHead = 0;\n    let commonTail = 0;\n    let index;\n    let index1;\n    let index2;\n    const array1 = context.left;\n    const array2 = context.right;\n    const len1 = array1.length;\n    const len2 = array2.length;\n    let child;\n    if (len1 > 0 &&\n        len2 > 0 &&\n        !matchContext.objectHash &&\n        typeof matchContext.matchByPosition !== \"boolean\") {\n        matchContext.matchByPosition = !arraysHaveMatchByRef(array1, array2, len1, len2);\n    }\n    // separate common head\n    while (commonHead < len1 &&\n        commonHead < len2 &&\n        matchItems(array1, array2, commonHead, commonHead, matchContext)) {\n        index = commonHead;\n        child = new DiffContext(array1[index], array2[index]);\n        context.push(child, index);\n        commonHead++;\n    }\n    // separate common tail\n    while (commonTail + commonHead < len1 &&\n        commonTail + commonHead < len2 &&\n        matchItems(array1, array2, len1 - 1 - commonTail, len2 - 1 - commonTail, matchContext)) {\n        index1 = len1 - 1 - commonTail;\n        index2 = len2 - 1 - commonTail;\n        child = new DiffContext(array1[index1], array2[index2]);\n        context.push(child, index2);\n        commonTail++;\n    }\n    let result;\n    if (commonHead + commonTail === len1) {\n        if (len1 === len2) {\n            // arrays are identical\n            context.setResult(undefined).exit();\n            return;\n        }\n        // trivial case, a block (1 or more consecutive items) was added\n        result = result || {\n            _t: \"a\",\n        };\n        for (index = commonHead; index < len2 - commonTail; index++) {\n            result[index] = [array2[index]];\n            context.prepareDeltaResult(result[index]);\n        }\n        context.setResult(result).exit();\n        return;\n    }\n    if (commonHead + commonTail === len2) {\n        // trivial case, a block (1 or more consecutive items) was removed\n        result = result || {\n            _t: \"a\",\n        };\n        for (index = commonHead; index < len1 - commonTail; index++) {\n            const key = `_${index}`;\n            result[key] = [array1[index], 0, 0];\n            context.prepareDeltaResult(result[key]);\n        }\n        context.setResult(result).exit();\n        return;\n    }\n    // reset hash cache\n    matchContext.hashCache1 = undefined;\n    matchContext.hashCache2 = undefined;\n    // diff is not trivial, find the LCS (Longest Common Subsequence)\n    const trimmed1 = array1.slice(commonHead, len1 - commonTail);\n    const trimmed2 = array2.slice(commonHead, len2 - commonTail);\n    const seq = lcs.get(trimmed1, trimmed2, matchItems, matchContext);\n    const removedItems = [];\n    result = result || {\n        _t: \"a\",\n    };\n    for (index = commonHead; index < len1 - commonTail; index++) {\n        if (seq.indices1.indexOf(index - commonHead) < 0) {\n            // removed\n            const key = `_${index}`;\n            result[key] = [array1[index], 0, 0];\n            context.prepareDeltaResult(result[key]);\n            removedItems.push(index);\n        }\n    }\n    let detectMove = true;\n    if (((_c = context.options) === null || _c === void 0 ? void 0 : _c.arrays) && context.options.arrays.detectMove === false) {\n        detectMove = false;\n    }\n    let includeValueOnMove = false;\n    if ((_e = (_d = context.options) === null || _d === void 0 ? void 0 : _d.arrays) === null || _e === void 0 ? void 0 : _e.includeValueOnMove) {\n        includeValueOnMove = true;\n    }\n    const removedItemsLength = removedItems.length;\n    for (index = commonHead; index < len2 - commonTail; index++) {\n        const indexOnArray2 = seq.indices2.indexOf(index - commonHead);\n        if (indexOnArray2 < 0) {\n            // added, try to match with a removed item and register as position move\n            let isMove = false;\n            if (detectMove && removedItemsLength > 0) {\n                for (let removeItemIndex1 = 0; removeItemIndex1 < removedItemsLength; removeItemIndex1++) {\n                    index1 = removedItems[removeItemIndex1];\n                    const resultItem = index1 === undefined ? undefined : result[`_${index1}`];\n                    if (index1 !== undefined &&\n                        resultItem &&\n                        matchItems(trimmed1, trimmed2, index1 - commonHead, index - commonHead, matchContext)) {\n                        // store position move as: [originalValue, newPosition, ARRAY_MOVE]\n                        resultItem.splice(1, 2, index, ARRAY_MOVE);\n                        resultItem.splice(1, 2, index, ARRAY_MOVE);\n                        if (!includeValueOnMove) {\n                            // don't include moved value on diff, to save bytes\n                            resultItem[0] = \"\";\n                        }\n                        index2 = index;\n                        child = new DiffContext(array1[index1], array2[index2]);\n                        context.push(child, index2);\n                        removedItems.splice(removeItemIndex1, 1);\n                        isMove = true;\n                        break;\n                    }\n                }\n            }\n            if (!isMove) {\n                // added\n                result[index] = [array2[index]];\n                context.prepareDeltaResult(result[index]);\n            }\n        }\n        else {\n            // match, do inner diff\n            if (seq.indices1[indexOnArray2] === undefined) {\n                throw new Error(`Invalid indexOnArray2: ${indexOnArray2}, seq.indices1: ${seq.indices1}`);\n            }\n            index1 = seq.indices1[indexOnArray2] + commonHead;\n            if (seq.indices2[indexOnArray2] === undefined) {\n                throw new Error(`Invalid indexOnArray2: ${indexOnArray2}, seq.indices2: ${seq.indices2}`);\n            }\n            index2 = seq.indices2[indexOnArray2] + commonHead;\n            child = new DiffContext(array1[index1], array2[index2]);\n            context.push(child, index2);\n        }\n    }\n    context.setResult(result).exit();\n};\ndiffFilter.filterName = \"arrays\";\nconst compare = {\n    numerically(a, b) {\n        return a - b;\n    },\n    numericallyBy(name) {\n        return (a, b) => a[name] - b[name];\n    },\n};\nexport const patchFilter = function nestedPatchFilter(context) {\n    var _a;\n    if (!context.nested) {\n        return;\n    }\n    const nestedDelta = context.delta;\n    if (nestedDelta._t !== \"a\") {\n        return;\n    }\n    let index;\n    let index1;\n    const delta = nestedDelta;\n    const array = context.left;\n    // first, separate removals, insertions and modifications\n    let toRemove = [];\n    let toInsert = [];\n    const toModify = [];\n    for (index in delta) {\n        if (index !== \"_t\") {\n            if (index[0] === \"_\") {\n                const removedOrMovedIndex = index;\n                // removed item from original array\n                if (delta[removedOrMovedIndex] !== undefined &&\n                    (delta[removedOrMovedIndex][2] === 0 ||\n                        delta[removedOrMovedIndex][2] === ARRAY_MOVE)) {\n                    toRemove.push(Number.parseInt(index.slice(1), 10));\n                }\n                else {\n                    throw new Error(`only removal or move can be applied at original array indices, invalid diff type: ${(_a = delta[removedOrMovedIndex]) === null || _a === void 0 ? void 0 : _a[2]}`);\n                }\n            }\n            else {\n                const numberIndex = index;\n                if (delta[numberIndex].length === 1) {\n                    // added item at new array\n                    toInsert.push({\n                        index: Number.parseInt(numberIndex, 10),\n                        value: delta[numberIndex][0],\n                    });\n                }\n                else {\n                    // modified item at new array\n                    toModify.push({\n                        index: Number.parseInt(numberIndex, 10),\n                        delta: delta[numberIndex],\n                    });\n                }\n            }\n        }\n    }\n    // remove items, in reverse order to avoid sawing our own floor\n    toRemove = toRemove.sort(compare.numerically);\n    for (index = toRemove.length - 1; index >= 0; index--) {\n        index1 = toRemove[index];\n        if (index1 === undefined)\n            continue;\n        const indexDiff = delta[`_${index1}`];\n        const removedValue = array.splice(index1, 1)[0];\n        if ((indexDiff === null || indexDiff === void 0 ? void 0 : indexDiff[2]) === ARRAY_MOVE) {\n            // reinsert later\n            toInsert.push({\n                index: indexDiff[1],\n                value: removedValue,\n            });\n        }\n    }\n    // insert items, in reverse order to avoid moving our own floor\n    toInsert = toInsert.sort(compare.numericallyBy(\"index\"));\n    const toInsertLength = toInsert.length;\n    for (index = 0; index < toInsertLength; index++) {\n        const insertion = toInsert[index];\n        if (insertion === undefined)\n            continue;\n        array.splice(insertion.index, 0, insertion.value);\n    }\n    // apply modifications\n    const toModifyLength = toModify.length;\n    if (toModifyLength > 0) {\n        for (index = 0; index < toModifyLength; index++) {\n            const modification = toModify[index];\n            if (modification === undefined)\n                continue;\n            const child = new PatchContext(array[modification.index], modification.delta);\n            context.push(child, modification.index);\n        }\n    }\n    if (!context.children) {\n        context.setResult(array).exit();\n        return;\n    }\n    context.exit();\n};\npatchFilter.filterName = \"arrays\";\nexport const collectChildrenPatchFilter = function collectChildrenPatchFilter(context) {\n    if (!context || !context.children) {\n        return;\n    }\n    const deltaWithChildren = context.delta;\n    if (deltaWithChildren._t !== \"a\") {\n        return;\n    }\n    const array = context.left;\n    const length = context.children.length;\n    for (let index = 0; index < length; index++) {\n        const child = context.children[index];\n        if (child === undefined)\n            continue;\n        const arrayIndex = child.childName;\n        array[arrayIndex] = child.result;\n    }\n    context.setResult(array).exit();\n};\ncollectChildrenPatchFilter.filterName = \"arraysCollectChildren\";\nexport const reverseFilter = function arraysReverseFilter(context) {\n    if (!context.nested) {\n        const nonNestedDelta = context.delta;\n        if (nonNestedDelta[2] === ARRAY_MOVE) {\n            const arrayMoveDelta = nonNestedDelta;\n            context.newName = `_${arrayMoveDelta[1]}`;\n            context\n                .setResult([\n                arrayMoveDelta[0],\n                Number.parseInt(context.childName.substring(1), 10),\n                ARRAY_MOVE,\n            ])\n                .exit();\n        }\n        return;\n    }\n    const nestedDelta = context.delta;\n    if (nestedDelta._t !== \"a\") {\n        return;\n    }\n    const arrayDelta = nestedDelta;\n    for (const name in arrayDelta) {\n        if (name === \"_t\") {\n            continue;\n        }\n        const child = new ReverseContext(arrayDelta[name]);\n        context.push(child, name);\n    }\n    context.exit();\n};\nreverseFilter.filterName = \"arrays\";\nconst reverseArrayDeltaIndex = (delta, index, itemDelta) => {\n    if (typeof index === \"string\" && index[0] === \"_\") {\n        return Number.parseInt(index.substring(1), 10);\n    }\n    if (Array.isArray(itemDelta) && itemDelta[2] === 0) {\n        return `_${index}`;\n    }\n    let reverseIndex = +index;\n    for (const deltaIndex in delta) {\n        const deltaItem = delta[deltaIndex];\n        if (Array.isArray(deltaItem)) {\n            if (deltaItem[2] === ARRAY_MOVE) {\n                const moveFromIndex = Number.parseInt(deltaIndex.substring(1), 10);\n                const moveToIndex = deltaItem[1];\n                if (moveToIndex === +index) {\n                    return moveFromIndex;\n                }\n                if (moveFromIndex <= reverseIndex && moveToIndex > reverseIndex) {\n                    reverseIndex++;\n                }\n                else if (moveFromIndex >= reverseIndex &&\n                    moveToIndex < reverseIndex) {\n                    reverseIndex--;\n                }\n            }\n            else if (deltaItem[2] === 0) {\n                const deleteIndex = Number.parseInt(deltaIndex.substring(1), 10);\n                if (deleteIndex <= reverseIndex) {\n                    reverseIndex++;\n                }\n            }\n            else if (deltaItem.length === 1 &&\n                Number.parseInt(deltaIndex, 10) <= reverseIndex) {\n                reverseIndex--;\n            }\n        }\n    }\n    return reverseIndex;\n};\nexport const collectChildrenReverseFilter = (context) => {\n    if (!context || !context.children) {\n        return;\n    }\n    const deltaWithChildren = context.delta;\n    if (deltaWithChildren._t !== \"a\") {\n        return;\n    }\n    const arrayDelta = deltaWithChildren;\n    const length = context.children.length;\n    const delta = {\n        _t: \"a\",\n    };\n    for (let index = 0; index < length; index++) {\n        const child = context.children[index];\n        if (child === undefined)\n            continue;\n        let name = child.newName;\n        if (typeof name === \"undefined\") {\n            if (child.childName === undefined) {\n                throw new Error(\"child.childName is undefined\");\n            }\n            name = reverseArrayDeltaIndex(arrayDelta, child.childName, child.result);\n        }\n        if (delta[name] !== child.result) {\n            // There's no way to type this well.\n            delta[name] = child.result;\n        }\n    }\n    context.setResult(delta).exit();\n};\ncollectChildrenReverseFilter.filterName = \"arraysCollectChildren\";\n", "/*\n\nLCS implementation that supports arrays or strings\n\nreference: http://en.wikipedia.org/wiki/Longest_common_subsequence_problem\n\n*/\nconst defaultMatch = (array1, array2, index1, index2) => array1[index1] === array2[index2];\nconst lengthMatrix = (array1, array2, match, context) => {\n    var _a, _b, _c;\n    const len1 = array1.length;\n    const len2 = array2.length;\n    let x;\n    let y;\n    // initialize empty matrix of len1+1 x len2+1\n    const matrix = new Array(len1 + 1);\n    for (x = 0; x < len1 + 1; x++) {\n        const matrixNewRow = new Array(len2 + 1);\n        for (y = 0; y < len2 + 1; y++) {\n            matrixNewRow[y] = 0;\n        }\n        matrix[x] = matrixNewRow;\n    }\n    matrix.match = match;\n    // save sequence lengths for each coordinate\n    for (x = 1; x < len1 + 1; x++) {\n        const matrixRowX = matrix[x];\n        if (matrixRowX === undefined) {\n            throw new Error(\"LCS matrix row is undefined\");\n        }\n        const matrixRowBeforeX = matrix[x - 1];\n        if (matrixRowBeforeX === undefined) {\n            throw new Error(\"LCS matrix row is undefined\");\n        }\n        for (y = 1; y < len2 + 1; y++) {\n            if (match(array1, array2, x - 1, y - 1, context)) {\n                matrixRowX[y] = ((_a = matrixRowBeforeX[y - 1]) !== null && _a !== void 0 ? _a : 0) + 1;\n            }\n            else {\n                matrixRowX[y] = Math.max((_b = matrixRowBeforeX[y]) !== null && _b !== void 0 ? _b : 0, (_c = matrixRowX[y - 1]) !== null && _c !== void 0 ? _c : 0);\n            }\n        }\n    }\n    return matrix;\n};\nconst backtrack = (matrix, array1, array2, context) => {\n    let index1 = array1.length;\n    let index2 = array2.length;\n    const subsequence = {\n        sequence: [],\n        indices1: [],\n        indices2: [],\n    };\n    while (index1 !== 0 && index2 !== 0) {\n        if (matrix.match === undefined) {\n            throw new Error(\"LCS matrix match function is undefined\");\n        }\n        const sameLetter = matrix.match(array1, array2, index1 - 1, index2 - 1, context);\n        if (sameLetter) {\n            subsequence.sequence.unshift(array1[index1 - 1]);\n            subsequence.indices1.unshift(index1 - 1);\n            subsequence.indices2.unshift(index2 - 1);\n            --index1;\n            --index2;\n        }\n        else {\n            const matrixRowIndex1 = matrix[index1];\n            if (matrixRowIndex1 === undefined) {\n                throw new Error(\"LCS matrix row is undefined\");\n            }\n            const valueAtMatrixAbove = matrixRowIndex1[index2 - 1];\n            if (valueAtMatrixAbove === undefined) {\n                throw new Error(\"LCS matrix value is undefined\");\n            }\n            const matrixRowBeforeIndex1 = matrix[index1 - 1];\n            if (matrixRowBeforeIndex1 === undefined) {\n                throw new Error(\"LCS matrix row is undefined\");\n            }\n            const valueAtMatrixLeft = matrixRowBeforeIndex1[index2];\n            if (valueAtMatrixLeft === undefined) {\n                throw new Error(\"LCS matrix value is undefined\");\n            }\n            if (valueAtMatrixAbove > valueAtMatrixLeft) {\n                --index2;\n            }\n            else {\n                --index1;\n            }\n        }\n    }\n    return subsequence;\n};\nconst get = (array1, array2, match, context) => {\n    const innerContext = context || {};\n    const matrix = lengthMatrix(array1, array2, match || defaultMatch, innerContext);\n    return backtrack(matrix, array1, array2, innerContext);\n};\nexport default {\n    get,\n};\n", "export const diffFilter = function datesDiffFilter(context) {\n    if (context.left instanceof Date) {\n        if (context.right instanceof Date) {\n            if (context.left.getTime() !== context.right.getTime()) {\n                context.setResult([context.left, context.right]);\n            }\n            else {\n                context.setResult(undefined);\n            }\n        }\n        else {\n            context.setResult([context.left, context.right]);\n        }\n        context.exit();\n    }\n    else if (context.right instanceof Date) {\n        context.setResult([context.left, context.right]).exit();\n    }\n};\ndiffFilter.filterName = \"dates\";\n", "import DiffContext from \"../contexts/diff.js\";\nimport PatchContext from \"../contexts/patch.js\";\nimport ReverseContext from \"../contexts/reverse.js\";\nexport const collectChildrenDiffFilter = (context) => {\n    if (!context || !context.children) {\n        return;\n    }\n    const length = context.children.length;\n    let result = context.result;\n    for (let index = 0; index < length; index++) {\n        const child = context.children[index];\n        if (child === undefined)\n            continue;\n        if (typeof child.result === \"undefined\") {\n            continue;\n        }\n        result = result || {};\n        if (child.childName === undefined) {\n            throw new Error(\"diff child.childName is undefined\");\n        }\n        result[child.childName] = child.result;\n    }\n    if (result && context.leftIsArray) {\n        result._t = \"a\";\n    }\n    context.setResult(result).exit();\n};\ncollectChildrenDiffFilter.filterName = \"collectChildren\";\nexport const objectsDiffFilter = (context) => {\n    var _a;\n    if (context.leftIsArray || context.leftType !== \"object\") {\n        return;\n    }\n    const left = context.left;\n    const right = context.right;\n    const propertyFilter = (_a = context.options) === null || _a === void 0 ? void 0 : _a.propertyFilter;\n    for (const name in left) {\n        if (!Object.prototype.hasOwnProperty.call(left, name)) {\n            continue;\n        }\n        if (propertyFilter && !propertyFilter(name, context)) {\n            continue;\n        }\n        const child = new DiffContext(left[name], right[name]);\n        context.push(child, name);\n    }\n    for (const name in right) {\n        if (!Object.prototype.hasOwnProperty.call(right, name)) {\n            continue;\n        }\n        if (propertyFilter && !propertyFilter(name, context)) {\n            continue;\n        }\n        if (typeof left[name] === \"undefined\") {\n            const child = new DiffContext(undefined, right[name]);\n            context.push(child, name);\n        }\n    }\n    if (!context.children || context.children.length === 0) {\n        context.setResult(undefined).exit();\n        return;\n    }\n    context.exit();\n};\nobjectsDiffFilter.filterName = \"objects\";\nexport const patchFilter = function nestedPatchFilter(context) {\n    if (!context.nested) {\n        return;\n    }\n    const nestedDelta = context.delta;\n    if (nestedDelta._t) {\n        return;\n    }\n    const objectDelta = nestedDelta;\n    for (const name in objectDelta) {\n        const child = new PatchContext(context.left[name], objectDelta[name]);\n        context.push(child, name);\n    }\n    context.exit();\n};\npatchFilter.filterName = \"objects\";\nexport const collectChildrenPatchFilter = function collectChildrenPatchFilter(context) {\n    if (!context || !context.children) {\n        return;\n    }\n    const deltaWithChildren = context.delta;\n    if (deltaWithChildren._t) {\n        return;\n    }\n    const object = context.left;\n    const length = context.children.length;\n    for (let index = 0; index < length; index++) {\n        const child = context.children[index];\n        if (child === undefined)\n            continue;\n        const property = child.childName;\n        if (Object.prototype.hasOwnProperty.call(context.left, property) &&\n            child.result === undefined) {\n            delete object[property];\n        }\n        else if (object[property] !== child.result) {\n            object[property] = child.result;\n        }\n    }\n    context.setResult(object).exit();\n};\ncollectChildrenPatchFilter.filterName = \"collectChildren\";\nexport const reverseFilter = function nestedReverseFilter(context) {\n    if (!context.nested) {\n        return;\n    }\n    const nestedDelta = context.delta;\n    if (nestedDelta._t) {\n        return;\n    }\n    const objectDelta = context.delta;\n    for (const name in objectDelta) {\n        const child = new ReverseContext(objectDelta[name]);\n        context.push(child, name);\n    }\n    context.exit();\n};\nreverseFilter.filterName = \"objects\";\nexport const collectChildrenReverseFilter = (context) => {\n    if (!context || !context.children) {\n        return;\n    }\n    const deltaWithChildren = context.delta;\n    if (deltaWithChildren._t) {\n        return;\n    }\n    const length = context.children.length;\n    const delta = {};\n    for (let index = 0; index < length; index++) {\n        const child = context.children[index];\n        if (child === undefined)\n            continue;\n        const property = child.childName;\n        if (delta[property] !== child.result) {\n            delta[property] = child.result;\n        }\n    }\n    context.setResult(delta).exit();\n};\ncollectChildrenReverseFilter.filterName = \"collectChildren\";\n", "const TEXT_DIFF = 2;\nconst DEFAULT_MIN_LENGTH = 60;\nlet cachedDiffPatch = null;\nfunction getDiffMatchPatch(options, required) {\n    var _a;\n    if (!cachedDiffPatch) {\n        let instance;\n        if ((_a = options === null || options === void 0 ? void 0 : options.textDiff) === null || _a === void 0 ? void 0 : _a.diffMatchPatch) {\n            instance = new options.textDiff.diffMatchPatch();\n        }\n        else {\n            if (!required) {\n                return null;\n            }\n            const error = new Error(\"The diff-match-patch library was not provided. Pass the library in through the options or use the `jsondiffpatch/with-text-diffs` entry-point.\");\n            // eslint-disable-next-line camelcase\n            error.diff_match_patch_not_found = true;\n            throw error;\n        }\n        cachedDiffPatch = {\n            diff: (txt1, txt2) => instance.patch_toText(instance.patch_make(txt1, txt2)),\n            patch: (txt1, patch) => {\n                const results = instance.patch_apply(instance.patch_fromText(patch), txt1);\n                for (const resultOk of results[1]) {\n                    if (!resultOk) {\n                        const error = new Error(\"text patch failed\");\n                        error.textPatchFailed = true;\n                        throw error;\n                    }\n                }\n                return results[0];\n            },\n        };\n    }\n    return cachedDiffPatch;\n}\nexport const diffFilter = function textsDiffFilter(context) {\n    var _a, _b;\n    if (context.leftType !== \"string\") {\n        return;\n    }\n    const left = context.left;\n    const right = context.right;\n    const minLength = ((_b = (_a = context.options) === null || _a === void 0 ? void 0 : _a.textDiff) === null || _b === void 0 ? void 0 : _b.minLength) || DEFAULT_MIN_LENGTH;\n    if (left.length < minLength || right.length < minLength) {\n        context.setResult([left, right]).exit();\n        return;\n    }\n    // large text, try to use a text-diff algorithm\n    const diffMatchPatch = getDiffMatchPatch(context.options);\n    if (!diffMatchPatch) {\n        // diff-match-patch library not available,\n        // fallback to regular string replace\n        context.setResult([left, right]).exit();\n        return;\n    }\n    const diff = diffMatchPatch.diff;\n    context.setResult([diff(left, right), 0, TEXT_DIFF]).exit();\n};\ndiffFilter.filterName = \"texts\";\nexport const patchFilter = function textsPatchFilter(context) {\n    if (context.nested) {\n        return;\n    }\n    const nonNestedDelta = context.delta;\n    if (nonNestedDelta[2] !== TEXT_DIFF) {\n        return;\n    }\n    const textDiffDelta = nonNestedDelta;\n    // text-diff, use a text-patch algorithm\n    const patch = getDiffMatchPatch(context.options, true).patch;\n    context.setResult(patch(context.left, textDiffDelta[0])).exit();\n};\npatchFilter.filterName = \"texts\";\nconst textDeltaReverse = (delta) => {\n    var _a, _b, _c;\n    const headerRegex = /^@@ +-(\\d+),(\\d+) +\\+(\\d+),(\\d+) +@@$/;\n    const lines = delta.split(\"\\n\");\n    for (let i = 0; i < lines.length; i++) {\n        const line = lines[i];\n        if (line === undefined)\n            continue;\n        const lineStart = line.slice(0, 1);\n        if (lineStart === \"@\") {\n            const header = headerRegex.exec(line);\n            if (header !== null) {\n                const lineHeader = i;\n                // fix header\n                lines[lineHeader] =\n                    `@@ -${header[3]},${header[4]} +${header[1]},${header[2]} @@`;\n            }\n        }\n        else if (lineStart === \"+\") {\n            lines[i] = `-${(_a = lines[i]) === null || _a === void 0 ? void 0 : _a.slice(1)}`;\n            if (((_b = lines[i - 1]) === null || _b === void 0 ? void 0 : _b.slice(0, 1)) === \"+\") {\n                // swap lines to keep default order (-+)\n                const lineTmp = lines[i];\n                lines[i] = lines[i - 1];\n                lines[i - 1] = lineTmp;\n            }\n        }\n        else if (lineStart === \"-\") {\n            lines[i] = `+${(_c = lines[i]) === null || _c === void 0 ? void 0 : _c.slice(1)}`;\n        }\n    }\n    return lines.join(\"\\n\");\n};\nexport const reverseFilter = function textsReverseFilter(context) {\n    if (context.nested) {\n        return;\n    }\n    const nonNestedDelta = context.delta;\n    if (nonNestedDelta[2] !== TEXT_DIFF) {\n        return;\n    }\n    const textDiffDelta = nonNestedDelta;\n    // text-diff, use a text-diff algorithm\n    context\n        .setResult([textDeltaReverse(textDiffDelta[0]), 0, TEXT_DIFF])\n        .exit();\n};\nreverseFilter.filterName = \"texts\";\n", "export const diffFilter = function trivialMatchesDiffFilter(context) {\n    if (context.left === context.right) {\n        context.setResult(undefined).exit();\n        return;\n    }\n    if (typeof context.left === \"undefined\") {\n        if (typeof context.right === \"function\") {\n            throw new Error(\"functions are not supported\");\n        }\n        context.setResult([context.right]).exit();\n        return;\n    }\n    if (typeof context.right === \"undefined\") {\n        context.setResult([context.left, 0, 0]).exit();\n        return;\n    }\n    if (typeof context.left === \"function\" ||\n        typeof context.right === \"function\") {\n        throw new Error(\"functions are not supported\");\n    }\n    context.leftType = context.left === null ? \"null\" : typeof context.left;\n    context.rightType = context.right === null ? \"null\" : typeof context.right;\n    if (context.leftType !== context.rightType) {\n        context.setResult([context.left, context.right]).exit();\n        return;\n    }\n    if (context.leftType === \"boolean\" || context.leftType === \"number\") {\n        context.setResult([context.left, context.right]).exit();\n        return;\n    }\n    if (context.leftType === \"object\") {\n        context.leftIsArray = Array.isArray(context.left);\n    }\n    if (context.rightType === \"object\") {\n        context.rightIsArray = Array.isArray(context.right);\n    }\n    if (context.leftIsArray !== context.rightIsArray) {\n        context.setResult([context.left, context.right]).exit();\n        return;\n    }\n    if (context.left instanceof RegExp) {\n        if (context.right instanceof RegExp) {\n            context\n                .setResult([context.left.toString(), context.right.toString()])\n                .exit();\n        }\n        else {\n            context.setResult([context.left, context.right]).exit();\n        }\n    }\n};\ndiffFilter.filterName = \"trivial\";\nexport const patchFilter = function trivialMatchesPatchFilter(context) {\n    if (typeof context.delta === \"undefined\") {\n        context.setResult(context.left).exit();\n        return;\n    }\n    context.nested = !Array.isArray(context.delta);\n    if (context.nested) {\n        return;\n    }\n    const nonNestedDelta = context.delta;\n    if (nonNestedDelta.length === 1) {\n        context.setResult(nonNestedDelta[0]).exit();\n        return;\n    }\n    if (nonNestedDelta.length === 2) {\n        if (context.left instanceof RegExp) {\n            const regexArgs = /^\\/(.*)\\/([gimyu]+)$/.exec(nonNestedDelta[1]);\n            if (regexArgs === null || regexArgs === void 0 ? void 0 : regexArgs[1]) {\n                context.setResult(new RegExp(regexArgs[1], regexArgs[2])).exit();\n                return;\n            }\n        }\n        context.setResult(nonNestedDelta[1]).exit();\n        return;\n    }\n    if (nonNestedDelta.length === 3 && nonNestedDelta[2] === 0) {\n        context.setResult(undefined).exit();\n    }\n};\npatchFilter.filterName = \"trivial\";\nexport const reverseFilter = function trivialReferseFilter(context) {\n    if (typeof context.delta === \"undefined\") {\n        context.setResult(context.delta).exit();\n        return;\n    }\n    context.nested = !Array.isArray(context.delta);\n    if (context.nested) {\n        return;\n    }\n    const nonNestedDelta = context.delta;\n    if (nonNestedDelta.length === 1) {\n        context.setResult([nonNestedDelta[0], 0, 0]).exit();\n        return;\n    }\n    if (nonNestedDelta.length === 2) {\n        context.setResult([nonNestedDelta[1], nonNestedDelta[0]]).exit();\n        return;\n    }\n    if (nonNestedDelta.length === 3 && nonNestedDelta[2] === 0) {\n        context.setResult([nonNestedDelta[0]]).exit();\n    }\n};\nreverseFilter.filterName = \"trivial\";\n", "export const truncate = (str: string, length?: number) => {\n    if (!str) return str;\n    if (length && str.length > length) return (str.slice(0, length) + '...');\n    return str;\n}\n\nexport const isValidEmail = (email: string): boolean => {\n\t// A commonly used regex for email validation\n\tconst emailRegex = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$/;\n\treturn emailRegex.test(email);\n}\n\nexport const isValidUrl = (text: string) => {\n\ttry {\n\t\tnew URL(text);\n\t\treturn true;\n\t} catch (error) {\n\t\treturn false;\n\t}\n}", "import './style.scss';\n\nfunction InfoPage() {\n    return (\n        <div className=\"page\" id=\"info\">\n\n            <h1>Info</h1>\n\n            <div className=\"bio\">\n\n                <div className=\"section\">\n                    E-mail: <a href=\"mailto:rw3iss@gmail.com\">rw3iss@gmail.com</a>\n                </div>\n\n                <div className=\"section\">\n                    Resume: <a href=\"/files/resume-ryan-weiss.pdf\" target=\"_blank\">View</a>\n                </div>\n            </div>\n\n        </div>\n    );\n}\n\nexport default InfoPage;", "import './style.scss';\n\nconst NotFoundPage = (props) => {\n\n    return (\n        <div className=\"page center\" id=\"not-found\">\n            <h4>Page Not Found</h4>\n        </div>\n    );\n};\n\nexport default NotFoundPage;", "import { BlobEditor } from 'components/shared/BlobEditor/BlobEditor';\nimport './style.scss';\n\nconst OtherPage = (props) => {\n\n    // useEffect(() => {\n    //     if (data) console.log(`got App data home`, data);\n    // }, [data])\n\n    return (\n        <div className=\"page\" id=\"entry\">\n\n            <BlobEditor />\n\n        </div>\n    );\n};\n\nexport default OtherPage;\n\n\n// import { renderDate } from 'lib/utils/DateUtils';\n// import { useEntries } from 'lib/DataProvider';\n// import './style.scss';\n\n// const OtherPage = (props) => {\n\n//     const entries = useEntries('other');\n//     //console.log(`other context data`, entries);\n\n//     return (\n//         <div className=\"page\" id=\"other\">\n\n//             <h1>Other</h1>\n\n//             <div className=\"entries\">\n\n//                 {entries && entries.map(e => <div key={e.id} className=\"entry\">\n//                     <div className=\"title\">{e.title}</div>\n//                     <div className=\"date\">{renderDate(e.dateAdded)}</div>\n//                     <div className=\"content\">{e.content}</div>\n//                 </div>)}\n\n//             </div>\n//         </div>\n//     );\n// };\n\n// export default OtherPage;", "import { PastePlugin } from 'components/shared/BlobEditor/plugins/PastePlugin';\nimport { TabPlugin } from 'components/shared/BlobEditor/plugins/TabPlugin';\nimport { ToolbarPlugin } from 'components/shared/BlobEditor/plugins/toolbar/ToolbarPlugin';\nimport { useEffect, useRef, useState } from 'preact/hooks';\nimport { Blob, BlobContent } from 'types/Blob';\nimport { BlobService } from './lib/BlobService'; // Assuming BlobService is in this path\nimport { WEditor } from './lib/WEditor';\nimport { FilePlugin } from './plugins/FilePlugin';\nimport './styles/BlobEditor.scss';\n\ninterface Props {\n    blob?: Blob;\n}\n\nexport const BlobEditor: FunctionComponent<Props> = ({ blob: initialBlob }) => {\n    const [currentBlob, setCurrentBlob] = useState<Blob | null>(initialBlob || null);\n    const editorRef = useRef<WEditor | null>(null);\n    const containerRef = useRef<HTMLDivElement>(null);\n    const blobService = new BlobService();\n\n    useEffect(() => {\n        const initBlob = async () => {\n            if (!initialBlob) {\n                let loadBlob;\n                try {\n                    const blobs = await blobService.listBlobs();\n                    const mostRecentBlob = blobs.reduce((latest, current) =>\n                        !latest || (current.dateUpdated > latest.dateUpdated) ? current : latest,\n                        null as Blob | null\n                    );\n                    loadBlob = mostRecentBlob || new Blob();\n                } catch (error) {\n                    console.error('Failed to load blobs:', error);\n                    // Handle error case, maybe set a default or empty blob\n                    loadBlob = new Blob();\n                }\n                setCurrentBlob(loadBlob);\n            }\n        };\n        initBlob();\n    }, [initialBlob]);\n\n    useEffect(() => {\n        if (currentBlob && containerRef.current && !editorRef.current) {\n            editorRef.current = new WEditor(\n                containerRef.current,\n                onContentChanged,\n                [\n                    new ToolbarPlugin(),\n                    new TabPlugin(),\n                    new FilePlugin(),\n                    new PastePlugin({ sanitize: false })\n                ]\n            );\n            editorRef.current.loadBlob(currentBlob);\n        }\n    }, [currentBlob]);\n\n    const saveBlob = (blob: Blob) => {\n        blobService.saveBlob(blob);\n    };\n\n    //const saveBlobThrottled = useRef(throttle(saveBlob, 1000)).current;\n\n    // this method will be\n    const onContentChanged = (content: BlobContent) => {\n        if (currentBlob) {\n            currentBlob.content = content;\n            currentBlob.dateUpdated = new Date();\n            saveBlob(currentBlob);\n            setCurrentBlob({ ...currentBlob }); // Shallow copy to trigger re-render\n        }\n    };\n\n    const handleTitleChange = (e: Event) => {\n        if (e.target instanceof HTMLInputElement && currentBlob) {\n            currentBlob.title = e.target.value;\n            currentBlob.dateUpdated = new Date();\n            saveBlob(currentBlob);\n            setCurrentBlob({ ...currentBlob });\n        }\n    };\n\n    if (!currentBlob) {\n        return <p class=\"error-message\">Loading...</p>;\n    }\n\n    return (\n        <div class=\"blob-editor\" style={{ width: '100%', height: '100%', display: 'flex', flexDirection: 'column' }}>\n            <input\n                type=\"text\"\n                value={currentBlob.title}\n                onChange={handleTitleChange}\n                class=\"blob-title\"\n            />\n            <div ref={containerRef} class=\"w-editor\" style={{ flexGrow: 1 }}></div>\n        </div>\n    );\n};", "import { WEditor } from '../lib/WEditor';\nimport { IPlugin } from './IPlugin';\n\nexport class PastePlugin implements IPlugin {\n\n    private config;\n\n    constructor(config: {}) {\n        this.config = config;\n    }\n\n    initialize(editor: WEditor, container: HTMLElement) {\n        container.addEventListener('paste', this.handlePaste);\n    }\n\n    private handleToolbarPaste = (e) => {\n        console.log(`toolbar paste click.`)\n    }\n\n    toolbar = {\n        type: 'button',\n        icon: '/public/icons/icon-paste.svg',\n        label: 'Paste',\n        onClick: this.handleToolbarPaste\n    };\n\n    private handlePaste = (e: ClipboardEvent) => {\n        e.preventDefault();\n        const clipboardData = e.clipboardData || (window as any).clipboardData;\n        if (!clipboardData) return;\n\n        let pastedContent = clipboardData.getData('text/html') || clipboardData.getData('text/plain');\n\n        if (pastedContent && this.containsHTML(pastedContent) && this.config.sanitize) {\n            pastedContent = this.sanitizeContent(pastedContent);\n        }\n\n        console.log(`paste`, pastedContent)\n        // todo: need to tell system to create and insert node from pasted div container...\n\n        this.insertContent(pastedContent, e.target as HTMLElement);\n    };\n\n    private containsHTML(content: string): boolean {\n        // A simple check for HTML tags\n        return /<[^>]+>/i.test(content);\n    } s\n\n    private sanitizeContent(content: string): string {\n        // Remove style attributes using regex, supporting both single and double quotes\n        return content.replace(/style=([\"'])(?:(?=(\\\\?))\\2.)*?\\1/g, '');\n    }\n\n    private insertContent(content: string, target: HTMLElement) {\n        const selection = window.getSelection();\n        if (selection && selection.rangeCount) {\n            const range = selection.getRangeAt(0);\n            range.deleteContents();\n\n            // Create a temporary div to parse HTML content\n            const tempDiv = document.createElement('div');\n            tempDiv.innerHTML = content;\n\n            // Move nodes from tempDiv to the range\n            let node: Node | null;\n            while ((node = tempDiv.firstChild)) {\n                range.insertNode(node);\n            }\n\n            const space = document.createTextNode(\" \");\n            const br = document.createElement(\"br\");\n            range.insertNode(space);\n            range.insertNode(br);\n\n            // Collapse the range after the inserted content\n            range.collapse(false);\n            selection.removeAllRanges();\n            selection.addRange(range);\n        }\n    }\n}", "import { WEditor } from '../lib/WEditor';\nimport { IPlugin } from './IPlugin.ts';\n\nexport class TabPlugin implements IPlugin {\n\n    initialize(editor: WEditor, container: HTMLElement): IPlugin {\n        container.addEventListener('keydown', this.handleTabKey, true); // Capture phase to catch the event before it bubbles\n        return this;\n    }\n\n    private handleTabKey = (e: KeyboardEvent) => {\n        if (e.key === 'Tab') {\n            e.preventDefault();\n            e.stopPropagation();\n            const selection = window.getSelection();\n            if (selection && selection.rangeCount) {\n                const range = selection.getRangeAt(0);\n                range.deleteContents();\n\n                const tabSpaces = document.createTextNode('\\u00a0\\u00a0\\u00a0\\u00a0'); // Use non-breaking spaces\n                range.insertNode(tabSpaces);\n\n                // Move the cursor after the inserted spaces\n                range.setStartAfter(tabSpaces);\n                range.setEndAfter(tabSpaces); // This ensures cursor moves to the end of inserted text\n                range.collapse(true);\n                selection.removeAllRanges();\n                selection.addRange(range);\n\n                // Immediately update the editor content\n                if (e.target instanceof HTMLElement) {\n                    const editor = e.target.closest('.wysiwyg-container')?.['editor'] as WEditor;\n                    if (editor) editor.applyChanges();\n                }\n            }\n        }\n    };\n}", "import { debounce } from 'lib/utils/debounce';\nimport { WEditor } from '../../lib/WEditor';\nimport { IPlugin } from '../IPlugin';\nimport { Dropdown } from './Dropdown'; // Assuming Dropdown class is in this file\n\nexport class ToolbarPlugin implements IPlugin {\n    public editor: WEditor;\n    private toolbarContainer: HTMLDivElement | null = null;\n    private isVisible: boolean = false;\n\n    constructor() {\n        // No need for initial creation here\n    }\n\n    initialize(editor: WEditor, container: HTMLElement) {\n        this.editor = editor;\n        this.initUI(container);\n        container.addEventListener('mouseup', debounce(this.checkForSelection, 200));\n        container.addEventListener('contextmenu', this.showToolbar);\n        document.addEventListener('keydown', this.handleEscapeKey);\n    }\n\n    private initUI(container: HTMLElement) {\n        if (!this.toolbarContainer) {\n            this.toolbarContainer = document.createElement('div');\n            this.toolbarContainer.className = 'toolbar-container';\n            this.toolbarContainer.style.display = 'none'; // Initially hidden\n            container.appendChild(this.toolbarContainer);\n        }\n\n        this.toolbarContainer.innerHTML = ''; // Clear previous content\n\n        this.editor.plugins.forEach(plugin => {\n            if (plugin instanceof ToolbarPlugin) return; // skip this plugin since we start with its items.\n            if ('toolbar' in plugin) {\n                this.toolbar.items.unshift(plugin.toolbar);\n            }\n        });\n\n        if (this.toolbar.items.length > 0) {\n            createToolbarItem(this.toolbar, this.toolbarContainer, this);\n        } else {\n            this.toolbarContainer.style.display = 'none';\n        }\n    }\n\n    private checkForSelection = (e: MouseEvent) => {\n        const s = window.getSelection()?.toString().length;\n        //console.log(`up`, e, s, window.getSelection())\n        if (s > 0 || e.button == 2) { // right click or selection\n            this.showToolbar(e);\n        } else {\n            this.hideToolbar();\n        }\n    };\n\n    public showToolbar = (e: MouseEvent) => {\n        if (!this.toolbarContainer || this.toolbarContainer.children.length === 0) return;\n        if (this.isVisible) return;\n\n        e.preventDefault();\n        e.stopPropagation();\n\n        // Calculate initial position but do not reposition on item clicks\n        const rect = e.target instanceof Element ? e.target.getBoundingClientRect() : { top: 0, left: 0 };\n        const windowWidth = window.innerWidth;\n\n        this.toolbarContainer.style.top = `${rect.top - this.toolbarContainer.offsetHeight}px`;\n        this.toolbarContainer.style.left = `${e.clientX + 10}px`;\n\n        // Adjust position if toolbar goes off-screen\n        if (e.clientX + this.toolbarContainer.offsetWidth > windowWidth) {\n            this.toolbarContainer.style.left = `${windowWidth - this.toolbarContainer.offsetWidth}px`;\n        }\n\n        this.toolbarContainer.style.display = 'flex';\n        this.isVisible = true;\n    };\n\n    public hideToolbar = () => {\n        if (!this.toolbarContainer) return;\n\n        this.toolbarContainer.style.display = 'none';\n        this.isVisible = false;\n\n        // Hide all dropdowns when toolbar is hidden\n        Array.from(this.toolbarContainer.querySelectorAll('.dropdown-menu')).forEach(menu => {\n            menu.style.display = 'none';\n            menu.style.opacity = '0';\n        });\n    };\n\n    private handleEscapeKey = (e: KeyboardEvent) => {\n        if (e.key === 'Escape' && this.isVisible) {\n            this.hideToolbar();\n        }\n    };\n\n    private funcs = {\n        clearAll: () => {\n            this.editor.clearContent(true);\n        }\n    };\n\n    toolbar = {\n        type: 'group',\n        items: [\n            {\n                type: 'dropdown',\n                icon: '/public/icons/icon-cog.svg',\n                label: 'Config',\n                items: [\n                    {\n                        type: 'button',\n                        icon: '/public/icons/icon-theme.svg',\n                        label: 'Theme',\n                        onClick: (t) => { console.log('Theme button clicked') }\n                    },\n                    {\n                        type: 'button',\n                        icon: '/public/icons/icon-history.svg',\n                        label: 'History',\n                        onClick: (t) => console.log('History button clicked')\n                    }\n                ]\n            },\n            {\n                type: 'button',\n                icon: '/public/icons/icon-clear.svg',\n                label: 'Clear',\n                onClick: this.funcs.clearAll,\n            },\n            {\n                type: 'button',\n                icon: '/public/icons/icon-close.svg',\n                label: 'Close',\n                onClick: this.hideToolbar\n            }\n        ]\n    };\n}\n\n\nexport function createToolbarItem(item: any, parent: HTMLElement, toolbar: ToolbarPlugin) {\n    this.toolbar = toolbar;\n\n    if (item.type === 'button') {\n        const button = document.createElement('button');\n        button.className = 'toolbar-button';\n        if (item.icon) {\n            const icon = document.createElement('img');\n            icon.src = item.icon;\n            icon.alt = item.label;\n            button.appendChild(icon);\n        }\n        if (item.label) {\n            const label = document.createElement('span');\n            label.textContent = item.label;\n            button.appendChild(label);\n        }\n        if (item.onClick) {\n            button.addEventListener('click', (e) => {\n                e.preventDefault();\n                e.stopImmediatePropagation();\n                e.stopPropagation();\n                item.onClick.call(this.toolbar);\n                this.toolbar.hideToolbar();\n            });\n        }\n        parent.appendChild(button);\n    }\n    else if (item.type === 'dropdown') {\n        const dropdownButton = document.createElement('button');\n        dropdownButton.className = 'toolbar-dropdown-button';\n        if (item.icon) {\n            const icon = document.createElement('img');\n            icon.src = item.icon;\n            icon.alt = item.label;\n            dropdownButton.appendChild(icon);\n        }\n        if (item.label) {\n            const label = document.createElement('span');\n            label.textContent = item.label;\n            dropdownButton.appendChild(label);\n        }\n\n        const arrow = document.createElement('span');\n        arrow.textContent = '\u25BC'; // Down arrow symbol\n        dropdownButton.appendChild(arrow);\n\n        const dropdown = new Dropdown(dropdownButton, item.items, toolbar);\n        parent.appendChild(dropdownButton);\n    }\n    else if (item.type === 'group') {\n        const group = document.createElement('div');\n        group.className = 'toolbar-group';\n        if (Array.isArray(item.items)) {\n            item.items.forEach((groupItem: any) => createToolbarItem(groupItem, group, toolbar));\n        }\n        parent.appendChild(group);\n    }\n    return parent;\n}\n\n", "export function debounce<T extends (...args: any[]) => any>(func: T, delay: number): T {\n    let timeoutId: ReturnType<typeof setTimeout> | null = null;\n    return function (this: ThisParameterType<T>, ...args: Parameters<T>) {\n        const context = this;\n        const later = () => {\n            timeoutId = null;\n            func.apply(context, args);\n        };\n        clearTimeout(timeoutId!);\n        timeoutId = setTimeout(later, delay);\n    } as T;\n}", "import { createToolbarItem } from 'components/shared/BlobEditor/plugins/toolbar/ToolbarPlugin.js';\nimport { ToolbarPlugin } from './ToolbarPlugin.js';\n\nexport class Dropdown {\n    private dropdownButton: HTMLElement;\n    private dropdownMenu: HTMLDivElement;\n    private items: any[];\n    private toolbar;\n    private hideTimeout: number | null = null;\n    private isVisible: boolean = false;\n\n    constructor(button: HTMLElement, items: any[], toolbar: ToolbarPlugin) {\n        this.dropdownButton = button;\n        this.items = items;\n        this.toolbar = toolbar;\n        this.dropdownMenu = this.createDropdownMenu();\n    }\n\n    private createDropdownMenu(): HTMLDivElement {\n        const menu = document.createElement('div');\n        menu.className = 'dropdown-menu';\n        menu.style.display = 'none';\n\n        this.items.forEach(item => {\n            createToolbarItem(item, menu, this.toolbar)\n        });\n\n        this.dropdownButton.appendChild(menu);\n\n        menu.addEventListener('mouseleave', this.startHideTimer.bind(this));\n        menu.addEventListener('mouseenter', this.clearHideTimer.bind(this));\n\n        this.dropdownButton.addEventListener('click', (e) => {\n            e.preventDefault();\n            e.stopPropagation();\n            console.log(`click`, e.target)\n            if (this.dropdownMenu.style.display == 'flex') this.hide();\n            else this.show();\n        });\n\n        return menu;\n    }\n\n    public show() {\n        console.log(`show dropdown`, this.isVisible)\n        //if (!this.isVisible) {\n        this.positionDropdown();\n        this.dropdownMenu.style.display = 'flex';\n        this.dropdownMenu.style.opacity = '1';\n        this.isVisible = true;\n        //}\n    }\n\n    private positionDropdown() {\n        if (!this.isVisible) {\n            const buttonRect = this.dropdownButton.getBoundingClientRect();\n            const windowWidth = window.innerWidth;\n\n            // Store initial position for consistent positioning\n            // this.dropdownMenu.style.top = `${buttonRect.bottom + parseFloat(getComputedStyle(this.dropdownMenu).getPropertyValue('--dropdown-y-offset'))}px`;\n            // this.dropdownMenu.style.left = `${buttonRect.left + parseFloat(getComputedStyle(this.dropdownMenu).getPropertyValue('--dropdown-x-offset'))}px`;\n\n            // Adjust if dropdown goes off-screen\n            if (buttonRect.left + this.dropdownMenu.offsetWidth > windowWidth) {\n                this.dropdownMenu.style.left = `${windowWidth - this.dropdownMenu.offsetWidth - parseFloat(getComputedStyle(this.dropdownMenu).getPropertyValue('--dropdown-x-offset'))}px`;\n            }\n        }\n    }\n\n    private startHideTimer() {\n        this.hideTimeout = window.setTimeout(() => {\n            this.hide();\n        }, 500);\n    }\n\n    private clearHideTimer() {\n        if (this.hideTimeout) {\n            clearTimeout(this.hideTimeout);\n            this.hideTimeout = null;\n        }\n    }\n\n    private hide() {\n        this.dropdownMenu.style.display = 'none';\n        this.dropdownMenu.style.opacity = '0';\n        this.isVisible = false;\n    }\n\n    private createToolbarItem(item: any, parent: HTMLElement) {\n        if (item.type === 'group') {\n            const group = document.createElement('div');\n            group.className = 'toolbar-group';\n            parent.appendChild(group);\n\n            if (Array.isArray(item.items)) {\n                item.items.forEach((groupItem: any) => this.createToolbarItem(groupItem, group));\n            }\n        } else if (item.type === 'dropdown') {\n            // For nested dropdowns within dropdowns, we would create another Dropdown instance\n            // but for simplicity, we'll just render a button here:\n            const nestedDropdownButton = document.createElement('button');\n            nestedDropdownButton.className = 'toolbar-dropdown-button nested';\n            if (item.icon) {\n                const icon = document.createElement('img');\n                icon.src = item.icon;\n                icon.alt = item.label;\n                nestedDropdownButton.appendChild(icon);\n            }\n            if (item.label) {\n                const label = document.createElement('span');\n                label.textContent = item.label;\n                nestedDropdownButton.appendChild(label);\n            }\n            parent.appendChild(nestedDropdownButton);\n            // Note: In a real scenario, you might want to handle nested dropdowns more dynamically\n        }\n    }\n}", "import { options as _options } from 'preact';\n\n/** @type {number} */\nlet currentIndex;\n\n/** @type {import('./internal').Component} */\nlet currentComponent;\n\n/** @type {import('./internal').Component} */\nlet previousComponent;\n\n/** @type {number} */\nlet currentHook = 0;\n\n/** @type {Array<import('./internal').Component>} */\nlet afterPaintEffects = [];\n\n// Cast to use internal Options type\nconst options = /** @type {import('./internal').Options} */ (_options);\n\nlet oldBeforeDiff = options._diff;\nlet oldBeforeRender = options._render;\nlet oldAfterDiff = options.diffed;\nlet oldCommit = options._commit;\nlet oldBeforeUnmount = options.unmount;\nlet oldRoot = options._root;\n\n// We take the minimum timeout for requestAnimationFrame to ensure that\n// the callback is invoked after the next frame. 35ms is based on a 30hz\n// refresh rate, which is the minimum rate for a smooth user experience.\nconst RAF_TIMEOUT = 35;\nlet prevRaf;\n\n/** @type {(vnode: import('./internal').VNode) => void} */\noptions._diff = vnode => {\n\tcurrentComponent = null;\n\tif (oldBeforeDiff) oldBeforeDiff(vnode);\n};\n\noptions._root = (vnode, parentDom) => {\n\tif (vnode && parentDom._children && parentDom._children._mask) {\n\t\tvnode._mask = parentDom._children._mask;\n\t}\n\n\tif (oldRoot) oldRoot(vnode, parentDom);\n};\n\n/** @type {(vnode: import('./internal').VNode) => void} */\noptions._render = vnode => {\n\tif (oldBeforeRender) oldBeforeRender(vnode);\n\n\tcurrentComponent = vnode._component;\n\tcurrentIndex = 0;\n\n\tconst hooks = currentComponent.__hooks;\n\tif (hooks) {\n\t\tif (previousComponent === currentComponent) {\n\t\t\thooks._pendingEffects = [];\n\t\t\tcurrentComponent._renderCallbacks = [];\n\t\t\thooks._list.forEach(hookItem => {\n\t\t\t\tif (hookItem._nextValue) {\n\t\t\t\t\thookItem._value = hookItem._nextValue;\n\t\t\t\t}\n\t\t\t\thookItem._pendingArgs = hookItem._nextValue = undefined;\n\t\t\t});\n\t\t} else {\n\t\t\thooks._pendingEffects.forEach(invokeCleanup);\n\t\t\thooks._pendingEffects.forEach(invokeEffect);\n\t\t\thooks._pendingEffects = [];\n\t\t\tcurrentIndex = 0;\n\t\t}\n\t}\n\tpreviousComponent = currentComponent;\n};\n\n/** @type {(vnode: import('./internal').VNode) => void} */\noptions.diffed = vnode => {\n\tif (oldAfterDiff) oldAfterDiff(vnode);\n\n\tconst c = vnode._component;\n\tif (c && c.__hooks) {\n\t\tif (c.__hooks._pendingEffects.length) afterPaint(afterPaintEffects.push(c));\n\t\tc.__hooks._list.forEach(hookItem => {\n\t\t\tif (hookItem._pendingArgs) {\n\t\t\t\thookItem._args = hookItem._pendingArgs;\n\t\t\t}\n\t\t\thookItem._pendingArgs = undefined;\n\t\t});\n\t}\n\tpreviousComponent = currentComponent = null;\n};\n\n// TODO: Improve typing of commitQueue parameter\n/** @type {(vnode: import('./internal').VNode, commitQueue: any) => void} */\noptions._commit = (vnode, commitQueue) => {\n\tcommitQueue.some(component => {\n\t\ttry {\n\t\t\tcomponent._renderCallbacks.forEach(invokeCleanup);\n\t\t\tcomponent._renderCallbacks = component._renderCallbacks.filter(cb =>\n\t\t\t\tcb._value ? invokeEffect(cb) : true\n\t\t\t);\n\t\t} catch (e) {\n\t\t\tcommitQueue.some(c => {\n\t\t\t\tif (c._renderCallbacks) c._renderCallbacks = [];\n\t\t\t});\n\t\t\tcommitQueue = [];\n\t\t\toptions._catchError(e, component._vnode);\n\t\t}\n\t});\n\n\tif (oldCommit) oldCommit(vnode, commitQueue);\n};\n\n/** @type {(vnode: import('./internal').VNode) => void} */\noptions.unmount = vnode => {\n\tif (oldBeforeUnmount) oldBeforeUnmount(vnode);\n\n\tconst c = vnode._component;\n\tif (c && c.__hooks) {\n\t\tlet hasErrored;\n\t\tc.__hooks._list.forEach(s => {\n\t\t\ttry {\n\t\t\t\tinvokeCleanup(s);\n\t\t\t} catch (e) {\n\t\t\t\thasErrored = e;\n\t\t\t}\n\t\t});\n\t\tc.__hooks = undefined;\n\t\tif (hasErrored) options._catchError(hasErrored, c._vnode);\n\t}\n};\n\n/**\n * Get a hook's state from the currentComponent\n * @param {number} index The index of the hook to get\n * @param {number} type The index of the hook to get\n * @returns {any}\n */\nfunction getHookState(index, type) {\n\tif (options._hook) {\n\t\toptions._hook(currentComponent, index, currentHook || type);\n\t}\n\tcurrentHook = 0;\n\n\t// Largely inspired by:\n\t// * https://github.com/michael-klein/funcy.js/blob/f6be73468e6ec46b0ff5aa3cc4c9baf72a29025a/src/hooks/core_hooks.mjs\n\t// * https://github.com/michael-klein/funcy.js/blob/650beaa58c43c33a74820a3c98b3c7079cf2e333/src/renderer.mjs\n\t// Other implementations to look at:\n\t// * https://codesandbox.io/s/mnox05qp8\n\tconst hooks =\n\t\tcurrentComponent.__hooks ||\n\t\t(currentComponent.__hooks = {\n\t\t\t_list: [],\n\t\t\t_pendingEffects: []\n\t\t});\n\n\tif (index >= hooks._list.length) {\n\t\thooks._list.push({});\n\t}\n\n\treturn hooks._list[index];\n}\n\n/**\n * @template {unknown} S\n * @param {import('./index').Dispatch<import('./index').StateUpdater<S>>} [initialState]\n * @returns {[S, (state: S) => void]}\n */\nexport function useState(initialState) {\n\tcurrentHook = 1;\n\treturn useReducer(invokeOrReturn, initialState);\n}\n\n/**\n * @template {unknown} S\n * @template {unknown} A\n * @param {import('./index').Reducer<S, A>} reducer\n * @param {import('./index').Dispatch<import('./index').StateUpdater<S>>} initialState\n * @param {(initialState: any) => void} [init]\n * @returns {[ S, (state: S) => void ]}\n */\nexport function useReducer(reducer, initialState, init) {\n\t/** @type {import('./internal').ReducerHookState} */\n\tconst hookState = getHookState(currentIndex++, 2);\n\thookState._reducer = reducer;\n\tif (!hookState._component) {\n\t\thookState._value = [\n\t\t\t!init ? invokeOrReturn(undefined, initialState) : init(initialState),\n\n\t\t\taction => {\n\t\t\t\tconst currentValue = hookState._nextValue\n\t\t\t\t\t? hookState._nextValue[0]\n\t\t\t\t\t: hookState._value[0];\n\t\t\t\tconst nextValue = hookState._reducer(currentValue, action);\n\n\t\t\t\tif (currentValue !== nextValue) {\n\t\t\t\t\thookState._nextValue = [nextValue, hookState._value[1]];\n\t\t\t\t\thookState._component.setState({});\n\t\t\t\t}\n\t\t\t}\n\t\t];\n\n\t\thookState._component = currentComponent;\n\n\t\tif (!currentComponent._hasScuFromHooks) {\n\t\t\tcurrentComponent._hasScuFromHooks = true;\n\t\t\tlet prevScu = currentComponent.shouldComponentUpdate;\n\t\t\tconst prevCWU = currentComponent.componentWillUpdate;\n\n\t\t\t// If we're dealing with a forced update `shouldComponentUpdate` will\n\t\t\t// not be called. But we use that to update the hook values, so we\n\t\t\t// need to call it.\n\t\t\tcurrentComponent.componentWillUpdate = function (p, s, c) {\n\t\t\t\tif (this._force) {\n\t\t\t\t\tlet tmp = prevScu;\n\t\t\t\t\t// Clear to avoid other sCU hooks from being called\n\t\t\t\t\tprevScu = undefined;\n\t\t\t\t\tupdateHookState(p, s, c);\n\t\t\t\t\tprevScu = tmp;\n\t\t\t\t}\n\n\t\t\t\tif (prevCWU) prevCWU.call(this, p, s, c);\n\t\t\t};\n\n\t\t\t// This SCU has the purpose of bailing out after repeated updates\n\t\t\t// to stateful hooks.\n\t\t\t// we store the next value in _nextValue[0] and keep doing that for all\n\t\t\t// state setters, if we have next states and\n\t\t\t// all next states within a component end up being equal to their original state\n\t\t\t// we are safe to bail out for this specific component.\n\t\t\t/**\n\t\t\t *\n\t\t\t * @type {import('./internal').Component[\"shouldComponentUpdate\"]}\n\t\t\t */\n\t\t\t// @ts-ignore - We don't use TS to downtranspile\n\t\t\t// eslint-disable-next-line no-inner-declarations\n\t\t\tfunction updateHookState(p, s, c) {\n\t\t\t\tif (!hookState._component.__hooks) return true;\n\n\t\t\t\t/** @type {(x: import('./internal').HookState) => x is import('./internal').ReducerHookState} */\n\t\t\t\tconst isStateHook = x => !!x._component;\n\t\t\t\tconst stateHooks =\n\t\t\t\t\thookState._component.__hooks._list.filter(isStateHook);\n\n\t\t\t\tconst allHooksEmpty = stateHooks.every(x => !x._nextValue);\n\t\t\t\t// When we have no updated hooks in the component we invoke the previous SCU or\n\t\t\t\t// traverse the VDOM tree further.\n\t\t\t\tif (allHooksEmpty) {\n\t\t\t\t\treturn prevScu ? prevScu.call(this, p, s, c) : true;\n\t\t\t\t}\n\n\t\t\t\t// We check whether we have components with a nextValue set that\n\t\t\t\t// have values that aren't equal to one another this pushes\n\t\t\t\t// us to update further down the tree\n\t\t\t\tlet shouldUpdate = hookState._component.props !== p;\n\t\t\t\tstateHooks.forEach(hookItem => {\n\t\t\t\t\tif (hookItem._nextValue) {\n\t\t\t\t\t\tconst currentValue = hookItem._value[0];\n\t\t\t\t\t\thookItem._value = hookItem._nextValue;\n\t\t\t\t\t\thookItem._nextValue = undefined;\n\t\t\t\t\t\tif (currentValue !== hookItem._value[0]) shouldUpdate = true;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\treturn prevScu\n\t\t\t\t\t? prevScu.call(this, p, s, c) || shouldUpdate\n\t\t\t\t\t: shouldUpdate;\n\t\t\t}\n\n\t\t\tcurrentComponent.shouldComponentUpdate = updateHookState;\n\t\t}\n\t}\n\n\treturn hookState._nextValue || hookState._value;\n}\n\n/**\n * @param {import('./internal').Effect} callback\n * @param {unknown[]} args\n * @returns {void}\n */\nexport function useEffect(callback, args) {\n\t/** @type {import('./internal').EffectHookState} */\n\tconst state = getHookState(currentIndex++, 3);\n\tif (!options._skipEffects && argsChanged(state._args, args)) {\n\t\tstate._value = callback;\n\t\tstate._pendingArgs = args;\n\n\t\tcurrentComponent.__hooks._pendingEffects.push(state);\n\t}\n}\n\n/**\n * @param {import('./internal').Effect} callback\n * @param {unknown[]} args\n * @returns {void}\n */\nexport function useLayoutEffect(callback, args) {\n\t/** @type {import('./internal').EffectHookState} */\n\tconst state = getHookState(currentIndex++, 4);\n\tif (!options._skipEffects && argsChanged(state._args, args)) {\n\t\tstate._value = callback;\n\t\tstate._pendingArgs = args;\n\n\t\tcurrentComponent._renderCallbacks.push(state);\n\t}\n}\n\n/** @type {(initialValue: unknown) => unknown} */\nexport function useRef(initialValue) {\n\tcurrentHook = 5;\n\treturn useMemo(() => ({ current: initialValue }), []);\n}\n\n/**\n * @param {object} ref\n * @param {() => object} createHandle\n * @param {unknown[]} args\n * @returns {void}\n */\nexport function useImperativeHandle(ref, createHandle, args) {\n\tcurrentHook = 6;\n\tuseLayoutEffect(\n\t\t() => {\n\t\t\tif (typeof ref == 'function') {\n\t\t\t\tconst result = ref(createHandle());\n\t\t\t\treturn () => {\n\t\t\t\t\tref(null);\n\t\t\t\t\tif (result && typeof result == 'function') result();\n\t\t\t\t};\n\t\t\t} else if (ref) {\n\t\t\t\tref.current = createHandle();\n\t\t\t\treturn () => (ref.current = null);\n\t\t\t}\n\t\t},\n\t\targs == null ? args : args.concat(ref)\n\t);\n}\n\n/**\n * @template {unknown} T\n * @param {() => T} factory\n * @param {unknown[]} args\n * @returns {T}\n */\nexport function useMemo(factory, args) {\n\t/** @type {import('./internal').MemoHookState<T>} */\n\tconst state = getHookState(currentIndex++, 7);\n\tif (argsChanged(state._args, args)) {\n\t\tstate._value = factory();\n\t\tstate._args = args;\n\t\tstate._factory = factory;\n\t}\n\n\treturn state._value;\n}\n\n/**\n * @param {() => void} callback\n * @param {unknown[]} args\n * @returns {() => void}\n */\nexport function useCallback(callback, args) {\n\tcurrentHook = 8;\n\treturn useMemo(() => callback, args);\n}\n\n/**\n * @param {import('./internal').PreactContext} context\n */\nexport function useContext(context) {\n\tconst provider = currentComponent.context[context._id];\n\t// We could skip this call here, but than we'd not call\n\t// `options._hook`. We need to do that in order to make\n\t// the devtools aware of this hook.\n\t/** @type {import('./internal').ContextHookState} */\n\tconst state = getHookState(currentIndex++, 9);\n\t// The devtools needs access to the context object to\n\t// be able to pull of the default value when no provider\n\t// is present in the tree.\n\tstate._context = context;\n\tif (!provider) return context._defaultValue;\n\t// This is probably not safe to convert to \"!\"\n\tif (state._value == null) {\n\t\tstate._value = true;\n\t\tprovider.sub(currentComponent);\n\t}\n\treturn provider.props.value;\n}\n\n/**\n * Display a custom label for a custom hook for the devtools panel\n * @type {<T>(value: T, cb?: (value: T) => string | number) => void}\n */\nexport function useDebugValue(value, formatter) {\n\tif (options.useDebugValue) {\n\t\toptions.useDebugValue(\n\t\t\tformatter ? formatter(value) : /** @type {any}*/ (value)\n\t\t);\n\t}\n}\n\n/**\n * @param {(error: unknown, errorInfo: import('preact').ErrorInfo) => void} cb\n * @returns {[unknown, () => void]}\n */\nexport function useErrorBoundary(cb) {\n\t/** @type {import('./internal').ErrorBoundaryHookState} */\n\tconst state = getHookState(currentIndex++, 10);\n\tconst errState = useState();\n\tstate._value = cb;\n\tif (!currentComponent.componentDidCatch) {\n\t\tcurrentComponent.componentDidCatch = (err, errorInfo) => {\n\t\t\tif (state._value) state._value(err, errorInfo);\n\t\t\terrState[1](err);\n\t\t};\n\t}\n\treturn [\n\t\terrState[0],\n\t\t() => {\n\t\t\terrState[1](undefined);\n\t\t}\n\t];\n}\n\n/** @type {() => string} */\nexport function useId() {\n\t/** @type {import('./internal').IdHookState} */\n\tconst state = getHookState(currentIndex++, 11);\n\tif (!state._value) {\n\t\t// Grab either the root node or the nearest async boundary node.\n\t\t/** @type {import('./internal').VNode} */\n\t\tlet root = currentComponent._vnode;\n\t\twhile (root !== null && !root._mask && root._parent !== null) {\n\t\t\troot = root._parent;\n\t\t}\n\n\t\tlet mask = root._mask || (root._mask = [0, 0]);\n\t\tstate._value = 'P' + mask[0] + '-' + mask[1]++;\n\t}\n\n\treturn state._value;\n}\n\n/**\n * After paint effects consumer.\n */\nfunction flushAfterPaintEffects() {\n\tlet component;\n\twhile ((component = afterPaintEffects.shift())) {\n\t\tif (!component._parentDom || !component.__hooks) continue;\n\t\ttry {\n\t\t\tcomponent.__hooks._pendingEffects.forEach(invokeCleanup);\n\t\t\tcomponent.__hooks._pendingEffects.forEach(invokeEffect);\n\t\t\tcomponent.__hooks._pendingEffects = [];\n\t\t} catch (e) {\n\t\t\tcomponent.__hooks._pendingEffects = [];\n\t\t\toptions._catchError(e, component._vnode);\n\t\t}\n\t}\n}\n\nlet HAS_RAF = typeof requestAnimationFrame == 'function';\n\n/**\n * Schedule a callback to be invoked after the browser has a chance to paint a new frame.\n * Do this by combining requestAnimationFrame (rAF) + setTimeout to invoke a callback after\n * the next browser frame.\n *\n * Also, schedule a timeout in parallel to the the rAF to ensure the callback is invoked\n * even if RAF doesn't fire (for example if the browser tab is not visible)\n *\n * @param {() => void} callback\n */\nfunction afterNextFrame(callback) {\n\tconst done = () => {\n\t\tclearTimeout(timeout);\n\t\tif (HAS_RAF) cancelAnimationFrame(raf);\n\t\tsetTimeout(callback);\n\t};\n\tconst timeout = setTimeout(done, RAF_TIMEOUT);\n\n\tlet raf;\n\tif (HAS_RAF) {\n\t\traf = requestAnimationFrame(done);\n\t}\n}\n\n// Note: if someone used options.debounceRendering = requestAnimationFrame,\n// then effects will ALWAYS run on the NEXT frame instead of the current one, incurring a ~16ms delay.\n// Perhaps this is not such a big deal.\n/**\n * Schedule afterPaintEffects flush after the browser paints\n * @param {number} newQueueLength\n * @returns {void}\n */\nfunction afterPaint(newQueueLength) {\n\tif (newQueueLength === 1 || prevRaf !== options.requestAnimationFrame) {\n\t\tprevRaf = options.requestAnimationFrame;\n\t\t(prevRaf || afterNextFrame)(flushAfterPaintEffects);\n\t}\n}\n\n/**\n * @param {import('./internal').HookState} hook\n * @returns {void}\n */\nfunction invokeCleanup(hook) {\n\t// A hook cleanup can introduce a call to render which creates a new root, this will call options.vnode\n\t// and move the currentComponent away.\n\tconst comp = currentComponent;\n\tlet cleanup = hook._cleanup;\n\tif (typeof cleanup == 'function') {\n\t\thook._cleanup = undefined;\n\t\tcleanup();\n\t}\n\n\tcurrentComponent = comp;\n}\n\n/**\n * Invoke a Hook's effect\n * @param {import('./internal').EffectHookState} hook\n * @returns {void}\n */\nfunction invokeEffect(hook) {\n\t// A hook call can introduce a call to render which creates a new root, this will call options.vnode\n\t// and move the currentComponent away.\n\tconst comp = currentComponent;\n\thook._cleanup = hook._value();\n\tcurrentComponent = comp;\n}\n\n/**\n * @param {unknown[]} oldArgs\n * @param {unknown[]} newArgs\n * @returns {boolean}\n */\nfunction argsChanged(oldArgs, newArgs) {\n\treturn (\n\t\t!oldArgs ||\n\t\toldArgs.length !== newArgs.length ||\n\t\tnewArgs.some((arg, index) => arg !== oldArgs[index])\n\t);\n}\n\n/**\n * @template Arg\n * @param {Arg} arg\n * @param {(arg: Arg) => any} f\n * @returns {any}\n */\nfunction invokeOrReturn(arg, f) {\n\treturn typeof f == 'function' ? f(arg) : f;\n}\n", "import { v4 as uuid } from 'uuid';\n\nexport interface BlobContent {\n    entries: any[];\n}\n\nexport class Blob {\n    id: string;\n    title: string;\n    dateUpdated: Date;\n    content: BlobContent;\n    type: string;\n\n    constructor(\n        params: {\n            id?: string;\n            title?: string;\n            content?: BlobContent;\n            dateUpdated?: Date;\n            type?: string;\n        } = {}\n    ) {\n        this.id = params.id || uuid();\n        this.title = params.title || '';\n        this.content = params.content || { entries: [] };\n        this.dateUpdated = params.dateUpdated || new Date();\n        this.type = params.type || 'blob';\n    }\n}", "export { default as MAX } from './max.js';\nexport { default as NIL } from './nil.js';\nexport { default as parse } from './parse.js';\nexport { default as stringify } from './stringify.js';\nexport { default as v1 } from './v1.js';\nexport { default as v1ToV6 } from './v1ToV6.js';\nexport { default as v3 } from './v3.js';\nexport { default as v4 } from './v4.js';\nexport { default as v5 } from './v5.js';\nexport { default as v6 } from './v6.js';\nexport { default as v6ToV1 } from './v6ToV1.js';\nexport { default as v7 } from './v7.js';\nexport { default as validate } from './validate.js';\nexport { default as version } from './version.js';\n", "import validate from './validate.js';\nconst byteToHex = [];\nfor (let i = 0; i < 256; ++i) {\n    byteToHex.push((i + 0x100).toString(16).slice(1));\n}\nexport function unsafeStringify(arr, offset = 0) {\n    return (byteToHex[arr[offset + 0]] +\n        byteToHex[arr[offset + 1]] +\n        byteToHex[arr[offset + 2]] +\n        byteToHex[arr[offset + 3]] +\n        '-' +\n        byteToHex[arr[offset + 4]] +\n        byteToHex[arr[offset + 5]] +\n        '-' +\n        byteToHex[arr[offset + 6]] +\n        byteToHex[arr[offset + 7]] +\n        '-' +\n        byteToHex[arr[offset + 8]] +\n        byteToHex[arr[offset + 9]] +\n        '-' +\n        byteToHex[arr[offset + 10]] +\n        byteToHex[arr[offset + 11]] +\n        byteToHex[arr[offset + 12]] +\n        byteToHex[arr[offset + 13]] +\n        byteToHex[arr[offset + 14]] +\n        byteToHex[arr[offset + 15]]).toLowerCase();\n}\nfunction stringify(arr, offset = 0) {\n    const uuid = unsafeStringify(arr, offset);\n    if (!validate(uuid)) {\n        throw TypeError('Stringified UUID is invalid');\n    }\n    return uuid;\n}\nexport default stringify;\n", "let getRandomValues;\nconst rnds8 = new Uint8Array(16);\nexport default function rng() {\n    if (!getRandomValues) {\n        if (typeof crypto === 'undefined' || !crypto.getRandomValues) {\n            throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n        }\n        getRandomValues = crypto.getRandomValues.bind(crypto);\n    }\n    return getRandomValues(rnds8);\n}\n", "import native from './native.js';\nimport rng from './rng.js';\nimport { unsafeStringify } from './stringify.js';\nfunction _v4(options, buf, offset) {\n    options = options || {};\n    const rnds = options.random ?? options.rng?.() ?? rng();\n    if (rnds.length < 16) {\n        throw new Error('Random bytes length must be >= 16');\n    }\n    rnds[6] = (rnds[6] & 0x0f) | 0x40;\n    rnds[8] = (rnds[8] & 0x3f) | 0x80;\n    if (buf) {\n        offset = offset || 0;\n        if (offset < 0 || offset + 16 > buf.length) {\n            throw new RangeError(`UUID byte range ${offset}:${offset + 15} is out of buffer bounds`);\n        }\n        for (let i = 0; i < 16; ++i) {\n            buf[offset + i] = rnds[i];\n        }\n        return buf;\n    }\n    return unsafeStringify(rnds);\n}\nfunction v4(options, buf, offset) {\n    if (native.randomUUID && !buf && !options) {\n        return native.randomUUID();\n    }\n    return _v4(options, buf, offset);\n}\nexport default v4;\n", "const randomUUID = typeof crypto !== 'undefined' && crypto.randomUUID && crypto.randomUUID.bind(crypto);\nexport default { randomUUID };\n", "import EventBus from 'eventbusjs';\nimport { Blob } from 'types/Blob';\nimport { ApiClient } from './ApiClient';\nimport { CacheService } from './CacheService';\n\nexport class BlobService {\n    private apiClient: ApiClient;\n    private cacheService: CacheService;\n    private eventBus = EventBus;\n\n    constructor() {\n        this.apiClient = new ApiClient();\n        this.cacheService = new CacheService('blobService');\n    }\n\n    public async listBlobs(): Promise<Blob[]> {\n        let blobs = this.cacheService.getAll<Blob>();\n        if (!blobs || blobs.length === 0) {\n            blobs = await this.apiClient.fetchBlobs();\n            this.cacheService.setAll(blobs);\n        }\n        return blobs;\n    }\n\n    public async getBlob(id: string): Promise<Blob | null> {\n        let blob = this.cacheService.get<Blob>(id);\n        if (!blob) {\n            blob = await this.apiClient.fetchBlob(id);\n            if (blob) {\n                this.cacheService.set(id, blob);\n            }\n        }\n        return blob;\n    }\n\n    public async saveBlob(blob: Blob): Promise<void> {\n        console.log(`save`, blob.content.entries)\n        await this.apiClient.saveBlob(blob);\n        this.cacheService.set(blob.id, blob);\n        this.notifyEvent('blobUpdated', blob);\n    }\n\n    public async deleteBlob(id: string): Promise<void> {\n        await this.apiClient.deleteBlob(id);\n        this.cacheService.remove(id);\n        this.notifyEvent('blobDeleted', { id });\n    }\n\n    private notifyEvent(eventType: string, data: any) {\n        this.eventBus.dispatch(eventType, data);\n    }\n\n    public clear(): void {\n        this.cacheService.clear();\n    }\n}", "export class ApiClient {\n    //private baseUrl = ''; // Replace with actual API endpoint\n\n    public async fetchBlobs(): Promise<Blob[]> {\n        return [];\n        // const response = await fetch(`${this.baseUrl}/blobs`);\n        // return await response.json();\n    }\n\n    public async fetchBlob(id: string): Promise<Blob | null> {\n        return null;\n        // const response = await fetch(`${this.baseUrl}/blobs/${id}`);\n        // if (!response.ok) return null;\n        // return await response.json();\n    }\n\n    public async saveBlob(blob: Blob): Promise<void> {\n        return Promise.resolve();\n        // await fetch(`${this.baseUrl}/blobs/${blob.id}`, {\n        //     method: 'PUT',\n        //     headers: { 'Content-Type': 'application/json' },\n        //     body: JSON.stringify(blob)\n        // });\n    }\n\n    public async deleteBlob(id: string): Promise<void> {\n        return Promise.resolve();\n        //await fetch(`${this.baseUrl}/blobs/${id}`, { method: 'DELETE' });\n    }\n}", "import LocalStorageFallback from 'local-storage-fallback';\n\nexport class CacheService {\n    private storage: LocalStorageFallback;\n    private prefix: string;\n\n    constructor(prefix: string) {\n        this.storage = LocalStorageFallback;\n        this.prefix = prefix;\n    }\n\n    public get<T>(key: string): T | null {\n        const item = this.storage.getItem(this.getKey(key));\n        return item ? JSON.parse(item) : null;\n    }\n\n    public set<T>(key: string, value: T): void {\n        this.storage.setItem(this.getKey(key), JSON.stringify(value));\n    }\n\n    public remove(key: string): void {\n        this.storage.removeItem(this.getKey(key));\n    }\n\n    public getAll<T>(): T[] {\n        const items = [];\n        for (let i = 0; i < this.storage.length; i++) {\n            const key = this.storage.key(i);\n            if (key && key.startsWith(this.prefix)) {\n                items.push(JSON.parse(this.storage.getItem(key) || '{}'));\n            }\n        }\n        return items;\n    }\n\n    public setAll<T>(items: T[]): void {\n        items.forEach(item => {\n            if ('id' in item) {\n                this.set((item as any).id, item);\n            }\n        });\n    }\n\n    public clear(): void {\n        this.getAll().forEach((_, index) => {\n            const key = this.storage.key(index);\n            if (key && key.startsWith(this.prefix)) {\n                this.storage.removeItem(key);\n            }\n        });\n    }\n\n    private getKey(key: string): string {\n        return `${this.prefix}:${key}`;\n    }\n}", "import { NodeEntryCache } from 'components/shared/BlobEditor/lib/NodeEntryCache/NodeEntryCache';\nimport { Blob, BlobContent } from 'types/Blob';\nimport { IPlugin } from '../plugins/IPlugin';\nimport { nerUtils } from './NodeEntryCache/nerUtils.js';\nimport { getLogger } from 'utils/logging';\nimport { debugState } from '../../../../lib/utils/debug/DebugPanel.js';\n\nconst { log, error } = getLogger('WEditor', { color: 'blue', enabled: true });\n\nconst CHANGE_TIMEOUT_MS = 500; // time delay to save after last key/input\nconst AUTOSAVE_TIMEOUT_MS = 3000; // time delay to save automatically\n\nconst CONTENT_ROOT_CLASS = 'w-content';\n\ntype WEditorConfig = {\n    focusOnStart: boolean;\n};\n\nconst DEFAULT_CONFIG = (): WEditorConfig => ({\n    focusOnStart: false\n});\n\nexport class WEditor {\n    private contentEditable: HTMLDivElement | null;\n\n    private applyChangesTimeoutId: Timeout | null = null;\n    private autoSaveTimeoutId: Timeout | null = null;\n\n    private blob: Blob;\n    private nodeCache: NodeEntryCache;\n\n    private lastContentChangeType: string | undefined;\n\n    constructor(\n        private container: HTMLElement,\n        private onChangeHandler: (content: BlobContent) => void,\n        private plugins: IPlugin[] = [],\n        private config: WEditorConfig = DEFAULT_CONFIG()\n    ) {\n        this.nodeCache = new NodeEntryCache();\n        this.initialize();\n    }\n\n    private initialize() {\n        if (!this.container) return console.error('WEditor initialization failed: Container is null');\n\n        if (!this.contentEditable) {\n            this.contentEditable = document.createElement('div');\n            this.contentEditable.setAttribute('contenteditable', 'true');\n            this.contentEditable.classList.add(CONTENT_ROOT_CLASS);\n            this.container.appendChild(this.contentEditable);\n        }\n\n        // init plugins:\n        this.plugins.forEach((plugin) => plugin.initialize(this, this.container));\n\n        // setup event listeners:\n        document.addEventListener('keydown', this.handleKeyDown);\n        document.addEventListener('keyup', this.handleKeyUp);\n        this.contentEditable.addEventListener('input', this.handleContentChange);\n\n        if (this.config.focusOnStart) {\n            this.contentEditable.focus();\n        }\n    }\n\n    public loadBlob(blob?) {\n        if (blob) this.blob = blob;\n        if (!this.contentEditable) return console.error('Cannot load blob: ContentEditable is null');\n        if (!this.blob) return console.error('No blob given to load.');\n        this.contentEditable.innerHTML = '';\n\n        // create a root node:\n        this.nodeCache.hydrateContent(this.blob.content.entries, this.contentEditable);\n        this.debugState();\n\n        //this.convertToHTML(this.blob.content, this.contentEditable);\n        // todo: should hydrate node cache\n    }\n\n    private handleKeyDown = (e) => {\n        if (e.target == this.contentEditable) {\n            e.stopPropagation();\n            if (e.key == 'Enter') {\n                this.handleEnter(e);\n            } else if (e.key == 'Backspace') {\n                // if the node will be empty then prevent default and let the keyup handle it.\n                //e.preventDefault();\n                this.handleBackspace(e);\n            }\n        }\n    };\n\n    // todo: on shift+enter... should manually insert the break entry after the current node in it's parent\n    // ... so that it does not trigger a full re-build of the parent node and it's content.\n    // todo: on enter... should create the group node but without the break?\n    // bug: multiple break chilren arent added to ner.children but are seen in entry.children.\n    private handleKeyUp = (e) => {\n        if (e.target == this.contentEditable) {\n            //e.stopPropagation();\n            if (e.key == 'Enter') {\n                //this.handleEnter(e);\n            } else if (e.key == 'Backspace') {\n                //this.handleBackspace(e);\n            }\n        }\n    };\n\n    private handleEnter = (e) => {\n        const node = this.getCurrentEditingNode();\n        log(`Enter`, node, e);\n        this.lastEnterNode = node;\n        if (e.shiftKey) {\n            // e.preventDefault();\n        }\n    };\n\n    // TODO: Detect backspace on keydown... if the current node is empty, delete the node in entry and ner tree, and allow the event to continue deleting it in the dom.\n    private handleBackspace = (e) => {\n        const node = this.getCurrentEditingNode() as HTMLElement;\n        const childNodes = Array.from(node.childNodes);\n        // if the current editing node has no children or content, delete it from the tree\n        if (node) {\n            //\n            // if it's not a text node, it means we broke into the previous node and removed the last one.\n            if (node.nodeType != Node.TEXT_NODE) {\n                log(`backspace on edit node:`, node, childNodes, node.innerHTML);\n                return;\n                // go through all node's children and remove any that no longer exist\n                const ner = nerUtils.findNER(node, this.nodeCache);\n                if (ner) {\n                    setTimeout(() => {\n                        log(`nodes after timeout:`, node, childNodes, node.innerHTML);\n                        ner.children.forEach((c, i) => {\n                            const exists = Array.from(node.childNodes).find((cn) => c.node == cn);\n                            if (!exists) {\n                                // remove from ner.entry.children and ner.children.\n                                const childEntry = c.entry;\n                                if (Array.isArray(ner.entry?.children)) {\n                                    const di = ner.entry.children.findIndex((ec) => ec == childEntry);\n                                    log(`DELETING child entry:`, di, childEntry);\n                                    if (di > -1) ner.entry.children.splice(di, 1);\n                                }\n                                log(`DELETING NER:`, i, c);\n                                ner.children.splice(i, 1);\n                            }\n                            {\n                                log(`node still exists.`, c, i);\n                            }\n                        });\n                    }, 0);\n                } else {\n                    console.error(`NER not found on backspace??`);\n                }\n\n                if (node.classList.contains(CONTENT_ROOT_CLASS)) {\n                    //node.innerHTML = '';\n                }\n\n                this.nodeCache.deleteNER(node);\n            } else {\n                // todo: need to get text on key up...\n                log(`backspace on text node:`, node);\n                return; //, `text: \"${node.textContent}\", html: \"${node.innerHTML}\"`);\n                // if text has become empty, remove the node... ?\n\n                // try to find the text node?\n                let ner = nerUtils.findNER(node, this.nodeCache);\n                if (ner) log(`Text node FOUND:`, ner);\n                else {\n                    log(`! Text node NOT found !`, node);\n                }\n            }\n        }\n    };\n\n    private handleContentChange = (e) => {\n        // Find the node where the edit took place\n        let editNode: Node | undefined = this.getCurrentEditingNode();\n        log(`handleContentChange(): ${e.inputType}`, editNode);\n\n        switch (e.inputType) {\n            case 'insertText':\n                break;\n            case 'deleteContentBackward':\n                break;\n            case 'insertParagraph':\n                break;\n            case 'insertLineBreak':\n                // if (this.lastEnterNode && this.lastEnterNode != editNode) {\n                //     console.log(`ENTER in parent.`, editNode, this.lastEnterNode, this.lastEnterNode.nextSibling, this.lastEnterNode.nextSibling?.nextSibling, this.lastEnterNode.nextSibling?.nodeName);\n                //     const doubleSibling = this.lastEnterNode.nextSibling?.nextSibling;\n                //     if (doubleSibling?.nodeName == 'BR') {\n                //         //console.log(`REMOVING BREAK.`);\n                //         doubleSibling.remove();\n                //     }\n                // } else {\n                //     console.log(`ENTER in child.`, editNode, this.lastEnterNode);\n                // }\n                break;\n            case 'insertFromPaste':\n                break;\n            case 'deleteByCut':\n                // todo: reconcile parent node...\n                break;\n            default:\n                console.log(`Unknown input type:`, e, editNode);\n                throw new Error('UNKNOWN INPUT TYPE: ' + e.inputType);\n        }\n\n        if (window.getSelection) {\n            let range = window.getSelection()?.getRangeAt(0);\n            editNode = range?.commonAncestorContainer;\n        }\n\n        // Apply the changes immediately to the entry, for throttled commit later\n        this.applyChanges(editNode, e.inputType);\n\n        this.lastContentChangeType = e.inputType;\n\n        this.debugState();\n    };\n\n    private debugState() {\n        debugState('entryTree', this.nodeCache.rootNER?.entry);\n        debugState('nerTree', this.nodeCache.rootNER);\n    }\n\n    // updates the given node's entry with it's changed content\n    private applyChanges(node, inputType) {\n        if (!node) throw 'No node given to applyChanges()';\n\n        const change = this.nodeCache.applyChange(node, inputType);\n        // todo: can store or serialize change object to backend or other clients.\n\n        // Signal to save all pending changes after timeout.\n        // One timer will (definitely) autosave content every X secs, and the other saves after the last keypress.\n        if (this.applyChangesTimeoutId) clearTimeout(this.applyChangesTimeoutId);\n        this.applyChangesTimeoutId = setTimeout(() => {\n            this.commitChanges();\n        }, CHANGE_TIMEOUT_MS);\n\n        if (!this.autoSaveTimeoutId) {\n            this.autoSaveTimeoutId = setTimeout(() => {\n                this.commitChanges();\n            }, AUTOSAVE_TIMEOUT_MS);\n        }\n    }\n\n    // Converts content area HTML to JSON. Any html elements associated with custom \"types\" will be ignored convert to JSON through their handlers.\n    public commitChanges(): BlobContent | null {\n        if (!this.contentEditable) throw 'Cannot apply changes: ContentEditable is null';\n\n        // Clear the auto-save and auto-change timeouts since we're saving now\n        if (this.autoSaveTimeoutId) this.autoSaveTimeoutId = clearTimeout(this.autoSaveTimeoutId);\n        if (this.applyChangesTimeoutId) this.applyChangesTimeoutId = clearTimeout(this.applyChangesTimeoutId);\n\n        const content: BlobContent = { entries: this.nodeCache.getEntries() };\n        this.onChangeHandler(content);\n        return content;\n    }\n\n    // helper to clear all content (for dev)\n    public clearContent(commit?) {\n        if (this.contentEditable) {\n            this.contentEditable.innerHTML = '';\n            this.nodeCache.clear();\n            if (commit) this.commitChanges();\n            this.debugState();\n        }\n    }\n\n    private getCurrentEditingNode(): Node | undefined {\n        if (window.getSelection) {\n            let range = window.getSelection()?.getRangeAt(0);\n            return range?.commonAncestorContainer;\n        }\n    }\n}\n", "import { BreakEntry, ContentEntries, ContentEntry, GroupEntry, TextEntry } from 'components/shared/BlobEditor/lib/NodeEntryCache/ContentEntries';\nimport { nerUtils } from './nerUtils';\nimport { getLogger } from 'lib/utils/logging.js';\nimport { NER, NodeEntryRef } from './NodeEntries.js';\n\nconst { log, error } = getLogger('NodeEntryCache', { color: 'yellow', enabled: true });\n\nexport const DEFAULT_ENTRIES = () => ([\n    {\n        id: ContentEntries.nextId++,\n        type: 'break',\n        attributes: {},\n        children: []\n    }\n]);\n\nexport class NodeEntryCache {\n    public entries: Array<ContentEntry> | undefined;\n    public rootNER: NodeEntryRef | undefined;\n    public lastNER: NodeEntryRef | undefined = undefined; // reference to last-edited node for faster/immdiate lookups\n    private lastInputType: string | undefined; // keeps track of previous input, so we can better manage removing duplicate breaks upon new text\n\n    // Creates elements from the given list of entries, and insert them into the node tree.\n    public hydrateContent(entries: Array<ContentEntry>, node: Node) {\n        this.entries = entries || DEFAULT_ENTRIES();\n\n        // create a root node to start\n        this.rootNER = NER(node, undefined, [], undefined);\n\n        // create a root entry from the container (a group), and re-assign the entry children so we can pull for the entries dataset later.\n        this.rootNER.entry = ContentEntries.convertNodeToEntry(node);\n        this.rootNER.entry.children = this.entries;\n        this.rootNER.entry.children.forEach(e => this.createNERFromEntry(e, this.rootNER));\n\n        log(`hydrated.`, entries, this.rootNER);\n    }\n\n    // From a given entry... creates the dom reference for it, and adds to the parent if given, or root.\n    // If the entry has children... the child dom elements will also be created and added recursively.\n    public createNERFromEntry(entry: ContentEntry, parent?: NodeEntryRef) {\n        if (!this.rootNER) throw \"rootNER has not been created. Create a root node or call hydrateContent first.\";\n        if (!parent) parent = this.rootNER; // default to rootNER\n        // create the base node to start with\n        const ner = nerUtils.createNERFromEntry(entry, parent, this);\n        if (!ner?.node) throw \"Node->entry node could not be created from type: \" + entry.type;\n        return ner;\n    }\n\n    // Locate an NER in the tree by a dom node reference.\n    public findNER(node: Node, parent?): NodeEntryRef | undefined {\n        return nerUtils.findNER(node, this, parent);;\n    }\n\n    // Locates and updates the NER for the node, of it exists, or inserts a new one.\n    public updateOrInsert(node: Node, inputType?: string): NodeEntryRef {\n        if (!node.parentNode) throw \"node.parentNode does not exist. Invalid node?\"\n\n        // if the update is on the root, the update is a removal of a previous element.\n        const isRootNode = node == this.rootNER?.node;\n        let parent = isRootNode ? this.rootNER : this.findNER(node.parentNode as Node);\n        if (!parent && node.parentNode.parentNode) {\n            parent = this.findNER(node.parentNode.parentNode as Node);\n            console.log(`Looking for parent ancestor: `, parent, node.parentNode.parentNode)\n        }\n        let ner = isRootNode ? this.rootNER : this.findNER(node, parent);\n\n        //if (ner) log(`found node`, isRootNode ? '[ROOT]' : '', node == this.lastNER?.node ? '[LAST]' : '', ner);\n        //else log(`node not found. creating...`, node, 'parentNER:', parent);\n\n        // TODO: if node is new, and is text node... it will remove an added <br> and create the text node... so we want to first confirm the sibling is a break, then remove the break NER and entry, then let it create the text node.\n        if (!ner && node.nodeType == Node.TEXT_NODE) {\n            const ns = node.nextSibling;\n            console.log(`NEW TEXT:`, node, `nextSibling:`, ns, 'prevSibling:', node.previousSibling, 'prevPrev:', node.previousSibling?.previousSibling, 'inputType:', inputType, 'lastInputType', this.lastInputType);\n            // if nextSibling is null, or doesn't match the next entry in the ner parent, and its a break, then delete that ner node and entry.\n        }\n\n        if (ner) nerUtils.updateNER(ner, this);\n        else if (parent) ner = nerUtils.createNERFromNode(node, parent, this);\n        else {\n            // if parent wasn't found... its most likely a new text node on the initial blank content area.\n            console.log(`Parent NER not found for node:`, node, node.parentNode, ner);\n            throw \"Parent NER not found for updateOrInsert.\"\n        }\n\n        return this.lastNER = ner;\n    }\n\n    // Finds the node in the tree and removes the entry from it, and the dom node as well.\n    public deleteNER(node) {\n        return nerUtils.deleteNER(node, this);\n    }\n\n    // Called when a change is detected on the node. Finds the given node in the tree and updates it's entry.\n    // If the node does not exist the NER is inserted in its relative dom position.\n    public applyChange(node: Node, inputType: string) {\n        //log(`applyChange`, 'isRoot?', node == this.rootNER?.node, 'node:', node, 'entry:', entry)\n        try {\n            // todo: move this to WEditor?\n            // if its a text entry, check the parent... if it only has a break, remove the break.\n            //console.log(`converted:`, entry);\n            return this.lastNER = this.updateOrInsert(node, inputType);\n            this.lastInputType = inputType;\n        } catch (e) {\n            log(`Exception in applyChange():`, e);\n        }\n    }\n\n    public clear = () => {\n        nerUtils.clearCache(this);\n    }\n\n    public getEntries = () => {\n        return this.entries;\n    }\n\n}\n", "import { getLogger } from 'lib/utils/logging.js';\nimport { v4 as uuid } from 'uuid';\n\nconst { log, warn } = getLogger('ContentEntries', { color: 'red', enabled: false });\n\ninterface BaseEntry {\n    id?: string;\n    type: string;\n    attributes?: { [key: string]: string };\n    children?: string | ContentEntry[] | null;\n}\n\nexport abstract class ContentEntry implements BaseEntry {\n    public id?: string;\n    abstract type: string;\n    abstract attributes?: { [key: string]: string };\n    abstract children?: string | ContentEntry[];\n\n    static convertToHTML(entry: ContentEntry, parent: HTMLElement): void {\n        throw new Error('Method not implemented');\n    }\n\n    static convertNodeToEntry(node: Node): ContentEntry | null {\n        throw new Error('Method not implemented');\n    }\n}\n\nexport class TextEntry extends ContentEntry {\n    type = 'text';\n    attributes?: { [key: string]: string };\n    children: string;\n\n    constructor(children: string, attributes?: { [key: string]: string }) {\n        super();\n        if (typeof children != 'string') throw \"Error: TextEntry expects children to be a string.\";\n        this.children = children;\n        this.attributes = attributes || {};\n    }\n\n    static convertToHTML(entry: TextEntry, parent: HTMLElement) {\n        let textNode: Node;\n        let wrapper: HTMLElement | null = null;\n        let node: HTMLElement | Node | undefined;\n\n        if (entry.attributes) {\n            if (entry.attributes['bold']) {\n                wrapper = document.createElement('b');\n            } else if (entry.attributes['italic']) {\n                wrapper = document.createElement('i');\n            } else if (entry.attributes['span']) {\n                wrapper = document.createElement('span');\n                if (entry.attributes['class']) {\n                    wrapper.className = entry.attributes['class'];\n                }\n            }\n            // Add more conditions for other text styling tags if needed\n        }\n\n        textNode = node = document.createTextNode(entry.children);\n        if (wrapper) {\n            wrapper.appendChild(textNode);\n            if (wrapper.tagName === 'SPAN') {\n                Object.entries(entry.attributes || {}).forEach(([key, value]) => {\n                    if (key !== 'span' && key !== 'class') {\n                        wrapper.setAttribute(key, value);\n                    }\n                });\n            }\n            node = wrapper;\n        }\n        parent.appendChild(node);\n        const ner = NER(node, entry, [], parent);\n        return ner;\n\n    }\n\n    static convertNodeToEntry(node: Node): TextEntry | null {\n        if (node.nodeType === Node.TEXT_NODE) {\n            return new TextEntry(node.textContent || '');\n        } else if (node instanceof HTMLElement) {\n            let attributes: { [key: string]: string } = {};\n            let textContent = '';\n\n            if (node.tagName === 'B') {\n                attributes['bold'] = 'true';\n                textContent = node.textContent || '';\n            } else if (node.tagName === 'I') {\n                attributes['italic'] = 'true';\n                textContent = node.textContent || '';\n            } else if (node.tagName === 'SPAN') {\n                attributes['span'] = 'true';\n                textContent = node.textContent || '';\n                Array.from(node.attributes).forEach(attr => {\n                    attributes[attr.name] = attr.value;\n                });\n            } else {\n                return null;\n            }\n\n            return new TextEntry(textContent, attributes);\n        }\n        return null;\n    }\n}\n\nexport class HeaderEntry extends ContentEntry {\n    type = 'header';\n    attributes?: { [key: string]: string };\n    children: string;\n\n    constructor(children: string, attributes?: { [key: string]: string }) {\n        super();\n        this.children = children;\n        this.attributes = attributes;\n    }\n\n    static convertToHTML(entry: HeaderEntry, parent: HTMLElement) {\n        const level = entry.attributes?.level || '1';\n        const h = document.createElement(`h${level}`);\n        h.textContent = entry.children;\n        if (entry.attributes) {\n            for (const [key, value] of Object.entries(entry.attributes)) {\n                if (key !== 'level') {\n                    h.setAttribute(key, value);\n                }\n            }\n        }\n        parent.appendChild(h);\n    }\n\n    static convertNodeToEntry(node: HTMLHeadingElement): HeaderEntry {\n        const attributes = Array.from(node.attributes).reduce((acc, attr) => {\n            acc[attr.name] = attr.value;\n            return acc;\n        }, {} as { [key: string]: string });\n        return new HeaderEntry(node.textContent || '', attributes);\n    }\n}\n\nexport class FileEntry extends ContentEntry {\n    type = 'file';\n    attributes?: { [key: string]: string };\n    children: string;\n\n    constructor(children: string, attributes?: { [key: string]: string }) {\n        super();\n        this.children = children;\n        this.attributes = attributes;\n    }\n\n    static convertToHTML(entry: FileEntry, parent: HTMLElement) {\n        const fileDiv = document.createElement('div');\n        fileDiv.textContent = entry.children;\n        if (entry.attributes) {\n            for (const [key, value] of Object.entries(entry.attributes)) {\n                fileDiv.setAttribute(key, value);\n            }\n        }\n        parent.appendChild(fileDiv);\n    }\n\n    static convertNodeToEntry(node: HTMLDivElement): FileEntry {\n        const attributes = Array.from(node.attributes).reduce((acc, attr) => {\n            acc[attr.name] = attr.value;\n            return acc;\n        }, {} as { [key: string]: string });\n        return new FileEntry(node.textContent || '', attributes);\n    }\n}\n\nexport class BreakEntry extends ContentEntry {\n    type = 'break';\n    attributes?: { [key: string]: string };\n    children = [];\n    //children?: ContentEntry[];\n\n    constructor(attributes?: { [key: string]: string }) {\n        super();\n        this.attributes = attributes;\n    }\n\n    static convertToHTML(entry: BreakEntry, parent: HTMLElement) {\n        const br = document.createElement('br');\n        if (entry.attributes) {\n            for (const [key, value] of Object.entries(entry.attributes)) {\n                br.setAttribute(key, value);\n            }\n        }\n        parent.appendChild(br);\n    }\n\n    static convertNodeToEntry(node: HTMLElement): BreakEntry | null {\n        if (node.tagName === 'BR') {\n            const attributes = Array.from(node.attributes).reduce((acc, attr) => {\n                acc[attr.name] = attr.value;\n                return acc;\n            }, {} as { [key: string]: string });\n            return new BreakEntry(attributes);\n        }\n        return null;\n    }\n}\n\nexport class PreEntry extends ContentEntry {\n    type = 'pre';\n    attributes?: { [key: string]: string };\n    children: ContentEntry[];\n\n    constructor(attributes?: { [key: string]: string }, children: ContentEntry[] = []) {\n        super();\n        this.attributes = attributes;\n        this.children = children;\n    }\n\n    static convertToHTML(entry: PreEntry, parent: HTMLElement) {\n        const pre = document.createElement('pre');\n        if (entry.attributes) {\n            pre.setAttribute('type', entry.type);\n            for (const [key, value] of Object.entries(entry.attributes)) {\n                pre.setAttribute(key, value);\n            }\n        }\n        parent.appendChild(pre);\n        entry.children.forEach(child => ContentEntries.convertToHTMLByType(child, pre));\n    }\n\n    static convertNodeToEntry(node: HTMLPreElement): PreEntry {\n        const attributes = Array.from(node.attributes).reduce((acc, attr) => {\n            acc[attr.name] = attr.value;\n            return acc;\n        }, {} as { [key: string]: string });\n\n        const children: ContentEntry[] = [];\n        Array.from(node.childNodes).forEach(childNode => {\n            const childEntry = ContentEntries.convertNodeToEntry(childNode);\n            if (childEntry) children.push(childEntry);\n        });\n\n        return new PreEntry(attributes, children);\n    }\n}\n\nexport class CodeEntry extends ContentEntry {\n    type = 'code';\n    attributes?: { [key: string]: string };\n    children: ContentEntry[];\n\n    constructor(attributes?: { [key: string]: string }, children: ContentEntry[] = []) {\n        super();\n        this.attributes = attributes;\n        this.children = children;\n    }\n\n    static convertToHTML(entry: CodeEntry, parent: HTMLElement) {\n        const code = document.createElement('code');\n        if (entry.attributes) {\n            code.setAttribute('type', entry.type);\n            for (const [key, value] of Object.entries(entry.attributes)) {\n                code.setAttribute(key, value);\n            }\n        }\n        parent.appendChild(code);\n        entry.children.forEach(child => ContentEntries.convertToHTMLByType(child, code));\n    }\n\n    static convertNodeToEntry(node: HTMLElement): CodeEntry {\n        if (node.tagName !== 'CODE') return null;\n\n        const attributes = Array.from(node.attributes).reduce((acc, attr) => {\n            acc[attr.name] = attr.value;\n            return acc;\n        }, {} as { [key: string]: string });\n\n        const children: ContentEntry[] = [];\n        Array.from(node.childNodes).forEach(childNode => {\n            const childEntry = ContentEntries.convertNodeToEntry(childNode);\n            if (childEntry) children.push(childEntry);\n        });\n\n        return new CodeEntry(attributes, children);\n    }\n}\n\nexport class GroupEntry extends ContentEntry {\n    type = 'group';\n    attributes?: { [key: string]: string };\n    children: ContentEntry[];\n\n    constructor(attributes?: { [key: string]: string }, children: ContentEntry[] = []) {\n        super();\n        this.attributes = attributes;\n        this.children = children;\n    }\n\n    static convertToHTML(entry: GroupEntry, parent: HTMLElement) {\n        const div = document.createElement('div');\n        if (entry.attributes) {\n            for (const [key, value] of Object.entries(entry.attributes)) {\n                div.setAttribute(key, value);\n            }\n        }\n        parent.appendChild(div);\n        if (Array.isArray(entry.children)) {\n            entry.children.forEach(child => ContentEntries.convertToHTMLByType(child, div));\n        } else if (entry.children) {\n            // ContentEntries.convertToHTMLByType(entry.ild, div)\n            div.childrenText = entry.children;\n        }\n    }\n\n    static convertNodeToEntry(node: HTMLElement): GroupEntry {\n        const attributes = Array.from(node.attributes).reduce((acc, attr) => {\n            acc[attr.name] = attr.value;\n            return acc;\n        }, {} as { [key: string]: string });\n\n        // todo: consolidate entries?\n        const children: ContentEntry[] = [];\n        Array.from(node.childNodes).forEach(childNode => {\n            const childEntry = ContentEntries.convertNodeToEntry(childNode);\n            if (childEntry) children.push(childEntry);\n        });\n\n        return new GroupEntry(attributes, children);\n    }\n}\n\nexport class LinkEntry extends ContentEntry {\n    type = 'link';\n    attributes?: { [key: string]: string };\n    children: string | ContentEntry[];\n\n    constructor(children: string | ContentEntry[], attributes?: { [key: string]: string }) {\n        super();\n        this.children = children;\n        this.attributes = attributes;\n    }\n\n    static convertToHTML(entry: LinkEntry, parent: HTMLElement) {\n        const a = document.createElement('a');\n        if (entry.attributes) {\n            for (const [key, value] of Object.entries(entry.attributes)) {\n                a.setAttribute(key, value);\n            }\n        }\n        parent.appendChild(a);\n\n        if (Array.isArray(entry.children)) {\n            entry.children.forEach(child => ContentEntries.convertToHTMLByType(child, a));\n        } else {\n            a.textContent = entry.children;\n        }\n    }\n\n    static convertNodeToEntry(node: HTMLAnchorElement): LinkEntry {\n        const attributes = Array.from(node.attributes).reduce((acc, attr) => {\n            acc[attr.name] = attr.value;\n            return acc;\n        }, {} as { [key: string]: string });\n\n        let children: string | ContentEntry[];\n        if (node.childNodes.length > 0) {\n            if (node.childNodes.length === 1 && node.childNodes[0].nodeType === Node.TEXT_NODE) {\n                children = node.textContent || '';\n            } else {\n                children = Array.from(node.childNodes).map(childNode => ContentEntries.convertNodeToEntry(childNode)).filter(Boolean) as ContentEntry[];\n            }\n        } else {\n            children = '';\n        }\n\n        return new LinkEntry(children, attributes);\n    }\n}\n\nexport class CustomEntry extends ContentEntry {\n    type = 'custom';\n    attributes?: { [key: string]: string };\n    children: ContentEntry[];\n\n    constructor(attributes?: { [key: string]: string }, children: ContentEntry[] = []) {\n        super();\n        this.attributes = attributes;\n        this.children = children;\n    }\n\n    static convertToHTML(entry: CustomEntry, parent: HTMLElement) {\n        const customDiv = document.createElement('div');\n        customDiv.setAttribute('custom', 'true');\n        if (entry.attributes) {\n            for (const [key, value] of Object.entries(entry.attributes)) {\n                customDiv.setAttribute(key, value);\n            }\n        }\n        parent.appendChild(customDiv);\n        entry.children.forEach(child => ContentEntries.convertToHTMLByType(child, customDiv));\n    }\n\n    static convertNodeToEntry(node: HTMLDivElement): CustomEntry | null {\n        if (node.getAttribute('custom') !== 'true') return null;\n\n        const attributes = Array.from(node.attributes).reduce((acc, attr) => {\n            acc[attr.name] = attr.value;\n            return acc;\n        }, {} as { [key: string]: string });\n\n        const children: ContentEntry[] = [];\n        Array.from(node.childNodes).forEach(childNode => {\n            const childEntry = ContentEntries.convertNodeToEntry(childNode);\n            if (childEntry) children.push(childEntry);\n        });\n\n        return new CustomEntry(attributes, children);\n    }\n}\n\nexport class ContentEntries {\n    static nextId = 0;\n\n    // make an html node from entry, append to parent, return NER for { node, entry, children } which is appended to current node in node cache nodeTree.\n    static convertToHTMLByType(entry: ContentEntry, parent: HTMLElement) {\n        console.trace();\n        throw \"DO NOT USE\";\n        switch (entry.type) {\n            case 'text':\n                TextEntry.convertToHTML(entry as TextEntry, parent);\n                break;\n            case 'group':\n                GroupEntry.convertToHTML(entry as GroupEntry, parent);\n                break;\n            case 'link':\n                LinkEntry.convertToHTML(entry as LinkEntry, parent);\n                break;\n            case 'header':\n                HeaderEntry.convertToHTML(entry as HeaderEntry, parent);\n                break;\n            case 'file':\n                FileEntry.convertToHTML(entry as FileEntry, parent);\n                break;\n            case 'custom':\n                CustomEntry.convertToHTML(entry as CustomEntry, parent);\n                break;\n            case 'pre':\n                PreEntry.convertToHTML(entry as PreEntry, parent);\n                break;\n            case 'code':\n                CodeEntry.convertToHTML(entry as CodeEntry, parent);\n                break;\n            case 'break':\n                BreakEntry.convertToHTML(entry as BreakEntry, parent);\n                break;\n            default:\n                console.warn('Unknown entry type:', entry.type);\n        }\n    }\n\n    static convertNodeToEntry(node: Node): ContentEntry {\n        if (!node || !node.nodeType) throw `${node ? 'Invalid' : 'No'} node given to convertNodeToEntry`;\n        let entry;\n        log(`convertNodeToEntry(), node:`, node.nodeType, node.tagName, node);\n\n        if (node.nodeType === Node.TEXT_NODE) {\n            entry = TextEntry.convertNodeToEntry(node);\n            log(`made text node`, node, entry)\n        }\n        else if (node.nodeName === 'DIV') {\n            const div = node as HTMLDivElement;\n            if (div.getAttribute('custom') === 'true') {\n                entry = CustomEntry.convertNodeToEntry(div);\n            } else {\n                log(`making group:`, node)\n                entry = GroupEntry.convertNodeToEntry(div);\n            }\n        }\n        else if (node.nodeName === 'A') {\n            entry = LinkEntry.convertNodeToEntry(node as HTMLAnchorElement);\n        }\n        else if (/^H[1-6]$/.test(node.nodeName)) {\n            entry = HeaderEntry.convertNodeToEntry(node as HTMLHeadingElement);\n        }\n        else if (node.nodeName === 'B' || node.nodeName === 'I' || node.nodeName === 'SPAN') {\n            entry = TextEntry.convertNodeToEntry(node as HTMLElement);\n        }\n        else if (node.nodeName === 'PRE') {\n            entry = PreEntry.convertNodeToEntry(node as HTMLPreElement);\n        }\n        else if (node.nodeName === 'CODE') {\n            entry = CodeEntry.convertNodeToEntry(node as HTMLElement);\n        }\n        else if (node.nodeName === 'BR') {\n            entry = BreakEntry.convertNodeToEntry(node as HTMLElement);\n            log(`made break node`, node.tagName, node, entry)\n        }\n\n        if (!entry) throw \"Could not convert node type to entry: \" + node.nodeType;\n\n        entry.id = ContentEntries.nextId++;\n        return entry;\n    }\n}", "import { getLogger } from \"lib/utils/logging.js\";\nimport { BreakEntry, ContentEntries, ContentEntry, GroupEntry, TextEntry } from \"./ContentEntries.js\";\nimport { DEFAULT_ENTRIES, NodeEntryCache } from \"./NodeEntryCache.js\";\nimport { BreakNode, GroupNode, NER, NodeEntryRef, TextNode } from \"./NodeEntries.js\";\n\nconst { log, warn } = getLogger('nerUtils', { color: 'yellow', enabled: true });\n\n// Returns a top-down node array path from the root or stop node to the given node using the node parents.\nfunction getParentPath(node, stopNode: Node | undefined, cache: NodeEntryCache): Array<Node> {\n    let lookupPath: Array<Node> = [];\n    let currNode: Node | undefined = node;\n    while (currNode) {\n        //console.log(`c`, currNode, currNode.parentNode)\n        lookupPath.push(currNode);\n        if (currNode == cache.rootNER.node || currNode == stopNode) break; // stop at root node\n        currNode = currNode.parentNode as Node;\n    }\n    return lookupPath;\n}\n\n// Find's the given node in the tree, if it exists, starting from the parent node if given.\nfunction findNER(node: Node, cache: NodeEntryCache, parent?: NodeEntryRef | undefined): NodeEntryRef | undefined {\n    if (!node) throw \"No node given to findNode()\";\n    if (!cache.rootNER?.node) throw \"No rootNER found on NodeEntryCache. Did you forget to call hydrateContent()?\";\n\n    // Check if the node is \"cached\", ie. it was the last edited node or its parent.\n    if (cache.lastNER?.node == node) return cache.lastNER;\n    if (cache.lastNER?.parent?.node == node) return cache.lastNER.parent;\n    if (cache.rootNER.node == node) return cache.rootNER;\n\n    // Create dom path from node to the root (or stop) node, then walk back down to find the target NER\n    let lookupPath: Array<Node> = nerUtils.getParentPath(node, parent?.node, cache);\n    let currNER = parent || cache.rootNER;\n    let currNode = lookupPath.pop(); // start at root or stop node\n    let nextNode: Node | undefined = lookupPath.pop(); // check if next (child) matches, or if current is the parent.\n\n    //log(`findNode`, node, lookupPath)\n    while (currNode) {\n        const isTarget = currNode == node; // true only when it starts at the target\n        const isParent = nextNode == node;\n\n        if (isTarget) {\n            warn(`IS TARGET?`, currNode, nextNode);\n            return currNER; // ?\n        }\n\n        // look if the node exists in this node's children, or continue on the path\n        for (const c of currNER.children) {\n            if (c.node == node) return c;\n            if (c.node == nextNode) {\n                currNER = c;\n                break;\n            }\n        };\n\n        // NER doesn't exist in the children.\n        if (isParent) return undefined;\n\n        currNode = nextNode;\n        nextNode = lookupPath.pop();\n    }\n\n    return undefined;\n}\n\n\n// Creates an NER with a new dom node from the given entry, and adds it to the parent NER, at insertPos if given.\nfunction createNERFromEntry(entry: ContentEntry, parent: NodeEntryRef, nodeCache: NodeEntryCache, insertPos?: number): NodeEntryRef {\n    if (!entry) throw \"No entry given to createNERFromEntry\";\n    if (!parent) throw \"No parent given to createNERFromEntry\";\n\n    let ner;\n    switch (entry.type) {\n        case 'text':\n            console.log(`creating text NER.`)\n            ner = TextNode.createNERFromEntry(entry as TextEntry, parent, this);\n            break;\n        case 'group':\n            console.log(`creating group NER.`)\n            ner = GroupNode.createNERFromEntry(entry as GroupEntry, parent, this);\n            break;\n        case 'break':\n            console.log(`creating break NER.`)\n            ner = BreakNode.createNERFromEntry(entry as BreakEntry, parent, this);\n            break;\n        default:\n            break\n    }\n    if (!ner) throw \"Error: Could not create NER from entry type: \" + entry.type;\n\n    //log(`createNERFromEntry`, ner, insertPos);//, parent.node.childNodes);\n\n    // add new node to parent NER tree and dom:\n    // todo: add the node to the parent in its position of the new node\n    if (insertPos) {\n        // add to parent NER tree\n        parent.children.splice(insertPos, 0, ner);\n\n        // add to parent dom tree:\n        const childNodes = Array.from(parent.node.childNodes);\n        if (!childNodes.length) parent.node.appendChild(ner.node); // no other children, just append\n        else {\n            // insert before others if pos=0, or after its previous node\n            if (insertPos == 0) parent.node.insertBefore(ner.node, parent.node.firstChild);\n            else {\n                const prevNode = childNodes[insertPos - 1];\n                if (!prevNode) {\n                    console.log(`No previous node?`, insertPos, childNodes, parent)\n                    throw \"No prevNode found at pos: \" + (insertPos - 1);\n                }\n                console.log(`inserting node after:`, prevNode, `new node (ID: ${ner.id}):`, ner.node, 'at:', insertPos)\n                prevNode.after(ner.node);\n            }\n        }\n    } else {\n        parent.children.push(ner);\n        parent.node.appendChild(ner.node);\n    }\n\n    //log(`${entry.type} NER result:`, entry, ner);\n\n    return ner;\n}\n\n// creates a new NER subtree from an existing node and entry, adding it to the parent.\nfunction createNERFromNodeEntry(node: Node, entry: ContentEntry, parent: NodeEntryRef) {\n    const ner: NodeEntryRef = NER(node, entry, [], parent);\n    if (Array.isArray(entry.children)) {\n        entry.children.forEach((childEntry, i) => {\n            const childNode = node.childNodes[i];\n            //console.log(`dom child match?`, i, childEntry, childNode);\n            createNERFromNodeEntry(childNode, childEntry, ner);\n        });\n    }\n    // add the ner to the parent:\n    parent.children.push(ner);\n    return ner;\n}\n\n// Creates and insert a new entry and NER from the given dom node.\nfunction createNERFromNode(node: Node, parent: NodeEntryRef, cache: NodeEntryCache): NodeEntryRef {\n    if (!parent?.node) throw \"Error: No node found on parent NER to insert to.\";\n    const entry = ContentEntries.convertNodeToEntry(node);\n    const ner = createNERFromNodeEntry(node, entry, parent);\n\n    // add the new entry to the parent entries\n    if (Array.isArray(parent.entry?.children)) {\n        // todo: add in position\n        const pos = Array.from(parent.node.childNodes).findIndex(c => c == node);\n        console.log(`Inserting entry (ID: ${entry.id}) into parent at POS:`, pos + 1);\n        parent.entry.children.splice(pos + 1, 0, entry);\n    }\n    // // the node already existed so we assume we do not need to add to the parent dom again. todo?\n    log(`NER created:`, ner);\n    return ner;\n}\n\nfunction createNERAfterNode(node: Node, entry: ContentEntry, parent: NodeEntryRef, cache: NodeEntryCache): NodeEntryRef {\n    // create a new node after node... create ner...\n    // find position of the node in the parent:\n    const pos = Array.from(parent.node.childNodes).findIndex(n => n == node);\n    return createNERFromEntry(entry, parent, cache, pos + 1); // insert after\n}\n\n\n\n// Updates the given NER references to a new entry.\nfunction updateNER(ner, cache: NodeEntryCache) {\n    //const prevChildren = ner.children;\n\n    // \"convert\" the node by creating a new entry and re-assigning the properties.\n    //const newEntry = ContentEntries.convertNodeToEntry(ner.node);\n\n    // the node changed... either it was a text node (a simple change),\n    // or a node was added or removed... in which case we just reconcile the children.\n\n    if (ner.node.nodeType == Node.TEXT_NODE) {\n        // just update the text\n        //console.log(`updating text NER...`)\n        // updateEntry(ner.entry, ner.node); // update the entry by type...\n        ner.entry.children = ner.node.textContent;\n    } else {\n        // reconcile the node children\n        //console.log(`syncing group node children...`, ner)\n        reconcileNodeChildren(ner, cache);\n        //updateEntry(ner.entry, ner.node);\n    }\n\n    // if (!ner.entry) ner.entry = newEntry;\n    // else {\n    //     ner.entry.type = newEntry.type;\n    //     ner.entry.children = newEntry.children;\n    //     ner.entry.attributes = newEntry.attributes;\n    // }\n\n    log(`UPDATE node finished:`, ner);//, prevChildren);\n    return ner;\n}\n\n\n// function insertNodeAfter(node: Node, entry: ContentEntry\n// Goes through the dom childNodes of the given NER node and adds or removes child NERs as needed.\nfunction reconcileNodeChildren(ner: NodeEntryRef, nodeCache: NodeEntryCache) {\n    console.log(`reconcile children`, ner)\n    if (ner.node.nodeType != Node.TEXT_NODE) {\n        const nodeChildren = Array.from(ner.node.childNodes);\n\n        // now through child NER's and remove those with no-longer-existing nodes\n        let noMoreChanges = false;\n        while (!noMoreChanges) {\n            noMoreChanges = true;\n            ner.children.forEach((c, i) => {\n                const exists = nodeChildren.find(nc => nc == c.node);\n                if (!exists) {\n                    console.log(`DANGLING NER, REMOVING...`, c, i);\n                    if (Array.isArray(ner.entry?.children)) ner.entry.children.splice(i, 1);\n                    ner.children.splice(i, 1);\n                    // need to remove from entries as well...\n                    noMoreChanges = false;\n                    //console.log(`Child NER removed from parent:`, ner);\n                }\n            });\n        }\n\n        // go through all dom nodes and add new NER's for non-existing:\n        noMoreChanges = false;\n        while (!noMoreChanges) {\n            noMoreChanges = true;\n            // keep re-getting child nodes so indexes stay upates\n            let nodeChildren = Array.from(ner.node.childNodes);\n            nodeChildren.forEach(nc => {\n                // find ner in the children\n                const exists = ner.children.find(c => c.node == nc);\n                if (!exists) {\n                    console.log(`CREATING NER CHILD for node:`, nc)\n                    let childNer = createNERFromNode(nc, ner, nodeCache);\n                    noMoreChanges = false;\n                    //console.log(`created new child:`, childNer);\n                }\n            });\n        }\n\n    }\n}\n\n\n// deletes the node and associated entry from the tree\nfunction deleteNER(node, cache) {\n    log(`deleteNode:`, node);\n}\n\nfunction clearCache(cache) {\n    if (Array.isArray(cache.entries)) while (cache.entries.pop()) { };\n    // clear last reference but be sure not to clear the root\n    if (cache.lastNER != cache.rootNER) cache.lastNER = undefined;\n    if (cache.rootNER) {\n        cache.rootNER.children = [];\n        if (cache.rootNER.entry?.children)\n            if (Array.isArray(cache.rootNER.entry.children)) {\n                while (cache.rootNER.entry.children.pop()) { };\n            }\n    }\n    cache.rootNER.entry.children.push(...DEFAULT_ENTRIES());\n}\n\nexport const nerUtils = {\n    getParentPath,\n    findNER,\n    createNERFromEntry,\n    createNERFromNode,\n    createNERAfterNode,\n    updateNER,\n    deleteNER,\n    clearCache\n};\n", "import { getLogger } from \"lib/utils/logging\";\nimport { BreakEntry, ContentEntries, ContentEntry, GroupEntry, TextEntry } from \"./ContentEntries.js\";\nimport { NodeEntryCache } from \"./NodeEntryCache.js\";\n\nconst { log, warn } = getLogger('NodeEntries', { color: 'yellow', enabled: true });\n\nexport type NodeEntryRef = {\n    node: Node;\n    entry: ContentEntry | undefined;\n    children: Array<NodeEntryRef>;\n    parent: NodeEntryRef | undefined;\n}\n\nexport const NER = (node, entry, children, parent) => ({ node, entry, children, parent });\n\nexport class GroupNode extends ContentEntry {\n    type = 'group';\n    attributes?: { [key: string]: string };\n    children: ContentEntry[];\n\n    constructor(attributes?: { [key: string]: string }, children: ContentEntry[] = []) {\n        super();\n        this.attributes = attributes;\n        this.children = children;\n    }\n\n    static createNERFromEntry(entry: GroupEntry, parent: NodeEntryRef, nodeCache: NodeEntryCache): NodeEntryRef {\n        const ner: NodeEntryRef = {\n            entry,\n            node: document.createElement('div'),\n            children: [],\n            parent\n        };\n        if (entry.attributes) {\n            for (const [key, value] of Object.entries(entry.attributes)) {\n                ner.node.setAttribute(key, value);\n            }\n        }\n        if (Array.isArray(entry.children)) {\n            //console.log(`group children:`, entry.children)\n            entry.children.forEach(child => nodeCache.createNERFromEntry(child, ner));\n        } else {\n            throw \"Expected array for GroupNode.children but received: \" + typeof entry.children;\n        }\n        return ner;\n    }\n\n    static convertNodeToEntry(node: HTMLElement): GroupEntry {\n\n        const attributes = Array.from(node.attributes).reduce((acc, attr) => {\n            acc[attr.name] = attr.value;\n            return acc;\n        }, {} as { [key: string]: string });\n\n        const children: ContentEntry[] = [];\n        Array.from(node.childNodes).forEach(childNode => {\n            const childEntry = ContentEntries.convertNodeToEntry(childNode);\n            if (childEntry) children.push(childEntry);\n        });\n        return new GroupEntry(attributes, children);\n    }\n}\n\nexport class TextNode extends ContentEntry {\n    type = 'text';\n    attributes?: { [key: string]: string };\n    children: string;\n\n    constructor(children: string, attributes?: { [key: string]: string }) {\n        super();\n        if (typeof children != 'string') throw \"Error: TextEntry expects children to be a string.\";\n        this.children = children;\n        this.attributes = attributes || {};\n    }\n\n    static createNERFromEntry(entry: TextEntry, parent: NodeEntryRef, nodeCache: NodeEntryCache): NodeEntryRef {\n        //console.log(`TextNode.createNodeEntry(), entry:`, entry, 'parent:', parent)\n        const ner = NER(document.createTextNode(entry.children), entry, [], parent);\n\n        if (entry.attributes) {\n            if (entry.attributes['bold']) {\n                ner.node.classList.add('bold');\n            }\n            if (entry.attributes['italic']) {\n                ner.node.classList.add('italic');\n            }\n        }\n\n        return ner;\n    }\n\n    static convertNodeToEntry(node: Node): TextEntry | null {\n        // todo: add new type\n        if (node.nodeType === Node.TEXT_NODE) {\n            return new TextEntry(node.textContent || '');\n        } else if (node instanceof HTMLElement) {\n            let attributes: { [key: string]: string } = {};\n            let textContent = '';\n\n            if (node.tagName === 'B') {\n                attributes['bold'] = 'true';\n                textContent = node.textContent || '';\n            } else if (node.tagName === 'I') {\n                attributes['italic'] = 'true';\n                textContent = node.textContent || '';\n            } else if (node.tagName === 'SPAN') {\n                attributes['span'] = 'true';\n                textContent = node.textContent || '';\n                Array.from(node.attributes).forEach(attr => {\n                    attributes[attr.name] = attr.value;\n                });\n            } else {\n                return null;\n            }\n\n            return new TextEntry(textContent, attributes);\n        }\n        return null;\n    }\n}\n\nexport class BreakNode extends ContentEntry {\n    type = 'break';\n    attributes?: { [key: string]: string };\n    children = [];\n    //children?: ContentEntry[];\n\n    constructor(attributes?: { [key: string]: string }) {\n        super();\n        this.attributes = attributes;\n    }\n\n    static createNERFromEntry(entry: BreakEntry, parent: NodeEntryRef, nodeCache: NodeEntryCache): NodeEntryRef {\n        const ner = NER(document.createElement('br'), entry, [], parent);\n        if (entry.attributes) {\n            for (const [key, value] of Object.entries(entry.attributes)) {\n                ner.node.setAttribute(key, value);\n            }\n        }\n        return ner;\n    }\n\n    static convertNodeToEntry(node: HTMLElement): BreakEntry | null {\n        if (node.tagName === 'BR') {\n            const attributes = Array.from(node.attributes).reduce((acc, attr) => {\n                acc[attr.name] = attr.value;\n                return acc;\n            }, {} as { [key: string]: string });\n            return new BreakEntry(attributes);\n        }\n        return null;\n    }\n}\n", "import EventBus from \"eventbusjs\";\nimport { getLogger, LogModule } from \"lib/utils/logging.js\";\nimport safeStringify from 'safe-stringify';\nimport { getWindowSize, makeResizable } from \"components/shared/BlobEditor/lib/utils/domUtils.js\";\nimport { JsonView } from \"components/shared/BlobEditor/lib/JsonView.js\";\n\nconst { log, warn } = getLogger('DebugPanel', { color: 'red', enabled: true });\n\ntype LogEntry = {\n    id: string;\n    message: Array<any> | object | string;\n    timestamp: Date;\n}\n\ntype LogEvent = {\n    namespace: string;\n    args: Array<any>;\n}\n\ninterface TabEntries {\n    [namespace: string]: LogEntry[];\n}\n\n// Wrapping class to use the DebugPanel within the Logging framework.\nexport class DebugPanelLogModule implements LogModule {\n    public name = \"DebugPanel\";\n    public debugPanel: DebugPanel;\n\n    constructor(opts: any = {}) {\n        this.debugPanel = new DebugPanel(document.body);\n        if (opts.show) this.debugPanel.show();\n    }\n\n    public onLog(log: LogEvent) {\n        this.debugPanel.addLog(log.namespace, log.args);\n    }\n}\n\nfunction renderLogEntry(message: any) {\n    return Array.isArray(message) ?\n        message.join(' ') :\n        typeof message == 'object' ?\n            safeStringify(message) :\n            `${message}`;\n}\n\n// send state to debug panel to show as JSON view.\nconst DEBUG_STATE_NAMESPACE = 'objects';\nexport function debugState(id, state) {\n    // get log modules?\n    EventBus.dispatch('debug-state', { id, state });\n}\n\nexport class DebugPanel {\n    private container: HTMLElement;\n    private tabContainer: HTMLElement;\n    private contentContainer: HTMLElement;\n    private tabEntries: TabEntries = {};\n    private debugStates = {};\n    private activeTab: string = \"global\";\n\n    constructor(parent: HTMLElement) {\n        this.container = this.createContainer();\n        this.tabContainer = this.createTabContainer();\n        this.contentContainer = this.createContentContainer();\n\n        this.container.appendChild(this.tabContainer);\n        this.container.appendChild(this.contentContainer);\n        parent.appendChild(this.container);\n\n        this.addTab(DEBUG_STATE_NAMESPACE);\n        this.addTab(\"global\");\n\n        this.setupResizable();\n        this.setupEventListeners();\n    }\n\n    private createContainer(): HTMLElement {\n        const container = document.createElement(\"div\");\n        container.classList.add(\"debug-panel\");\n        return container;\n    }\n\n    private createTabContainer(): HTMLElement {\n        const tabContainer = document.createElement(\"div\");\n        tabContainer.classList.add(\"debug-panel-tabs\");\n        return tabContainer;\n    }\n\n    private createContentContainer(): HTMLElement {\n        const contentContainer = document.createElement(\"div\");\n        contentContainer.classList.add(\"debug-panel-content\");\n        return contentContainer;\n    }\n\n    private setupResizable() {\n        const { width, height } = getWindowSize();\n\n        makeResizable(this.container, {\n            handles: ['left', 'top', 'top-left'],\n            maxWidth: width - 20,\n            maxHeight: height - 20,\n            minWidth: 200,\n            minHeight: 150\n            //onResize: (width, height) => console.log(`Resized: ${width}x${height}`)\n        });\n    }\n\n    private setupEventListeners(): void {\n        EventBus.addEventListener(\"log\", (event: any) => {\n            const { namespace, message } = event.target;\n            this.addLog(namespace, message);\n        });\n        EventBus.addEventListener(\"debug-state\", (event: any) => {\n            const { id, state } = event.target;\n            if (!id || !state) return console.log(\"Invalid event data for debug-state. Expected {id,state}, got:\", event);\n            this.handleDebugState(id, state);\n        });\n    }\n\n    // display an object for debugging.\n    private handleDebugState(id: string, state: any) {\n\n        const safeState = safeStringify(state);\n        state = JSON.parse(safeState);\n\n        const updateDebugState = (id, state) => {\n            //console.log(`update debug`, id, state);\n            const content = this.contentContainer.querySelector(\n                `[data-namespace=${DEBUG_STATE_NAMESPACE}]`\n            );\n            if (!content) return console.error(\"No content for debug namespace.\");\n            const debugWrapper: HTMLElement | null = content.querySelector(`#debug-state-${id}`);\n            if (!debugWrapper) return console.error(`No debug state found for ${id}.`);\n            const jsonWrapper = debugWrapper.querySelector('.json-wrapper');\n            if (!jsonWrapper) return console.error(`No json wrapper found for existing state ${id}`);\n            //debugElement.innerText = printJson(state);\n            jsonWrapper.innerHTML = '';\n            this.debugStates[id].state = state;\n            this.debugStates[id].jsonView.updateJson(state);\n            // const tree = jsonTree.create(state, jsonWrapper);\n            // tree.expand();\n            //log(`updated debug state`, debugWrapper);\n        }\n\n        const addDebugState = (id, state) => {\n            //console.log(`add debug`, id, state)\n            const content = this.contentContainer.querySelector(\n                `[data-namespace=${DEBUG_STATE_NAMESPACE}]`\n            );\n            if (!content) return console.error(\"No content for debug namespace.\");\n\n            // create debug state\n            const debugWrapper = document.createElement('div');\n            debugWrapper.classList.add('debug-state');\n            debugWrapper.setAttribute('id', `debug-state-${id}`);\n\n            const toggleButton = document.createElement(\"button\");\n            toggleButton.classList.add(\"json-toggle\");\n            toggleButton.textContent = '[-]';\n            toggleButton.onclick = () => {\n                const isCollapsed = debugWrapper.classList.contains(\"collapsed\");\n                debugWrapper.classList.toggle(\"collapsed\", !isCollapsed);\n                toggleButton.textContent = isCollapsed ? \"[-]\" : \"[+]\";\n            };\n            debugWrapper.appendChild(toggleButton);\n\n            const label = document.createElement(\"div\");\n            label.classList.add('debug-state-label');\n            label.innerText = `${id}`;\n            debugWrapper.appendChild(label);\n\n            const jsonWrapper = document.createElement('div');\n            jsonWrapper.classList.add('json-wrapper');\n            debugWrapper.appendChild(jsonWrapper);\n\n            const jsonView = new JsonView(state, jsonWrapper as HTMLElement,\n                {\n                    expandObjs: [\n                        /children/,\n                        /children\\/(.*)/,\n                        /entry/\n                    ]\n                }\n            );\n            this.debugStates[id] = { state, jsonView };\n\n            // const tree = jsonTree.create(state, jsonWrapper);\n            // tree.expand();\n            content.appendChild(debugWrapper);\n\n            //log(`added debug state`, debugWrapper);\n        }\n\n        //log(`DEBUG STATE:`, id, state);\n        if (this.debugStates[id]) updateDebugState(id, state);\n        else addDebugState(id, state);\n    }\n\n    private addTab(namespace: string): void {\n        if (this.tabEntries[namespace]) return;\n\n        this.tabEntries[namespace] = [];\n\n        const tab = document.createElement(\"button\");\n        tab.classList.add(\"debug-tab\");\n        tab.textContent = namespace;\n        tab.onclick = () => this.switchTab(namespace);\n        this.tabContainer.appendChild(tab);\n\n        const content = document.createElement(\"div\");\n        content.classList.add(\"debug-tab-content\");\n        content.dataset.namespace = namespace;\n        this.contentContainer.appendChild(content);\n\n        if (namespace === \"global\") {\n            this.addClearButton(content, true);\n        } else {\n            this.addClearButton(content);\n        }\n\n        if (Object.keys(this.tabEntries).length === 1) {\n            this.switchTab(namespace);\n        }\n    }\n\n    private switchTab(namespace: string): void {\n        this.activeTab = namespace;\n        document\n            .querySelectorAll(\".debug-tab-content\")\n            .forEach((el) => (el as HTMLElement).style.display = \"none\");\n        const activeContent = this.contentContainer.querySelector(\n            `[data-namespace=\"${namespace}\"]`\n        ) as HTMLElement;\n        if (activeContent) activeContent.style.display = \"block\";\n    }\n\n    private addClearButton(content: HTMLElement, isGlobal: boolean = false): void {\n        const clearButton = document.createElement(\"button\");\n        clearButton.classList.add(\"debug-clear-button\");\n        clearButton.textContent = \"Clear\";\n        clearButton.onclick = () => {\n            if (isGlobal) {\n                Object.keys(this.tabEntries).forEach((key) => {\n                    this.tabEntries[key] = [];\n                    const tabContent = this.contentContainer.querySelector(\n                        `[data-namespace=\"${key}\"]`\n                    );\n                    if (tabContent) tabContent.innerHTML = \"\";\n                });\n            } else {\n                const namespace = content.dataset.namespace;\n                if (namespace) {\n                    if (namespace == DEBUG_STATE_NAMESPACE) {\n                        this.debugStates = {};\n                    } else {\n                        content.innerHTML = \"\";\n                        this.tabEntries[namespace] = [];\n                    }\n                }\n            }\n        };\n        content.appendChild(clearButton);\n    }\n\n    public addLog(namespace: string, message: Array<any> | object | string): void {\n        if (!this.tabEntries[namespace]) {\n            this.addTab(namespace);\n        }\n\n        const logEntry: LogEntry = {\n            id: `${namespace}-${Date.now()}-${Math.random()}`,\n            message,\n            timestamp: new Date(),\n        };\n        this.tabEntries[namespace].push(logEntry);\n\n        const content = this.contentContainer.querySelector(\n            `[data-namespace=\"${namespace}\"]`\n        );\n        if (!content) return;\n\n        const logElement = this.createLogElement(logEntry, namespace);\n        content.appendChild(logElement);\n\n        // add to global\n        if (namespace != 'global') this.addLog('global', message);\n    }\n\n    private createLogElement(logEntry: LogEntry, namespace: string): HTMLElement {\n        const logElement = document.createElement(\"div\");\n        logElement.classList.add(\"debug-log-entry\");\n        logElement.dataset.logId = logEntry.id;\n\n        // Add text:\n        const logText = document.createElement('div');\n        logText.innerText = `[${logEntry.timestamp.toLocaleTimeString()}] ${renderLogEntry(logEntry.message)}`;\n        logText.classList.add('debug-log-entry-text');\n\n        // Add 'Copy' button\n        const copyButton = document.createElement('button');\n        copyButton.innerText = '\uD83D\uDCCB';\n        copyButton.classList.add('debug-copy-button');\n        copyButton.onclick = () => navigator.clipboard.writeText(logText.innerHTML);\n\n        // Add 'X' (delete) button\n        const deleteButton = document.createElement('button');\n        deleteButton.innerText = '\u274C';\n        deleteButton.classList.add('debug-delete-button');\n        deleteButton.onclick = () => this.removeLogEntry(namespace, logEntry.id, logElement);\n\n        logElement.appendChild(logText);\n        logElement.appendChild(copyButton);\n        logElement.appendChild(deleteButton);\n\n        return logElement;\n    }\n\n    private removeLogEntry(namespace: string, logId: string, logElement: HTMLElement): void {\n        this.tabEntries[namespace] = this.tabEntries[namespace].filter(\n            (entry) => entry.id !== logId\n        );\n        logElement.remove();\n    }\n\n    public show(): void {\n        //console.log(`SHOW`)\n        this.container.classList.add(\"visible\");\n    }\n\n    public hide(): void {\n        this.container.classList.remove(\"visible\");\n    }\n}", "type ResizeOptions = {\n    handles?: ('top' | 'left' | 'right' | 'bottom' | 'top-left' | 'top-right' | 'bottom-left' | 'bottom-right')[];\n    maxWidth?: number;\n    maxHeight?: number;\n    minWidth?: number;\n    minHeight?: number;\n    onResize?: (width: number, height: number) => void;\n};\n\nexport function makeResizable(container: HTMLElement, options: ResizeOptions = {}) {\n    // Remove existing handles\n    container.querySelectorAll('.resize-handle').forEach(handle => handle.remove());\n\n    // Default options\n    const {\n        handles = ['right', 'bottom', 'bottom-right'],\n        maxWidth = Infinity,\n        maxHeight = Infinity,\n        minWidth = 100,\n        minHeight = 100,\n        onResize = () => { }\n    } = options;\n\n    let resizing = false;\n    let resizeDirection: string | null = null;\n    let startX = 0, startY = 0;\n    let startWidth = 0, startHeight = 0;\n\n    function createHandle(position: string) {\n        const handle = document.createElement('div');\n        handle.classList.add('resize-handle', `resize-${position}`);\n        handle.addEventListener('mousedown', (e) => startResizing(e, position));\n        container.appendChild(handle);\n    }\n\n    function startResizing(event: MouseEvent, direction: string) {\n        resizing = true;\n        resizeDirection = direction;\n        startX = event.clientX;\n        startY = event.clientY;\n\n        // Capture initial dimensions to prevent sudden jumps\n        startWidth = container.offsetWidth;\n        startHeight = container.offsetHeight;\n\n        event.preventDefault();\n        document.addEventListener('mousemove', resize);\n        document.addEventListener('mouseup', stopResizing);\n    }\n\n    function resize(event: MouseEvent) {\n        if (!resizing || !resizeDirection) return;\n\n        let newWidth = startWidth;\n        let newHeight = startHeight;\n\n        const deltaX = event.clientX - startX;\n        const deltaY = event.clientY - startY;\n\n        if (resizeDirection.includes('right')) {\n            newWidth = Math.min(Math.max(startWidth + deltaX, minWidth), maxWidth);\n        }\n        if (resizeDirection.includes('left')) {\n            newWidth = Math.min(Math.max(startWidth - deltaX, minWidth), maxWidth);\n        }\n        if (resizeDirection.includes('bottom')) {\n            newHeight = Math.min(Math.max(startHeight + deltaY, minHeight), maxHeight);\n        }\n        if (resizeDirection.includes('top')) {\n            newHeight = Math.min(Math.max(startHeight - deltaY, minHeight), maxHeight);\n        }\n\n        container.style.width = `${newWidth}px`;\n        container.style.height = `${newHeight}px`;\n\n        onResize(newWidth, newHeight);\n    }\n\n    function stopResizing() {\n        resizing = false;\n        resizeDirection = null;\n        document.removeEventListener('mousemove', resize);\n        document.removeEventListener('mouseup', stopResizing);\n    }\n\n    // Add handles based on config\n    handles.forEach(handle => createHandle(handle));\n}\n\nexport function getWindowSize(): { width: number; height: number } {\n    const width = window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth;\n    const height = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight;\n    return { width, height };\n}\n", "import * as jsondiffpatch from 'jsondiffpatch';\n\ntype JsonViewOptions = {\n    expandAll?: boolean;\n    expandObjs?: Array<string | RegExp>;\n    useViewState?: boolean;\n}\n\nconst DEFAULT_OPTIONS = () => ({\n    expandAll: false,\n    expandObjects: [],\n    useViewState: true\n});\n\nexport class JsonView {\n    private json: any;\n    private parentContainer: HTMLElement;\n    private options: JsonViewOptions;\n    private viewStates = {}; // viewstate tree for retaining view during state updates\n\n    constructor(json: any, parentContainer: HTMLElement, options?: JsonViewOptions) {\n        this.json = json;\n        this.parentContainer = parentContainer;\n        this.options = Object.assign({}, DEFAULT_OPTIONS(), options || {});\n        this.render();\n    }\n\n    private render(): void {\n        this.parentContainer.innerHTML = \"\"; // Clear existing content\n        const rootNode = this.drawJsonNode(this.json);\n        this.parentContainer.appendChild(rootNode);\n    }\n\n    private drawJsonNode(jsonObj: any, currPath: string = \"\"): HTMLElement {\n        const nodeContainer = document.createElement(\"div\");\n        nodeContainer.classList.add(\"json-node\");\n\n        const propertiesContainer = document.createElement(\"div\");\n        propertiesContainer.classList.add(\"json-properties\");\n\n        for (const key in jsonObj) {\n            if (Object.prototype.hasOwnProperty.call(jsonObj, key)) {\n                const keyPath = `${currPath}${key}`;\n                const propertyRow = document.createElement(\"div\");\n                propertyRow.classList.add(\"json-property\");\n                propertyRow.setAttribute(\"data-path\", keyPath);\n\n                const label = document.createElement(\"span\");\n                label.classList.add(\"json-key\");\n                label.textContent = key + \": \";\n\n                const valueContainer = document.createElement(\"div\");\n                valueContainer.classList.add(\"json-value\");\n\n                const value = jsonObj[key];\n                const isObject = typeof value === \"object\" && value !== null;\n                const isArray = Array.isArray(value);\n                //console.log(`value:`, value, 'obj?', isObject, 'array?', isArray);\n\n                if (isObject) {\n                    if (isArray) label.textContent = `${key} (${value.length})`;\n                    else label.textContent = key;\n                    const hasChildren = (isArray && value.length > 0) ? true : Object.keys(value).length > 0;\n                    propertyRow.classList.add('object');\n                    // Create expandable/collapsible toggle button\n                    const toggleButton = document.createElement(\"button\");\n                    toggleButton.classList.add(\"json-toggle\");\n\n                    // Recursive call to render child object\n                    const childNode = this.drawJsonNode(value, keyPath + \"/\");\n                    //console.log(`KP`, keyPath)\n\n                    if (this.options.expandAll) {\n                        toggleButton.textContent = \"[-]\";\n                    } else {\n                        let expand = false;\n                        // expand empty objects by default:\n                        if (isArray && hasChildren) {\n                            //console.log(`no children`, keyPath)\n                            expand = true;\n                        }\n                        else {\n                            this.options.expandObjs?.forEach(e => {\n                                if (new RegExp(e).test(keyPath)) expand = true;\n                            });\n                        }\n\n                        // if a viewstate exists use that always:\n                        if (this.options.useViewState) {\n                            if (typeof this.viewStates[keyPath] != 'undefined') expand = !this.viewStates[keyPath];\n                        }\n\n                        if (expand) {\n                            toggleButton.textContent = \"[-]\";\n                        } else {\n                            toggleButton.textContent = \"[+]\";\n                            childNode.classList.add(\"collapsed\"); // Start collapsed\n                        }\n                    }\n\n                    // Toggle function for expanding/collapsing\n                    toggleButton.onclick = () => {\n                        const isCollapsed = childNode.classList.contains(\"collapsed\");\n                        childNode.classList.toggle(\"collapsed\", !isCollapsed);\n                        this.viewStates[keyPath] = !isCollapsed;\n                        console.log(`viewStates updated.`, this.viewStates);\n                        toggleButton.textContent = isCollapsed ? \"[-]\" : \"[+]\";\n                    };\n\n                    propertyRow.appendChild(toggleButton);\n                    valueContainer.appendChild(childNode);\n                } else {\n                    valueContainer.textContent = String(value);\n                }\n\n                propertyRow.appendChild(label);\n                propertyRow.appendChild(valueContainer);\n                propertiesContainer.appendChild(propertyRow);\n            }\n        }\n\n        nodeContainer.appendChild(propertiesContainer);\n        return nodeContainer;\n    }\n\n    public updateJson(newJson: any): void {\n        const delta = jsondiffpatch.diff(this.json, newJson);\n        //console.log(`json delta`, delta)\n        jsondiffpatch.patch(this.json, delta);\n        //this.json = newJson;\n        // todo: only render changed nodes... how? use data-path=\"\" for each node?\n        // ... could keep track of each path in a viewstate... during render... restore viewstate...\n\n        this.render();\n    }\n}", "import { FilePreviewHandler } from '../FilePreviewHandler';\nimport { WEditor } from '../lib/WEditor';\nimport { IPlugin } from './IPlugin';\n\nexport class FilePlugin implements IPlugin {\n    // private editor: WEditor;\n    // private container: HTMLElement;\n    private filePreviewHandler: FilePreviewHandler;\n    private input: HTMLInputElement;\n\n    initialize(editor: WEditor, container: HTMLElement) {\n        //        this.editor = editor;\n        //       this.container = container;\n        this.filePreviewHandler = new FilePreviewHandler(editor);\n        container.addEventListener('mousedown', this.handleMouseDown);\n        container.addEventListener('dragstart', this.handleDragStart);\n        container.addEventListener('dragover', this.handleDragOver);\n        container.addEventListener('drop', this.handleDrop);\n\n        this.input = document.createElement('input');\n        this.input.type = 'file';\n        this.input.multiple = true; // Allow multiple file selection\n        this.input.style.display = 'none'; // Keep it hidden\n        this.input.addEventListener('change', (e) => {\n            this.insertFiles(Array.from(e.target.files));\n        });\n        container.appendChild(this.input); // Append to the body to ensure it's accessible\n    };\n\n    private handleToolbarFile = (e) => {\n        this.input.click();\n    };\n\n    toolbar = {\n        type: 'button',\n        icon: '/public/icons/icon-add-file.svg',\n        label: 'File',\n        onClick: this.handleToolbarFile\n    };\n\n    private handleDragOver = (event: DragEvent) => {\n        console.log(`drag over`, event);\n        event.preventDefault();\n    };\n\n    private handleMouseDown = (event) => {\n        //console.log(`mouse down`, event, event.target.closest('.file-preview') as HTMLElement)\n    };\n\n    private handleDragStart = (event: DragEvent) => {\n        //console.log(`drag start`, event)\n        const target = event.target as HTMLElement;\n        const filePreview = target.closest('.file-preview') as HTMLElement | null;\n\n        if (filePreview) {\n            console.log(\"Dragging file preview:\", filePreview);\n\n            // Clone the preview element for the drag image\n            const dragPreview = filePreview.cloneNode(true) as HTMLElement;\n            dragPreview.style.position = 'absolute';\n            dragPreview.style.top = '-9999px'; // Hide from document layout\n\n            document.body.appendChild(dragPreview); // Add to DOM temporarily\n\n            // Set as the drag image\n            event.dataTransfer!.setDragImage(dragPreview, 10, 10);\n\n            // Cleanup after drag ends\n            setTimeout(() => document.body.removeChild(dragPreview), 0);\n        }\n        //event.preventDefault();\n    };\n\n    private insertFiles = (files) => {\n        files.forEach(file => {\n            const selection = window.getSelection();\n            console.log(`insert`, file, selection)\n            if (selection && selection.rangeCount) {\n                const range = selection.getRangeAt(0);\n                this.filePreviewHandler.createPreview(file, range);\n            }\n        });\n    };\n\n    private handleDrop = (e: DragEvent) => {\n        e.preventDefault();\n        if (!e.dataTransfer) return;\n        const files = Array.from(e.dataTransfer.files);\n        this.insertFiles(files);\n    };\n}", "import { WEditor } from './lib/WEditor';\n\nconst rowLabelEl = (label, innerHtml) => {\n    const el = document.createElement('div');\n    el.className = 'row-label';\n    el.innerHTML = `<span class=\"label\">${label}</span><div class=\"inner\">${innerHtml}</div>`;\n    return el;\n};\n\nconst printBytes = (b) => {\n    let kb = b / 1024;\n    let mb = kb / 1024;\n    if (mb >= 1) {\n        let kbr = kb - (mb * 1024);\n        return `${mb.toFixed(0)}Mb${kbr > 0 ? `${kbr}Kb` : ``}`;\n    } else {\n        if (kb >= 1) {\n            let br = b - (kb * 1024);\n            return `${kb.toFixed(0)}Kb${br > 0 ? `${br}B` : ``}`;\n        }\n        return `${b}B`;\n    }\n};\n\nexport class FilePreviewHandler {\n    private editor: WEditor;\n\n    constructor(editor: WEditor) {\n        this.editor = editor;\n    }\n\n    public createPreview(file: File, range: Range): void {\n        let previewElement: HTMLElement;\n        console.log(`insert file`, file.type)\n\n        if (file.type.startsWith('image/')) {\n            previewElement = this.renderImage(file);\n        } else if (file.type.startsWith('video/')) {\n            previewElement = this.renderVideo(file);\n        } else if (file.type.startsWith('audio/')) {\n            previewElement = this.renderAudio(file);\n        } else if (file.type.startsWith('text/')) {\n            previewElement = this.renderText(file);\n        } else {\n            previewElement = this.renderGeneric(file);\n        }\n\n        // Add attributes to the preview element\n        previewElement.setAttribute('data-file-type', file.type);\n        previewElement.setAttribute('data-file-size', file.size.toString());\n        previewElement.setAttribute('data-file-name', file.name);\n\n        // Insert the preview element\n        //range.deleteContents(); // should not delete here...\n        range.insertNode(previewElement);\n        range.setStartAfter(previewElement);\n        //range.collapse(true);\n\n        // Update selection to reflect new content\n        const selection = window.getSelection();\n        if (selection) {\n            selection.removeAllRanges();\n            selection.addRange(range);\n        }\n\n        // Trigger content change\n        this.editor.applyChanges();\n    }\n\n    private renderImage(file: File): HTMLElement {\n        const img = document.createElement('img');\n        img.src = URL.createObjectURL(file);\n        return this.wrapPreview(img, file, 'image');\n    }\n\n    private renderVideo(file: File): HTMLElement {\n        const video = document.createElement('video');\n        video.src = URL.createObjectURL(file);\n        video.controls = true;\n        return this.wrapPreview(video, file, 'video');\n    }\n\n    private renderAudio(file: File): HTMLElement {\n        const audio = document.createElement('audio');\n        audio.src = URL.createObjectURL(file);\n        audio.controls = true;\n        return this.wrapPreview(audio, file, 'audio');\n    }\n\n    private renderText(file: File): HTMLElement {\n        const div = document.createElement('div');\n        div.textContent = file.name;\n        return this.wrapPreview(div, file, 'text');\n    }\n\n    private renderGeneric(file: File): HTMLElement {\n        const div = document.createElement('div');\n        div.textContent = file.name;\n        return this.wrapPreview(div, file, 'file');\n    }\n\n    private wrapPreview(element: HTMLElement, file, type: string): HTMLElement {\n        const wrapper = document.createElement('div');\n        wrapper.setAttribute('contenteditable', \"false\");\n        wrapper.className = `file-preview ${type}-preview`;\n\n        const thumb = document.createElement('div');\n        thumb.classList.add('file-thumb');\n        thumb.appendChild(element);\n        wrapper.appendChild(thumb);\n\n        // Add info section + options\n        const meta = document.createElement('div');\n        meta.className = 'file-options';\n\n        const info = document.createElement('div');\n        info.className = 'file-info';\n        info.appendChild(rowLabelEl('Name:', file.name));\n        info.appendChild(rowLabelEl('Size:', printBytes(file.size)));\n\n        meta.appendChild(info);\n\n        // Add delete button\n        const deleteButton = document.createElement('button');\n        deleteButton.className = \"remove-button\";\n        deleteButton.textContent = 'X';\n        deleteButton.addEventListener('click', () => this.removePreview(wrapper));\n        meta.appendChild(deleteButton);\n\n        wrapper.appendChild(meta);\n\n        console.log(`add file`, file)\n\n        return wrapper;\n    }\n\n    private removePreview(previewElement: HTMLElement) {\n        previewElement.remove();\n        this.editor.applyChanges(); // This will trigger the content update and save\n    }\n}", "//import EntryList from 'components/shared/EntryList';\nimport './style.scss';\n\nconst PlayPage = (props) => {\n\n    //const entries = useEntries();\n    //console.log(`play context data`, entries);\n\n    return (\n        <div className=\"page\" id=\"play\">\n\n            <h1>Play</h1>\n\n            {/* <EntryList entries={entries} /> */}\n\n        </div>\n    );\n}\n\nexport default PlayPage;", "import { Timeline, events } from 'components/pages/Timeline/Timeline';\nimport { useEffect } from 'preact/hooks';\nimport './style.scss';\n\nconst TimelinePage = (props) => {\n\n    useEffect(() => {\n        const el = document.getElementById('timeline');\n        if (el) new Timeline(el, events);\n    }, [])\n\n    return (\n        <div className=\"page\" id=\"timeline-page\">\n\n            <div id=\"timeline\">\n            </div>\n\n        </div>\n    );\n};\n\nexport default TimelinePage;\n\n\n// import { renderDate } from 'lib/utils/DateUtils';\n// import { useEntries } from 'lib/DataProvider';\n// import './style.scss';\n\n// const OtherPage = (props) => {\n\n//     const entries = useEntries('other');\n//     //console.log(`other context data`, entries);\n\n//     return (\n//         <div className=\"page\" id=\"other\">\n\n//             <h1>Other</h1>\n\n//             <div className=\"entries\">\n\n//                 {entries && entries.map(e => <div key={e.id} className=\"entry\">\n//                     <div className=\"title\">{e.title}</div>\n//                     <div className=\"date\">{renderDate(e.dateAdded)}</div>\n//                     <div className=\"content\">{e.content}</div>\n//                 </div>)}\n\n//             </div>\n//         </div>\n//     );\n// };\n\n// export default OtherPage;", "\n// Set the canvas width and height\n\n// Define the data for the events\nexport const events = [\n    {\n        category: 'work',\n        name: 'Meeting with John',\n        notes: 'Discussed project XYZ',\n        tags: ['project'],\n        time: new Date('2022-01-01T12:00:00')\n    }, {\n        category: 'work',\n        name: 'Meeting with Bob',\n        notes: 'Discussed project XYZ',\n        tags: ['project'],\n        time: new Date('2022-01-04T12:00:00')\n    },\n    {\n        category: 'work',\n        name: 'Meeting with Jane',\n        notes: 'Discussed project XYZ',\n        tags: ['project'],\n        time: new Date('2022-01-09T13:00:00')\n    },\n    {\n        category: 'personal',\n        name: 'Birthday party',\n        notes: 'Celebrating my birthday',\n        tags: ['party'],\n        time: new Date('2022-01-12T17:00:00')\n    },\n    {\n        category: 'personal',\n        name: 'Birthday party',\n        notes: 'Celebrating my birthday',\n        tags: ['party'],\n        time: new Date('2022-01-11T17:00:00')\n    },\n    {\n        category: 'other',\n        name: 'Something Other',\n        notes: 'Notes',\n        tags: ['something'],\n        time: new Date('2022-01-03T13:00:00')\n    }\n    // ... more events here\n];\n\n\n// Define the colors for each category\nconst categories = {\n    'work': '#3498db',\n    'personal': '#e74c3c',\n    'other': '#2ecc71'\n};\n\n// Get the canvas element\nexport class Timeline {\n    canvas: HTMLCanvasElement | null = null;\n    ctx: CanvasRenderingContext2D | null = null;\n\n    constructor(private container: HTMLElement, private events: Array<{}>) {\n        this.init()\n        if (this.events) this.drawTimeline();\n    }\n\n    init() {\n        if (!this.container) throw new Error(\"No container for timeline.\");\n        this.canvas = document.createElement(\"canvas\");\n        this.container.appendChild(this.canvas);\n        this.ctx = this.canvas.getContext(\"2d\");\n\n        // Set the canvas width and height to match the container\n        this.canvas.width = this.container.offsetWidth;\n        this.canvas.height = this.container.offsetHeight;\n\n        console.log(`container`, this.container.offsetWidth, this.container.offsetHeight)\n\n        // Set the canvas background color to black\n        this.ctx.fillStyle = 'black';\n        this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);\n\n        this.bindEvents();\n    }\n\n\n    bindEvents() {\n        // Add event listeners for zooming and hovering over events\n        this.canvas.addEventListener('wheel', (event) => {\n            const delta = event.deltaY * -1;\n\n            // Scale the canvas by a factor of 0.9 or 1.1 depending on the direction of the scroll\n            if (delta > 0) {\n                this.ctx.scale(0.9, 0.9);\n            } else {\n                this.ctx.scale(1.1, 1.1);\n            }\n\n            // Redraw the timeline with the new scale\n            this.drawTimeline();\n        });\n\n        this.canvas.addEventListener('mousemove', (event) => {\n            const x = event.clientX - this.canvas.offsetLeft;\n            const y = event.clientY - this.canvas.offsetTop;\n\n            // Check if the mouse is over an event circle\n            events.forEach((event) => {\n                const eventX = Math.floor((event.time - new Date('2022-01-01T00:00:00')) / (365 * 24 * 60 * 60 * 1000));\n                const eventY = Math.floor(event.category);\n\n                if (x >= eventX - 10 && x <= eventX + 10 && y >= eventY - 10 && y <= eventY + 10) {\n                    // Show the hover popup with the event details\n                    const popup = document.createElement('div');\n                    popup.textContent = `${event.name}: ${event.notes}`;\n                    popup.style.position = 'absolute';\n                    popup.style.left = `${x + 10}px`;\n                    popup.style.top = `${y - 20}px`;\n                    this.canvas.appendChild(popup);\n                }\n            });\n        });\n    }\n\n    // Define a function to calculate the x position for an event based on its time\n    getXPosition(event) {\n        return Math.floor((event.time - new Date('2022-01-01T00:00:00')) / (365 * 24 * 60 * 60 * 1000)) + 10;\n    }\n\n    // Draw the timeline\n    drawTimeline() {\n        // Clear the canvas\n        this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n\n        // Loop through each event and draw it on the canvas\n        this.events.forEach((event) => {\n            const x = this.getXPosition(event);\n            const y = Math.floor(event.category);\n\n            // Draw the circle for the event\n            this.ctx.beginPath();\n            this.ctx.arc(x, y, 10, 0, Math.PI * 2);\n            this.ctx.fillStyle = categories[event.category];\n            this.ctx.fill();\n\n            // Add a label for the event\n            const label = document.createElement('span');\n            label.textContent = event.name;\n            label.style.position = 'absolute';\n            label.style.left = `${x}px`;\n            label.style.top = `${y - 10}px`;\n            this.canvas.appendChild(label);\n        });\n    }\n}\n", "import { useState } from 'preact/hooks';\n//import { useEntries } from 'lib/DataProvider';\nimport { playSound } from 'lib/AudioManager.js';\nimport './style.scss';\n\nconst WorkPage = (props) => {\n    const [filters, setFilters] = useState([]);\n\n    const entries = []; // useEntries();//{ tags: ['tag'] });\n\n    const clickSubnav = (f) => {\n        playSound('click')\n        toggleFilter(f);\n    }\n\n    const toggleFilter = f => {\n        if (filters.includes(f)) setFilters(filters.filter(_f => _f != f));\n        else setFilters([...filters, f]);\n    };\n\n    const isFiltered = f => {\n        return filters.includes(f);\n    };\n\n    return (\n        <div className=\"page\" id=\"work\">\n\n            <h1>Work</h1>\n\n            <div className=\"sub-nav\">\n                <a href=\"#freelance\"\n                    onMouseEnter={(e) => playSound('hover')}\n                    onClick={e => clickSubnav('freelance')} className={isFiltered('freelance') ? ' on' : ''}>Freelance</a>\n                <a href=\"#fulltime\"\n                    onMouseEnter={(e) => playSound('hover')}\n                    onClick={e => clickSubnav('fulltime')} className={isFiltered('fulltime') ? ' on' : ''}>Fulltime</a>\n            </div>\n\n            {/* <EntryList entries={entries} /> */}\n\n        </div>\n    );\n}\n\nexport default WorkPage;", "import { ColorWithID } from 'components/pages/Colors/utils';\nimport { FunctionalComponent } from 'preact';\nimport { useEffect, useState } from 'preact/hooks';\nimport { ColorEditColumn } from './ColorEditColumn';\nimport './ColorPage.scss';\nimport { InputColumn } from './InputColumn';\nimport { OutputColumn } from './OutputColumn';\n\ninterface ColorPageProps { }\n\nexport const ColorPage: FunctionalComponent<ColorPageProps> = () => {\n\tconst [colors, setColors] = useState<ColorWithID[]>([]);\n\tconst [modifiedColors, setModifiedColors] = useState<ColorWithID[]>([]);\n\tconst [tokenizedText, setTokenizedText] = useState('');\n\tconst [config, setConfig] = useState({\n\t\tcombineSimilar: false,\n\t\tcolorMode: 'dark',\n\t\tbackgroundColorLight: '#f4f4f4', // Default light background\n\t\tbackgroundColorDark: '#123',     // Default dark background\n\t\tfontColorLight: '#333',           // Default light text color\n\t\tfontColorDark: '#fed',            // Default dark text color\n\t});\n\n\tuseEffect(() => {\n\t\tconst savedConfig = localStorage.getItem('config');\n\t\tif (savedConfig) setConfig(JSON.parse(savedConfig));\n\t}, []);\n\n\tconst handleColorsParsed = (parsedColors: ColorWithID[], text: string) => {\n\t\tsetColors(parsedColors);\n\t\tsetModifiedColors(parsedColors);\n\t\tsetTokenizedText(text);\n\t};\n\n\tconst handleColorsChanged = (newColors: { id: number; color: string; modifiedColor: string }[]) => {\n\t\tsetModifiedColors(newColors);\n\t};\n\n\tconst handleConfigChange = (newConfig: Partial<typeof config>) => {\n\t\tsetConfig(prev => ({ ...prev, ...newConfig }));\n\t\tlocalStorage.setItem('config', JSON.stringify({ ...config, ...newConfig }));\n\t};\n\n\treturn (\n\t\t<div\n\t\t\tclassName={`ColorPage ${config.colorMode === 'dark' ? 'dark-mode' : ''}`}\n\t\t\tstyle={{\n\t\t\t\tbackgroundColor: config.colorMode == 'dark' ? config.backgroundColorDark : config.backgroundColorLight,\n\t\t\t\tcolor: config.colorMode == 'dark' ? config.fontColorDark : config.fontColorLight\n\t\t\t}}\n\t\t>\n\t\t\t<InputColumn\n\t\t\t\tonColorsParsed={handleColorsParsed}\n\t\t\t\tconfig={config}\n\t\t\t\tonConfigChange={handleConfigChange}\n\t\t\t/>\n\t\t\t<ColorEditColumn\n\t\t\t\tcolors={modifiedColors}\n\t\t\t\tonColorsChanged={handleColorsChanged}\n\n\t\t\t\tconfig={config}\n\t\t\t/>\n\t\t\t<OutputColumn colors={modifiedColors} tokenizedText={tokenizedText} />\n\t\t</div>\n\t);\n}; ", "import { h, FunctionalComponent } from 'preact';\nimport { useCallback } from 'preact/hooks';\nimport { ColorEdit } from './ColorEdit';\n\ninterface ColorEditColumnProps {\n    colors: { id: number; color: string; modifiedColor: string }[];\n    onColorsChanged: (newColors: { id: number; color: string; modifiedColor: string }[]) => void;\n}\n\nexport const ColorEditColumn: FunctionalComponent<ColorEditColumnProps> = ({ colors, onColorsChanged }) => {\n    const handleColorChange = useCallback((id: number, newColor: string) => {\n        const newColors = colors.map(c =>\n            c.id === id ? { ...c, modifiedColor: newColor } : c\n        );\n        onColorsChanged(newColors);\n    }, [colors, onColorsChanged]);\n\n    const hideOtherPickers = useCallback(() => {\n        document.querySelectorAll('.color-picker .popup').forEach(popup => {\n            const picker = (popup as any).picker; // VanillaPicker adds this property\n            if (picker) picker.destroy();\n        });\n    }, []);\n\n    return (\n        <div className=\"column ColorEditColumn\">\n            <div className=\"color-list\">\n                {colors.map((color) => (\n                    <ColorEdit\n                        key={color.id}\n                        color={color}\n                        onChange={(newColor: string) => handleColorChange(color.id, newColor)}\n                        hideOtherPickers={hideOtherPickers}\n                    />\n                ))}\n            </div>\n        </div>\n    );\n};", "import { FunctionalComponent } from 'preact';\nimport { useCallback, useEffect, useRef, useState } from 'preact/hooks';\nimport VanillaPicker from 'vanilla-picker';\n\ninterface ColorEditProps {\n    color: { id: number; color: string; modifiedColor: string };\n    onChange: (id: number, newColor: string) => void;\n    hideOtherPickers: () => void;\n}\n\nexport const ColorEdit: FunctionalComponent<ColorEditProps> = ({ color, onChange, hideOtherPickers }) => {\n    const [currentColor, setCurrentColor] = useState(color.modifiedColor);\n    const [showPopup, setShowPopup] = useState(false);\n    const colorPickerRef = useRef<VanillaPicker | null>(null);\n    const containerRef = useRef<HTMLDivElement | null>(null);\n    const hoverTimeout = useRef<number | null>(null);\n\n    useEffect(() => {\n        if (containerRef.current && !colorPickerRef.current) {\n            colorPickerRef.current = new VanillaPicker({\n                parent: containerRef.current,\n                color: currentColor,\n                popup: 'bottom',\n                editor: true,\n                cancelButton: true,\n                editorFormat: 'hex',\n                onChange: (color: { hex: string }) => {\n                    setCurrentColor(color.hex);\n                },\n                onDone: (color: { hex: string }) => {\n                    onChange(color.id, color.hex);\n                },\n                onOpen: () => {\n                    if (colorPickerRef.current) {\n                        colorPickerRef.current.show();\n                        colorPickerRef.current.hide();\n                    }\n                }\n            });\n\n            const handleMouseEnter = () => {\n                if (hoverTimeout.current !== null) {\n                    clearTimeout(hoverTimeout.current);\n                    hoverTimeout.current = null;\n                }\n            };\n\n            const handleMouseLeave = () => {\n                hoverTimeout.current = window.setTimeout(() => {\n                    setShowPopup(false);\n                }, 500);\n            };\n\n            if (colorPickerRef.current) {\n                containerRef.current.addEventListener('mouseenter', handleMouseEnter);\n                containerRef.current.addEventListener('mouseleave', handleMouseLeave);\n            }\n\n            return () => {\n                if (colorPickerRef.current) {\n                    colorPickerRef.current.destroy();\n                }\n                if (containerRef.current) {\n                    containerRef.current.removeEventListener('mouseenter', handleMouseEnter);\n                    containerRef.current.removeEventListener('mouseleave', handleMouseLeave);\n                }\n                if (hoverTimeout.current !== null) {\n                    clearTimeout(hoverTimeout.current);\n                }\n            };\n        }\n    }, [currentColor, onChange, hideOtherPickers]);\n\n    const adjustPosition = useCallback(() => {\n        if (colorPickerRef.current && colorPickerRef.current.popup) {\n            const rect = containerRef.current!.getBoundingClientRect();\n            const popupRect = colorPickerRef.current.popup.getBoundingClientRect();\n            const { innerWidth, innerHeight } = window;\n\n            let left = rect.left;\n            let top = rect.bottom;\n\n            if (left + popupRect.width > innerWidth) left = Math.max(0, innerWidth - popupRect.width);\n            if (top + popupRect.height > innerHeight) top = innerHeight - popupRect.height;\n            if (left < 0) left = 0;\n            if (top < 0) top = 0;\n\n            // Adjusting position using native JS\n            colorPickerRef.current.popup.style.left = `${left}px`;\n            colorPickerRef.current.popup.style.top = `${top}px`;\n            colorPickerRef.current.popup.style.position = 'fixed'; // Ensure it's fixed for absolute positioning\n        }\n    }, []);\n\n    useEffect(() => {\n        if (colorPickerRef.current) {\n            if (showPopup) {\n                colorPickerRef.current.show();\n                adjustPosition();\n            } else {\n                colorPickerRef.current.hide();\n            }\n        }\n    }, [showPopup, adjustPosition]);\n\n    const handleClick = useCallback(() => {\n        hideOtherPickers();\n        setShowPopup(prevState => !prevState);\n    }, [hideOtherPickers]);\n\n    return (\n        <div\n            ref={containerRef}\n            className={`ColorEdit ${showPopup ? 'show-picker' : ''}`}\n        >\n            <div\n                className=\"color-swatch\"\n                style={{ backgroundColor: currentColor, height: '100%' }}\n                onClick={handleClick}\n            />\n        </div>\n    );\n};", "/*!\n * vanilla-picker v2.12.3\n * https://vanilla-picker.js.org\n *\n * Copyright 2017-2024 Andreas Borgen (https://github.com/Sphinxxxx), Adam Brooks (https://github.com/dissimulate)\n * Released under the ISC license.\n */\nvar classCallCheck = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\nvar createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar slicedToArray = function () {\n  function sliceIterator(arr, i) {\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _e = undefined;\n\n    try {\n      for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n        _arr.push(_s.value);\n\n        if (i && _arr.length === i) break;\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i[\"return\"]) _i[\"return\"]();\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n\n    return _arr;\n  }\n\n  return function (arr, i) {\n    if (Array.isArray(arr)) {\n      return arr;\n    } else if (Symbol.iterator in Object(arr)) {\n      return sliceIterator(arr, i);\n    } else {\n      throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n    }\n  };\n}();\n\nString.prototype.startsWith = String.prototype.startsWith || function (needle) {\n    return this.indexOf(needle) === 0;\n};\nString.prototype.padStart = String.prototype.padStart || function (len, pad) {\n    var str = this;while (str.length < len) {\n        str = pad + str;\n    }return str;\n};\n\nvar colorNames = { cb: '0f8ff', tqw: 'aebd7', q: '-ffff', qmrn: '7fffd4', zr: '0ffff', bg: '5f5dc', bsq: 'e4c4', bck: '---', nch: 'ebcd', b: '--ff', bvt: '8a2be2', brwn: 'a52a2a', brw: 'deb887', ctb: '5f9ea0', hrt: '7fff-', chcT: 'd2691e', cr: '7f50', rnw: '6495ed', crns: '8dc', crms: 'dc143c', cn: '-ffff', Db: '--8b', Dcn: '-8b8b', Dgnr: 'b8860b', Dgr: 'a9a9a9', Dgrn: '-64-', Dkhk: 'bdb76b', Dmgn: '8b-8b', Dvgr: '556b2f', Drng: '8c-', Drch: '9932cc', Dr: '8b--', Dsmn: 'e9967a', Dsgr: '8fbc8f', DsTb: '483d8b', DsTg: '2f4f4f', Dtrq: '-ced1', Dvt: '94-d3', ppnk: '1493', pskb: '-bfff', mgr: '696969', grb: '1e90ff', rbrc: 'b22222', rwht: 'af0', stg: '228b22', chs: '-ff', gnsb: 'dcdcdc', st: '8f8ff', g: 'd7-', gnr: 'daa520', gr: '808080', grn: '-8-0', grnw: 'adff2f', hnw: '0fff0', htpn: '69b4', nnr: 'cd5c5c', ng: '4b-82', vr: '0', khk: '0e68c', vnr: 'e6e6fa', nrb: '0f5', wngr: '7cfc-', mnch: 'acd', Lb: 'add8e6', Lcr: '08080', Lcn: 'e0ffff', Lgnr: 'afad2', Lgr: 'd3d3d3', Lgrn: '90ee90', Lpnk: 'b6c1', Lsmn: 'a07a', Lsgr: '20b2aa', Lskb: '87cefa', LsTg: '778899', Lstb: 'b0c4de', Lw: 'e0', m: '-ff-', mgrn: '32cd32', nn: 'af0e6', mgnt: '-ff', mrn: '8--0', mqm: '66cdaa', mmb: '--cd', mmrc: 'ba55d3', mmpr: '9370db', msg: '3cb371', mmsT: '7b68ee', '': '-fa9a', mtr: '48d1cc', mmvt: 'c71585', mnLb: '191970', ntc: '5fffa', mstr: 'e4e1', mccs: 'e4b5', vjw: 'dead', nv: '--80', c: 'df5e6', v: '808-0', vrb: '6b8e23', rng: 'a5-', rngr: '45-', rch: 'da70d6', pgnr: 'eee8aa', pgrn: '98fb98', ptrq: 'afeeee', pvtr: 'db7093', ppwh: 'efd5', pchp: 'dab9', pr: 'cd853f', pnk: 'c0cb', pm: 'dda0dd', pwrb: 'b0e0e6', prp: '8-080', cc: '663399', r: '--', sbr: 'bc8f8f', rb: '4169e1', sbrw: '8b4513', smn: 'a8072', nbr: '4a460', sgrn: '2e8b57', ssh: '5ee', snn: 'a0522d', svr: 'c0c0c0', skb: '87ceeb', sTb: '6a5acd', sTgr: '708090', snw: 'afa', n: '-ff7f', stb: '4682b4', tn: 'd2b48c', t: '-8080', thst: 'd8bfd8', tmT: '6347', trqs: '40e0d0', vt: 'ee82ee', whT: '5deb3', wht: '', hts: '5f5f5', w: '-', wgrn: '9acd32' };\n\nfunction printNum(num) {\n    var decs = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n\n    var str = decs > 0 ? num.toFixed(decs).replace(/0+$/, '').replace(/\\.$/, '') : num.toString();\n    return str || '0';\n}\n\nvar Color = function () {\n    function Color(r, g, b, a) {\n        classCallCheck(this, Color);\n\n\n        var that = this;\n        function parseString(input) {\n\n            if (input.startsWith('hsl')) {\n                var _input$match$map = input.match(/([\\-\\d\\.e]+)/g).map(Number),\n                    _input$match$map2 = slicedToArray(_input$match$map, 4),\n                    h = _input$match$map2[0],\n                    s = _input$match$map2[1],\n                    l = _input$match$map2[2],\n                    _a = _input$match$map2[3];\n\n                if (_a === undefined) {\n                    _a = 1;\n                }\n\n                h /= 360;\n                s /= 100;\n                l /= 100;\n                that.hsla = [h, s, l, _a];\n            } else if (input.startsWith('rgb')) {\n                var _input$match$map3 = input.match(/([\\-\\d\\.e]+)/g).map(Number),\n                    _input$match$map4 = slicedToArray(_input$match$map3, 4),\n                    _r = _input$match$map4[0],\n                    _g = _input$match$map4[1],\n                    _b = _input$match$map4[2],\n                    _a2 = _input$match$map4[3];\n\n                if (_a2 === undefined) {\n                    _a2 = 1;\n                }\n\n                that.rgba = [_r, _g, _b, _a2];\n            } else {\n                if (input.startsWith('#')) {\n                    that.rgba = Color.hexToRgb(input);\n                } else {\n                    that.rgba = Color.nameToRgb(input) || Color.hexToRgb(input);\n                }\n            }\n        }\n\n        if (r === undefined) ; else if (Array.isArray(r)) {\n            this.rgba = r;\n        } else if (b === undefined) {\n            var color = r && '' + r;\n            if (color) {\n                parseString(color.toLowerCase());\n            }\n        } else {\n            this.rgba = [r, g, b, a === undefined ? 1 : a];\n        }\n    }\n\n    createClass(Color, [{\n        key: 'printRGB',\n        value: function printRGB(alpha) {\n            var rgb = alpha ? this.rgba : this.rgba.slice(0, 3),\n                vals = rgb.map(function (x, i) {\n                return printNum(x, i === 3 ? 3 : 0);\n            });\n\n            return alpha ? 'rgba(' + vals + ')' : 'rgb(' + vals + ')';\n        }\n    }, {\n        key: 'printHSL',\n        value: function printHSL(alpha) {\n            var mults = [360, 100, 100, 1],\n                suff = ['', '%', '%', ''];\n\n            var hsl = alpha ? this.hsla : this.hsla.slice(0, 3),\n                vals = hsl.map(function (x, i) {\n                return printNum(x * mults[i], i === 3 ? 3 : 1) + suff[i];\n            });\n\n            return alpha ? 'hsla(' + vals + ')' : 'hsl(' + vals + ')';\n        }\n    }, {\n        key: 'printHex',\n        value: function printHex(alpha) {\n            var hex = this.hex;\n            return alpha ? hex : hex.substring(0, 7);\n        }\n    }, {\n        key: 'rgba',\n        get: function get() {\n            if (this._rgba) {\n                return this._rgba;\n            }\n            if (!this._hsla) {\n                throw new Error('No color is set');\n            }\n\n            return this._rgba = Color.hslToRgb(this._hsla);\n        },\n        set: function set(rgb) {\n            if (rgb.length === 3) {\n                rgb[3] = 1;\n            }\n\n            this._rgba = rgb;\n            this._hsla = null;\n        }\n    }, {\n        key: 'rgbString',\n        get: function get() {\n            return this.printRGB();\n        }\n    }, {\n        key: 'rgbaString',\n        get: function get() {\n            return this.printRGB(true);\n        }\n    }, {\n        key: 'hsla',\n        get: function get() {\n            if (this._hsla) {\n                return this._hsla;\n            }\n            if (!this._rgba) {\n                throw new Error('No color is set');\n            }\n\n            return this._hsla = Color.rgbToHsl(this._rgba);\n        },\n        set: function set(hsl) {\n            if (hsl.length === 3) {\n                hsl[3] = 1;\n            }\n\n            this._hsla = hsl;\n            this._rgba = null;\n        }\n    }, {\n        key: 'hslString',\n        get: function get() {\n            return this.printHSL();\n        }\n    }, {\n        key: 'hslaString',\n        get: function get() {\n            return this.printHSL(true);\n        }\n    }, {\n        key: 'hex',\n        get: function get() {\n            var rgb = this.rgba,\n                hex = rgb.map(function (x, i) {\n                return i < 3 ? x.toString(16) : Math.round(x * 255).toString(16);\n            });\n\n            return '#' + hex.map(function (x) {\n                return x.padStart(2, '0');\n            }).join('');\n        },\n        set: function set(hex) {\n            this.rgba = Color.hexToRgb(hex);\n        }\n    }], [{\n        key: 'hexToRgb',\n        value: function hexToRgb(input) {\n\n            var hex = (input.startsWith('#') ? input.slice(1) : input).replace(/^(\\w{3})$/, '$1F').replace(/^(\\w)(\\w)(\\w)(\\w)$/, '$1$1$2$2$3$3$4$4').replace(/^(\\w{6})$/, '$1FF');\n\n            if (!hex.match(/^([0-9a-fA-F]{8})$/)) {\n                throw new Error('Unknown hex color; ' + input);\n            }\n\n            var rgba = hex.match(/^(\\w\\w)(\\w\\w)(\\w\\w)(\\w\\w)$/).slice(1).map(function (x) {\n                return parseInt(x, 16);\n            });\n\n            rgba[3] = rgba[3] / 255;\n            return rgba;\n        }\n    }, {\n        key: 'nameToRgb',\n        value: function nameToRgb(input) {\n\n            var hash = input.toLowerCase().replace('at', 'T').replace(/[aeiouyldf]/g, '').replace('ght', 'L').replace('rk', 'D').slice(-5, 4),\n                hex = colorNames[hash];\n            return hex === undefined ? hex : Color.hexToRgb(hex.replace(/\\-/g, '00').padStart(6, 'f'));\n        }\n    }, {\n        key: 'rgbToHsl',\n        value: function rgbToHsl(_ref) {\n            var _ref2 = slicedToArray(_ref, 4),\n                r = _ref2[0],\n                g = _ref2[1],\n                b = _ref2[2],\n                a = _ref2[3];\n\n            r /= 255;\n            g /= 255;\n            b /= 255;\n\n            var max = Math.max(r, g, b),\n                min = Math.min(r, g, b);\n            var h = void 0,\n                s = void 0,\n                l = (max + min) / 2;\n\n            if (max === min) {\n                h = s = 0;\n            } else {\n                var d = max - min;\n                s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\n                switch (max) {\n                    case r:\n                        h = (g - b) / d + (g < b ? 6 : 0);break;\n                    case g:\n                        h = (b - r) / d + 2;break;\n                    case b:\n                        h = (r - g) / d + 4;break;\n                }\n\n                h /= 6;\n            }\n\n            return [h, s, l, a];\n        }\n    }, {\n        key: 'hslToRgb',\n        value: function hslToRgb(_ref3) {\n            var _ref4 = slicedToArray(_ref3, 4),\n                h = _ref4[0],\n                s = _ref4[1],\n                l = _ref4[2],\n                a = _ref4[3];\n\n            var r = void 0,\n                g = void 0,\n                b = void 0;\n\n            if (s === 0) {\n                r = g = b = l;\n            } else {\n                var hue2rgb = function hue2rgb(p, q, t) {\n                    if (t < 0) t += 1;\n                    if (t > 1) t -= 1;\n                    if (t < 1 / 6) return p + (q - p) * 6 * t;\n                    if (t < 1 / 2) return q;\n                    if (t < 2 / 3) return p + (q - p) * (2 / 3 - t) * 6;\n                    return p;\n                };\n\n                var q = l < 0.5 ? l * (1 + s) : l + s - l * s,\n                    p = 2 * l - q;\n\n                r = hue2rgb(p, q, h + 1 / 3);\n                g = hue2rgb(p, q, h);\n                b = hue2rgb(p, q, h - 1 / 3);\n            }\n\n            var rgba = [r * 255, g * 255, b * 255].map(Math.round);\n            rgba[3] = a;\n\n            return rgba;\n        }\n    }]);\n    return Color;\n}();\n\nvar EventBucket = function () {\n    function EventBucket() {\n        classCallCheck(this, EventBucket);\n\n        this._events = [];\n    }\n\n    createClass(EventBucket, [{\n        key: 'add',\n        value: function add(target, type, handler) {\n            target.addEventListener(type, handler, false);\n            this._events.push({\n                target: target,\n                type: type,\n                handler: handler\n            });\n        }\n    }, {\n        key: 'remove',\n        value: function remove(target, type, handler) {\n            this._events = this._events.filter(function (e) {\n                var isMatch = true;\n                if (target && target !== e.target) {\n                    isMatch = false;\n                }\n                if (type && type !== e.type) {\n                    isMatch = false;\n                }\n                if (handler && handler !== e.handler) {\n                    isMatch = false;\n                }\n\n                if (isMatch) {\n                    EventBucket._doRemove(e.target, e.type, e.handler);\n                }\n                return !isMatch;\n            });\n        }\n    }, {\n        key: 'destroy',\n        value: function destroy() {\n            this._events.forEach(function (e) {\n                return EventBucket._doRemove(e.target, e.type, e.handler);\n            });\n            this._events = [];\n        }\n    }], [{\n        key: '_doRemove',\n        value: function _doRemove(target, type, handler) {\n            target.removeEventListener(type, handler, false);\n        }\n    }]);\n    return EventBucket;\n}();\n\nfunction parseHTML(htmlString) {\n\n    var div = document.createElement('div');\n    div.innerHTML = htmlString;\n    return div.firstElementChild;\n}\n\nfunction dragTrack(eventBucket, area, callback) {\n    var dragging = false;\n\n    function clamp(val, min, max) {\n        return Math.max(min, Math.min(val, max));\n    }\n\n    function onMove(e, info, starting) {\n        if (starting) {\n            dragging = true;\n        }\n        if (!dragging) {\n            return;\n        }\n\n        e.preventDefault();\n\n        var bounds = area.getBoundingClientRect(),\n            w = bounds.width,\n            h = bounds.height,\n            x = info.clientX,\n            y = info.clientY;\n\n        var relX = clamp(x - bounds.left, 0, w),\n            relY = clamp(y - bounds.top, 0, h);\n\n        callback(relX / w, relY / h);\n    }\n\n    function onMouse(e, starting) {\n        var button = e.buttons === undefined ? e.which : e.buttons;\n        if (button === 1) {\n            onMove(e, e, starting);\n        } else {\n            dragging = false;\n        }\n    }\n\n    function onTouch(e, starting) {\n        if (e.touches.length === 1) {\n            onMove(e, e.touches[0], starting);\n        } else {\n            dragging = false;\n        }\n    }\n\n    eventBucket.add(area, 'mousedown', function (e) {\n        onMouse(e, true);\n    });\n    eventBucket.add(area, 'touchstart', function (e) {\n        onTouch(e, true);\n    });\n    eventBucket.add(window, 'mousemove', onMouse);\n    eventBucket.add(area, 'touchmove', onTouch);\n    eventBucket.add(window, 'mouseup', function (e) {\n        dragging = false;\n    });\n    eventBucket.add(area, 'touchend', function (e) {\n        dragging = false;\n    });\n    eventBucket.add(area, 'touchcancel', function (e) {\n        dragging = false;\n    });\n}\n\nvar BG_TRANSP = 'linear-gradient(45deg, lightgrey 25%, transparent 25%, transparent 75%, lightgrey 75%) 0 0 / 2em 2em,\\n                   linear-gradient(45deg, lightgrey 25%,       white 25%,       white 75%, lightgrey 75%) 1em 1em / 2em 2em';\nvar HUES = 360;\n\nvar EVENT_KEY = 'keydown',\n    EVENT_CLICK_OUTSIDE = 'mousedown',\n    EVENT_TAB_MOVE = 'focusin';\n\nfunction $(selector, context) {\n    return (context || document).querySelector(selector);\n}\n\nfunction stopEvent(e) {\n\n    e.preventDefault();\n    e.stopPropagation();\n}\nfunction onKey(bucket, target, keys, handler, stop) {\n    bucket.add(target, EVENT_KEY, function (e) {\n        if (keys.indexOf(e.key) >= 0) {\n            if (stop) {\n                stopEvent(e);\n            }\n            handler(e);\n        }\n    });\n}\n\nvar Picker = function () {\n    function Picker(options) {\n        classCallCheck(this, Picker);\n\n\n        this.settings = {\n\n            popup: 'right',\n            layout: 'default',\n            alpha: true,\n            editor: true,\n            editorFormat: 'hex',\n            cancelButton: false,\n            defaultColor: '#0cf'\n        };\n\n        this._events = new EventBucket();\n\n        this.onChange = null;\n\n        this.onDone = null;\n\n        this.onOpen = null;\n\n        this.onClose = null;\n\n        this.setOptions(options);\n    }\n\n    createClass(Picker, [{\n        key: 'setOptions',\n        value: function setOptions(options) {\n            var _this = this;\n\n            if (!options) {\n                return;\n            }\n            var settings = this.settings;\n\n            function transfer(source, target, skipKeys) {\n                for (var key in source) {\n                    if (skipKeys && skipKeys.indexOf(key) >= 0) {\n                        continue;\n                    }\n\n                    target[key] = source[key];\n                }\n            }\n\n            if (options instanceof HTMLElement) {\n                settings.parent = options;\n            } else {\n\n                if (settings.parent && options.parent && settings.parent !== options.parent) {\n                    this._events.remove(settings.parent);\n                    this._popupInited = false;\n                }\n\n                transfer(options, settings);\n\n                if (options.onChange) {\n                    this.onChange = options.onChange;\n                }\n                if (options.onDone) {\n                    this.onDone = options.onDone;\n                }\n                if (options.onOpen) {\n                    this.onOpen = options.onOpen;\n                }\n                if (options.onClose) {\n                    this.onClose = options.onClose;\n                }\n\n                var col = options.color || options.colour;\n                if (col) {\n                    this._setColor(col);\n                }\n            }\n\n            var parent = settings.parent;\n            if (parent && settings.popup && !this._popupInited) {\n\n                var openProxy = function openProxy(e) {\n                    return _this.openHandler(e);\n                };\n\n                this._events.add(parent, 'click', openProxy);\n\n                onKey(this._events, parent, [' ', 'Spacebar', 'Enter'], openProxy);\n\n                this._popupInited = true;\n            } else if (options.parent && !settings.popup) {\n                this.show();\n            }\n        }\n    }, {\n        key: 'openHandler',\n        value: function openHandler(e) {\n            if (this.show()) {\n\n                e && e.preventDefault();\n\n                this.settings.parent.style.pointerEvents = 'none';\n\n                var toFocus = e && e.type === EVENT_KEY ? this._domEdit : this.domElement;\n                setTimeout(function () {\n                    return toFocus.focus();\n                }, 100);\n\n                if (this.onOpen) {\n                    this.onOpen(this.colour);\n                }\n            }\n        }\n    }, {\n        key: 'closeHandler',\n        value: function closeHandler(e) {\n            var event = e && e.type;\n            var doHide = false;\n\n            if (!e) {\n                doHide = true;\n            } else if (event === EVENT_CLICK_OUTSIDE || event === EVENT_TAB_MOVE) {\n\n                var knownTime = (this.__containedEvent || 0) + 100;\n                if (e.timeStamp > knownTime) {\n                    doHide = true;\n                }\n            } else {\n\n                stopEvent(e);\n\n                doHide = true;\n            }\n\n            if (doHide && this.hide()) {\n                this.settings.parent.style.pointerEvents = '';\n\n                if (event !== EVENT_CLICK_OUTSIDE) {\n                    this.settings.parent.focus();\n                }\n\n                if (this.onClose) {\n                    this.onClose(this.colour);\n                }\n            }\n        }\n    }, {\n        key: 'movePopup',\n        value: function movePopup(options, open) {\n\n            this.closeHandler();\n\n            this.setOptions(options);\n            if (open) {\n                this.openHandler();\n            }\n        }\n    }, {\n        key: 'setColor',\n        value: function setColor(color, silent) {\n            this._setColor(color, { silent: silent });\n        }\n    }, {\n        key: '_setColor',\n        value: function _setColor(color, flags) {\n            if (typeof color === 'string') {\n                color = color.trim();\n            }\n            if (!color) {\n                return;\n            }\n\n            flags = flags || {};\n            var c = void 0;\n            try {\n\n                c = new Color(color);\n            } catch (ex) {\n                if (flags.failSilently) {\n                    return;\n                }\n                throw ex;\n            }\n\n            if (!this.settings.alpha) {\n                var hsla = c.hsla;\n                hsla[3] = 1;\n                c.hsla = hsla;\n            }\n            this.colour = this.color = c;\n            this._setHSLA(null, null, null, null, flags);\n        }\n    }, {\n        key: 'setColour',\n        value: function setColour(colour, silent) {\n            this.setColor(colour, silent);\n        }\n    }, {\n        key: 'show',\n        value: function show() {\n            var parent = this.settings.parent;\n            if (!parent) {\n                return false;\n            }\n\n            if (this.domElement) {\n                var toggled = this._toggleDOM(true);\n\n                this._setPosition();\n\n                return toggled;\n            }\n\n            var html = this.settings.template || '<div class=\"picker_wrapper\" tabindex=\"-1\"><div class=\"picker_arrow\"></div><div class=\"picker_hue picker_slider\"><div class=\"picker_selector\"></div></div><div class=\"picker_sl\"><div class=\"picker_selector\"></div></div><div class=\"picker_alpha picker_slider\"><div class=\"picker_selector\"></div></div><div class=\"picker_editor\"><input aria-label=\"Type a color name or hex value\"/></div><div class=\"picker_sample\"></div><div class=\"picker_done\"><button>Ok</button></div><div class=\"picker_cancel\"><button>Cancel</button></div></div>';\n            var wrapper = parseHTML(html);\n\n            this.domElement = wrapper;\n            this._domH = $('.picker_hue', wrapper);\n            this._domSL = $('.picker_sl', wrapper);\n            this._domA = $('.picker_alpha', wrapper);\n            this._domEdit = $('.picker_editor input', wrapper);\n            this._domSample = $('.picker_sample', wrapper);\n            this._domOkay = $('.picker_done button', wrapper);\n            this._domCancel = $('.picker_cancel button', wrapper);\n\n            wrapper.classList.add('layout_' + this.settings.layout);\n            if (!this.settings.alpha) {\n                wrapper.classList.add('no_alpha');\n            }\n            if (!this.settings.editor) {\n                wrapper.classList.add('no_editor');\n            }\n            if (!this.settings.cancelButton) {\n                wrapper.classList.add('no_cancel');\n            }\n            this._ifPopup(function () {\n                return wrapper.classList.add('popup');\n            });\n\n            this._setPosition();\n\n            if (this.colour) {\n                this._updateUI();\n            } else {\n                this._setColor(this.settings.defaultColor);\n            }\n            this._bindEvents();\n\n            return true;\n        }\n    }, {\n        key: 'hide',\n        value: function hide() {\n            return this._toggleDOM(false);\n        }\n    }, {\n        key: 'destroy',\n        value: function destroy() {\n            this._events.destroy();\n            if (this.domElement) {\n                this.settings.parent.removeChild(this.domElement);\n            }\n        }\n    }, {\n        key: '_bindEvents',\n        value: function _bindEvents() {\n            var _this2 = this;\n\n            var that = this,\n                dom = this.domElement,\n                events = this._events;\n\n            function addEvent(target, type, handler) {\n                events.add(target, type, handler);\n            }\n\n            addEvent(dom, 'click', function (e) {\n                return e.preventDefault();\n            });\n\n            dragTrack(events, this._domH, function (x, y) {\n                return that._setHSLA(x);\n            });\n\n            dragTrack(events, this._domSL, function (x, y) {\n                return that._setHSLA(null, x, 1 - y);\n            });\n\n            if (this.settings.alpha) {\n                dragTrack(events, this._domA, function (x, y) {\n                    return that._setHSLA(null, null, null, 1 - y);\n                });\n            }\n\n            var editInput = this._domEdit;\n            {\n                addEvent(editInput, 'input', function (e) {\n                    that._setColor(this.value, { fromEditor: true, failSilently: true });\n                });\n\n                addEvent(editInput, 'focus', function (e) {\n                    var input = this;\n\n                    if (input.selectionStart === input.selectionEnd) {\n                        input.select();\n                    }\n                });\n            }\n\n            this._ifPopup(function () {\n\n                var popupCloseProxy = function popupCloseProxy(e) {\n                    return _this2.closeHandler(e);\n                };\n\n                addEvent(window, EVENT_CLICK_OUTSIDE, popupCloseProxy);\n                addEvent(window, EVENT_TAB_MOVE, popupCloseProxy);\n                onKey(events, dom, ['Esc', 'Escape'], popupCloseProxy);\n\n                var timeKeeper = function timeKeeper(e) {\n                    _this2.__containedEvent = e.timeStamp;\n                };\n                addEvent(dom, EVENT_CLICK_OUTSIDE, timeKeeper);\n\n                addEvent(dom, EVENT_TAB_MOVE, timeKeeper);\n\n                addEvent(_this2._domCancel, 'click', popupCloseProxy);\n            });\n\n            var onDoneProxy = function onDoneProxy(e) {\n                _this2._ifPopup(function () {\n                    return _this2.closeHandler(e);\n                });\n                if (_this2.onDone) {\n                    _this2.onDone(_this2.colour);\n                }\n            };\n            addEvent(this._domOkay, 'click', onDoneProxy);\n            onKey(events, dom, ['Enter'], onDoneProxy);\n        }\n    }, {\n        key: '_setPosition',\n        value: function _setPosition() {\n            var parent = this.settings.parent,\n                elm = this.domElement;\n\n            if (parent !== elm.parentNode) {\n                parent.appendChild(elm);\n            }\n\n            this._ifPopup(function (popup) {\n\n                if (getComputedStyle(parent).position === 'static') {\n                    parent.style.position = 'relative';\n                }\n\n                var cssClass = popup === true ? 'popup_right' : 'popup_' + popup;\n\n                ['popup_top', 'popup_bottom', 'popup_left', 'popup_right'].forEach(function (c) {\n\n                    if (c === cssClass) {\n                        elm.classList.add(c);\n                    } else {\n                        elm.classList.remove(c);\n                    }\n                });\n\n                elm.classList.add(cssClass);\n            });\n        }\n    }, {\n        key: '_setHSLA',\n        value: function _setHSLA(h, s, l, a, flags) {\n            flags = flags || {};\n\n            var col = this.colour,\n                hsla = col.hsla;\n\n            [h, s, l, a].forEach(function (x, i) {\n                if (x || x === 0) {\n                    hsla[i] = x;\n                }\n            });\n            col.hsla = hsla;\n\n            this._updateUI(flags);\n\n            if (this.onChange && !flags.silent) {\n                this.onChange(col);\n            }\n        }\n    }, {\n        key: '_updateUI',\n        value: function _updateUI(flags) {\n            if (!this.domElement) {\n                return;\n            }\n            flags = flags || {};\n\n            var col = this.colour,\n                hsl = col.hsla,\n                cssHue = 'hsl(' + hsl[0] * HUES + ', 100%, 50%)',\n                cssHSL = col.hslString,\n                cssHSLA = col.hslaString;\n\n            var uiH = this._domH,\n                uiSL = this._domSL,\n                uiA = this._domA,\n                thumbH = $('.picker_selector', uiH),\n                thumbSL = $('.picker_selector', uiSL),\n                thumbA = $('.picker_selector', uiA);\n\n            function posX(parent, child, relX) {\n                child.style.left = relX * 100 + '%';\n            }\n            function posY(parent, child, relY) {\n                child.style.top = relY * 100 + '%';\n            }\n\n            posX(uiH, thumbH, hsl[0]);\n\n            this._domSL.style.backgroundColor = this._domH.style.color = cssHue;\n\n            posX(uiSL, thumbSL, hsl[1]);\n            posY(uiSL, thumbSL, 1 - hsl[2]);\n\n            uiSL.style.color = cssHSL;\n\n            posY(uiA, thumbA, 1 - hsl[3]);\n\n            var opaque = cssHSL,\n                transp = opaque.replace('hsl', 'hsla').replace(')', ', 0)'),\n                bg = 'linear-gradient(' + [opaque, transp] + ')';\n\n            this._domA.style.background = bg + ', ' + BG_TRANSP;\n\n            if (!flags.fromEditor) {\n                var format = this.settings.editorFormat,\n                    alpha = this.settings.alpha;\n\n                var value = void 0;\n                switch (format) {\n                    case 'rgb':\n                        value = col.printRGB(alpha);break;\n                    case 'hsl':\n                        value = col.printHSL(alpha);break;\n                    default:\n                        value = col.printHex(alpha);\n                }\n                this._domEdit.value = value;\n            }\n\n            this._domSample.style.color = cssHSLA;\n        }\n    }, {\n        key: '_ifPopup',\n        value: function _ifPopup(actionIf, actionElse) {\n            if (this.settings.parent && this.settings.popup) {\n                actionIf && actionIf(this.settings.popup);\n            } else {\n                actionElse && actionElse();\n            }\n        }\n    }, {\n        key: '_toggleDOM',\n        value: function _toggleDOM(toVisible) {\n            var dom = this.domElement;\n            if (!dom) {\n                return false;\n            }\n\n            var displayStyle = toVisible ? '' : 'none',\n                toggle = dom.style.display !== displayStyle;\n\n            if (toggle) {\n                dom.style.display = displayStyle;\n            }\n            return toggle;\n        }\n    }]);\n    return Picker;\n}();\n\n{\n    var style = document.createElement('style');\n    style.textContent = '.picker_wrapper.no_alpha .picker_alpha{display:none}.picker_wrapper.no_editor .picker_editor{position:absolute;z-index:-1;opacity:0}.picker_wrapper.no_cancel .picker_cancel{display:none}.layout_default.picker_wrapper{display:flex;flex-flow:row wrap;justify-content:space-between;align-items:stretch;font-size:10px;width:25em;padding:.5em}.layout_default.picker_wrapper input,.layout_default.picker_wrapper button{font-size:1rem}.layout_default.picker_wrapper>*{margin:.5em}.layout_default.picker_wrapper::before{content:\"\";display:block;width:100%;height:0;order:1}.layout_default .picker_slider,.layout_default .picker_selector{padding:1em}.layout_default .picker_hue{width:100%}.layout_default .picker_sl{flex:1 1 auto}.layout_default .picker_sl::before{content:\"\";display:block;padding-bottom:100%}.layout_default .picker_editor{order:1;width:6.5rem}.layout_default .picker_editor input{width:100%;height:100%}.layout_default .picker_sample{order:1;flex:1 1 auto}.layout_default .picker_done,.layout_default .picker_cancel{order:1}.picker_wrapper{box-sizing:border-box;background:#f2f2f2;box-shadow:0 0 0 1px silver;cursor:default;font-family:sans-serif;color:#444;pointer-events:auto}.picker_wrapper:focus{outline:none}.picker_wrapper button,.picker_wrapper input{box-sizing:border-box;border:none;box-shadow:0 0 0 1px silver;outline:none}.picker_wrapper button:focus,.picker_wrapper button:active,.picker_wrapper input:focus,.picker_wrapper input:active{box-shadow:0 0 2px 1px #1e90ff}.picker_wrapper button{padding:.4em .6em;cursor:pointer;background-color:#f5f5f5;background-image:linear-gradient(0deg, gainsboro, transparent)}.picker_wrapper button:active{background-image:linear-gradient(0deg, transparent, gainsboro)}.picker_wrapper button:hover{background-color:#fff}.picker_selector{position:absolute;z-index:1;display:block;-webkit-transform:translate(-50%, -50%);transform:translate(-50%, -50%);border:2px solid #fff;border-radius:100%;box-shadow:0 0 3px 1px #67b9ff;background:currentColor;cursor:pointer}.picker_slider .picker_selector{border-radius:2px}.picker_hue{position:relative;background-image:linear-gradient(90deg, red, yellow, lime, cyan, blue, magenta, red);box-shadow:0 0 0 1px silver}.picker_sl{position:relative;box-shadow:0 0 0 1px silver;background-image:linear-gradient(180deg, white, rgba(255, 255, 255, 0) 50%),linear-gradient(0deg, black, rgba(0, 0, 0, 0) 50%),linear-gradient(90deg, #808080, rgba(128, 128, 128, 0))}.picker_alpha,.picker_sample{position:relative;background:linear-gradient(45deg, lightgrey 25%, transparent 25%, transparent 75%, lightgrey 75%) 0 0/2em 2em,linear-gradient(45deg, lightgrey 25%, white 25%, white 75%, lightgrey 75%) 1em 1em/2em 2em;box-shadow:0 0 0 1px silver}.picker_alpha .picker_selector,.picker_sample .picker_selector{background:none}.picker_editor input{font-family:monospace;padding:.2em .4em}.picker_sample::before{content:\"\";position:absolute;display:block;width:100%;height:100%;background:currentColor}.picker_arrow{position:absolute;z-index:-1}.picker_wrapper.popup{position:absolute;z-index:2;margin:1.5em}.picker_wrapper.popup,.picker_wrapper.popup .picker_arrow::before,.picker_wrapper.popup .picker_arrow::after{background:#f2f2f2;box-shadow:0 0 10px 1px rgba(0,0,0,.4)}.picker_wrapper.popup .picker_arrow{width:3em;height:3em;margin:0}.picker_wrapper.popup .picker_arrow::before,.picker_wrapper.popup .picker_arrow::after{content:\"\";display:block;position:absolute;top:0;left:0;z-index:-99}.picker_wrapper.popup .picker_arrow::before{width:100%;height:100%;-webkit-transform:skew(45deg);transform:skew(45deg);-webkit-transform-origin:0 100%;transform-origin:0 100%}.picker_wrapper.popup .picker_arrow::after{width:150%;height:150%;box-shadow:none}.popup.popup_top{bottom:100%;left:0}.popup.popup_top .picker_arrow{bottom:0;left:0;-webkit-transform:rotate(-90deg);transform:rotate(-90deg)}.popup.popup_bottom{top:100%;left:0}.popup.popup_bottom .picker_arrow{top:0;left:0;-webkit-transform:rotate(90deg) scale(1, -1);transform:rotate(90deg) scale(1, -1)}.popup.popup_left{top:0;right:100%}.popup.popup_left .picker_arrow{top:0;right:0;-webkit-transform:scale(-1, 1);transform:scale(-1, 1)}.popup.popup_right{top:0;left:100%}.popup.popup_right .picker_arrow{top:0;left:0}';\n    document.documentElement.firstElementChild.appendChild(style);\n\n    Picker.StyleElement = style;\n}\n\nexport { Picker as default };\n", "import { ColorWithID, parseAndTokenizeText } from 'components/pages/Colors/utils';\nimport { FunctionalComponent } from 'preact';\nimport { useCallback, useEffect, useRef, useState } from 'preact/hooks';\nimport { Config } from './Config';\n\ninterface InputColumnProps {\n    onColorsParsed: (colors: ColorWithID[], tokenizedText: string) => void;\n    config: Config;\n    onConfigChange: (newConfig: Partial<InputColumnProps['config']>) => void;\n}\n\nexport const InputColumn: FunctionalComponent<InputColumnProps> = ({ onColorsParsed, config, onConfigChange }) => {\n    const [text, setText] = useState('');\n    const textAreaRef = useRef<HTMLTextAreaElement>(null);\n\n    useEffect(() => {\n        const savedText = localStorage.getItem('inputText');\n        if (savedText) {\n            setText(savedText);\n        }\n        if (textAreaRef.current) {\n            textAreaRef.current.value = savedText || '';\n        }\n    }, []);\n\n    const handleFileImport = useCallback((event: Event) => {\n        const target = event.target as HTMLInputElement;\n        if (target && target.files && target.files[0]) {\n            const file = target.files[0];\n            const reader = new FileReader();\n            reader.onload = (e) => {\n                const fileContent = e.target!.result as string;\n                setText(fileContent);\n                if (textAreaRef.current) {\n                    textAreaRef.current.value = fileContent;\n                }\n                localStorage.setItem('inputText', fileContent);\n            };\n            reader.readAsText(file);\n        }\n    }, []);\n\n    const handleClear = useCallback(() => {\n        setText('');\n        if (textAreaRef.current) {\n            textAreaRef.current.value = '';\n        }\n        localStorage.setItem('inputText', '');\n    }, []);\n\n    const handleParseColors = useCallback(() => {\n        const textareaContent = textAreaRef.current ? textAreaRef.current.value : '';\n        if (textareaContent.trim() !== '') {\n            setText(textareaContent);\n            const { colors, tokenizedText } = parseAndTokenizeText(textareaContent, config);\n            console.log(`parsed`, colors, tokenizedText);\n            localStorage.setItem('inputText', textareaContent);\n            onColorsParsed(colors, tokenizedText);\n        } else {\n            onColorsParsed([], '');\n        }\n    }, [onColorsParsed, config.combineSimilar]);\n\n    return (\n        <div className=\"column InputColumn\">\n            <div className=\"button-bar top\">\n                <button onClick={() => document.getElementById('fileInput')?.click()}>Import File</button>\n                <input type=\"file\" id=\"fileInput\" style={{ display: 'none' }} onChange={handleFileImport} />\n                <button onClick={handleClear}>Clear</button>\n                <Config config={config} onConfigChange={onConfigChange} />\n            </div>\n            <textarea\n                ref={textAreaRef}\n                value={text}\n                onChange={(e) => setText(e.target.value)}\n            />\n            <div className=\"button-bar bottom\">\n                <button onClick={handleParseColors}>Parse Colors</button>\n            </div>\n        </div>\n    );\n};", "import { Config } from './Config';\n\n\nexport interface ColorWithID {\n    id: number;\n    color: string;\n}\n\nexport const COLOR_TOKEN = (id: number): string => `%%${id}%%`;\n\nexport function parseAndTokenizeText(text: string, config?: Config): { colors: ColorWithID[], tokenizedText: string } {\n    if (text.trim() === '') {\n        return { colors: [], tokenizedText: '' };\n    }\n\n    // Order regexes from longest to shortest color format to prioritize longer matches\n    const colorRegexes = [\n        /#(?:[0-9a-fA-F]{8})/gi, // 8-character hex\n        /#(?:[0-9a-fA-F]{6})/gi, // 6-character hex\n        /rgba?\\s*\\(\\s*(?:\\d{1,3})\\s*,\\s*(?:\\d{1,3})\\s*,\\s*(?:\\d{1,3})\\s*(?:\\s*,\\s*(?:[01](?:\\.\\d+)?|\\.\\d+|[01]))?\\s*\\)/gi, // RGBA/RGB\n        /#(?:[0-9a-fA-F]{3})/gi // 3-character hex\n    ];\n\n    const colors: ColorWithID[] = [];\n    let tokenizedText = text;\n    let idCounter = 0;\n    const colorMap = new Map<string, number>();\n\n    for (const regex of colorRegexes) {\n        let match;\n        while ((match = regex.exec(tokenizedText)) !== null) {\n            const originalColor = match[0];\n            const normalizedColor = normalizeColor(originalColor); // Assuming normalizeColor is imported or defined elsewhere\n\n            let id: number;\n            if (config?.combineSimilar) {\n                id = colorMap.get(normalizedColor) ?? (() => {\n                    const newId = idCounter++;\n                    colorMap.set(normalizedColor, newId);\n                    return newId;\n                })();\n            } else {\n                id = idCounter++;\n            }\n\n            const colorIndex = colors.findIndex(c => c.id === id);\n            if (colorIndex === -1) {\n                colors.push({ id, color: originalColor });\n            }\n\n            const token = COLOR_TOKEN(id);\n            const start = match.index;\n            const end = start + originalColor.length;\n\n            tokenizedText = tokenizedText.slice(0, start) + token + tokenizedText.slice(end);\n            //console.log(`\\n\\nReplace: `, originalColor, token, start, end, tokenizedText);\n\n            // Set the regex lastIndex to the position after the token replacement\n            regex.lastIndex = start + token.length;\n        }\n    }\n\n    return { colors, tokenizedText };\n}\n\n\n\nexport function parseAndTokenizeColors(text: string, combineSimilar: boolean): { colors: ColorWithID[], tokenizedText: string } {\n    if (text.trim() === '') {\n        return { colors: [], tokenizedText: '' };\n    }\n\n    const regex = /(#(?:[0-9a-fA-F]{3}|[0-9a-fA-F]{6}|[0-9a-fA-F]{8})|rgba?\\s*\\(\\s*(?:\\d{1,3})\\s*,\\s*(?:\\d{1,3})\\s*,\\s*(?:\\d{1,3})\\s*(?:\\s*,\\s*(?:[01](?:\\.\\d+)?|\\.\\d+|[01]))?\\s*\\))/gi;\n    const colors: ColorWithID[] = [];\n    let tokenizedText = text;\n    let idCounter = 0;\n    const colorMap = new Map<string, number>();\n\n    const normalizeColor = (color: string): string => {\n        let normalized = color.toLowerCase();\n        if (normalized.startsWith('rgba')) {\n            return normalized.replace(/(rgba\\(.+?),(\\d+\\.?\\d*)\\)/, (_, rgbPart, alpha) => {\n                return `${rgbPart},${parseFloat(alpha).toFixed(2)})`; // Normalize alpha to 2 decimal places\n            });\n        }\n        return normalized;\n    };\n\n    let match;\n    while ((match = regex.exec(text)) !== null) {\n        const originalColor = match[0];\n        const normalizedColor = normalizeColor(originalColor);\n\n        let id: number;\n        if (combineSimilar) {\n            id = colorMap.get(normalizedColor) ?? (() => {\n                const newId = idCounter++;\n                colorMap.set(normalizedColor, newId);\n                return newId;\n            })();\n        } else {\n            id = idCounter++;\n        }\n\n        if (!colors.some(c => c.id === id)) {\n            colors.push({ id, color: originalColor, modifiedColor: originalColor });\n        }\n\n        const token = COLOR_TOKEN(id);\n        tokenizedText = tokenizedText.slice(0, match.index) + token + tokenizedText.slice(match.index + originalColor.length);\n        regex.lastIndex = 0; // Reset regex index as we're modifying the string\n    }\n\n    return { colors, tokenizedText };\n}\n\nexport function replaceColors(tokenizedText: string, colors: ColorWithID[]): string {\n    if (tokenizedText.trim() === '') {\n        return '';\n    }\n\n    // Sort by ID descending to replace from highest to lowest, preventing substring issues\n    const sortedColors = [...colors].sort((a, b) => b.id - a.id);\n    let outputText = tokenizedText;\n\n    for (const { id, color, modifiedColor } of sortedColors) {\n        const token = COLOR_TOKEN(id);\n        const formattedColor = formatColor(color, modifiedColor);\n        outputText = outputText.replace(new RegExp(token, 'g'), formattedColor);\n    }\n\n    return outputText;\n}\n\nexport function formatColor(color: string, modifiedColor: string): string {\n    if (color.startsWith('#')) {\n        if (color.length === 9) { // Handle 8-digit hex with alpha\n            const rgba = hexToRgba(modifiedColor);\n            if (rgba) {\n                const [, r, g, b, a] = rgba.match(/^rgba\\((\\d+),\\s*(\\d+),\\s*(\\d+),\\s*([\\d.]+)\\)/)!;\n                const newAlpha = Math.round(parseFloat(a) * 255).toString(16).padStart(2, '0');\n                return `#${r}${g}${b}${newAlpha}`;\n            }\n        }\n        return modifiedColor.slice(0, 7); // For 6 or 3 digit hex, just return the first 7 characters\n    } else if (color.startsWith('rgb')) {\n        if (color.startsWith('rgba')) {\n            return modifiedColor; // Already in rgba format\n        } else {\n            // Convert rgba back to rgb if no alpha in original\n            return modifiedColor.replace(/rgba\\((.+?),[\\d.]+\\)/, 'rgb($1)');\n        }\n    }\n    return modifiedColor; // Fallback for unrecognized formats\n}\n\nfunction hexToRgba(hex: string): string | null {\n    let r = 0, g = 0, b = 0, a = 1;\n\n    if (hex.length === 4) {\n        r = parseInt(hex[1] + hex[1], 16);\n        g = parseInt(hex[2] + hex[2], 16);\n        b = parseInt(hex[3] + hex[3], 16);\n    } else if (hex.length === 7 || hex.length === 9) {\n        r = parseInt(hex.slice(1, 3), 16);\n        g = parseInt(hex.slice(3, 5), 16);\n        b = parseInt(hex.slice(5, 7), 16);\n        if (hex.length === 9) {\n            a = parseInt(hex.slice(7, 9), 16) / 255;\n        }\n    } else {\n        return null;\n    }\n\n    return `rgba(${r},${g},${b},${a.toFixed(2)})`;\n}\n\nexport function isValidColor(color: string): boolean {\n    // Helper function to check if a string is a number within a range\n    const isNumberInRange = (num: string, min: number, max: number): boolean => {\n        const n = Number(num);\n        return !isNaN(n) && n >= min && n <= max;\n    };\n\n    // Check for hex color\n    if (color.startsWith('#')) {\n        const hexChars = color.slice(1);\n        return /^[0-9A-Fa-f]+$/.test(hexChars) && [3, 6, 8].includes(hexChars.length);\n    }\n\n    // Check for RGB or RGBA\n    const rgbPattern = /^rgba?\\s*\\(\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*(?:\\s*,\\s*(?:[01](?:\\.\\d+)?|\\.\\d+|[01]))?\\s*\\)$/;\n    const match = color.match(rgbPattern);\n    if (match) {\n        const [, r, g, b, a] = match;\n        if (!isNumberInRange(r, 0, 255) || !isNumberInRange(g, 0, 255) || !isNumberInRange(b, 0, 255)) {\n            return false;\n        }\n        if (a !== undefined) {\n            const alpha = parseFloat(a);\n            return !isNaN(alpha) && alpha >= 0 && alpha <= 1;\n        }\n        return true;\n    }\n\n    return false;\n}\n\nexport function normalizeColor(color: string): string {\n    let normalized = color.toLowerCase();\n    if (normalized.startsWith('rgba')) {\n        return normalized.replace(/(rgba\\(.+?),(\\d+\\.?\\d*)\\)/, (_, rgbPart, alpha) => {\n            return `${rgbPart},${parseFloat(alpha).toFixed(2)})`; // Normalize alpha to 2 decimal places\n        });\n    }\n    if (normalized.startsWith('#')) {\n        // Convert hex to rgba for comparison if needed for combineSimilar\n        const rgba = hexToRgba(normalized);\n        if (rgba) {\n            normalized = rgba;\n        }\n    }\n    return normalized;\n};\n\nexport function parseColors(text: string): { color: string; modifiedColor: string }[] {\n    const colors: { color: string; modifiedColor: string }[] = [];\n\n    // Regex to match hex colors, RGB, and RGBA\n    const colorRegex = /#(?:[0-9a-fA-F]{3}|[0-9a-fA-F]{6}|[0-9a-fA-F]{8})|rgba?\\s*\\(\\s*(?:\\d{1,3})\\s*,\\s*(?:\\d{1,3})\\s*,\\s*(?:\\d{1,3})\\s*(?:\\s*,\\s*(?:[01](?:\\.\\d+)?|\\.\\d+|[01]))?\\s*\\)/gi;\n\n    // Extract all matches\n    let match;\n    while ((match = colorRegex.exec(text)) !== null) {\n        const color = match[0];\n        if (isValidColor(color)) {\n            const normalized = normalizeColor(color);\n            if (normalized && !colors.some(c => c.modifiedColor.toLowerCase() === normalized.toLowerCase())) {\n                colors.push({ color: color, modifiedColor: normalized });\n            }\n        }\n    }\n\n    return colors;\n}\n\ninterface ColorWithPosition {\n    color: string;\n    modifiedColor: string;\n    line: number;\n    start: number;\n    end: number;\n}\n\nexport function parseColorsWithPosition(text: string): ColorWithPosition[] {\n    if (!text) return [];\n    const lines = text.split('\\n');\n    const colorsWithPosition: ColorWithPosition[] = [];\n    const regex = /(#(?:[0-9a-fA-F]{3}|[0-9a-fA-F]{6}|[0-9a-fA-F]{8})|rgba?\\s*\\(\\s*(?:\\d{1,3})\\s*,\\s*(?:\\d{1,3})\\s*,\\s*(?:\\d{1,3})\\s*(?:\\s*,\\s*(?:[01](?:\\.\\d+)?|\\.\\d+|[01]))?\\s*\\))/gi;\n\n    lines.forEach((line, lineIndex) => {\n        let match;\n        while ((match = regex.exec(line)) !== null) {\n            const color = match[0];\n            if (isValidColor(color)) {\n                const start = match.index;\n                const end = start + color.length;\n                const normalized = normalizeColor(color) || color; // Use original if normalization fails\n                colorsWithPosition.push({\n                    color: color,\n                    modifiedColor: normalized,\n                    line: lineIndex,\n                    start: start,\n                    end: end\n                });\n            }\n        }\n    });\n\n    // Sort by line number, then by character position, in reverse order for replacement\n    return colorsWithPosition.sort((a, b) => {\n        if (a.line !== b.line) return b.line - a.line;\n        return b.start - a.start;\n    });\n}\n\n\nexport const readFile = (file) => {\n    return new Promise((resolve, reject) => {\n        try {\n            const reader = new FileReader();\n            reader.onload = (e) => {\n                resolve(e.target!.result as string);\n            };\n            reader.readAsText(file);\n        } catch (e) {\n            reject(e)\n        }\n    });\n}\n\nexport const readFileFromEvent = async (event) => {\n    const target = event.target as HTMLInputElement;\n    if (target && target.files && target.files[0]) {\n        const file = target.files[0];\n        return await readFile(file);\n    }\n    return null;\n}", "import { FunctionalComponent } from 'preact';\nimport { useCallback, useEffect, useRef, useState } from 'preact/hooks';\nimport VanillaPicker from 'vanilla-picker';\nimport { Dropdown } from './Dropdown';\n\nexport interface Config {\n    combineSimilar: boolean;\n    colorMode: 'dark' | 'light';\n    backgroundColorLight: string;\n    backgroundColorDark: string;\n    fontColorLight: string;\n    fontColorDark: string;\n    inputFontSize: string;\n}\n\ninterface ConfigProps {\n    config: Config;\n    onConfigChange: (newConfig: Partial<ConfigProps['config']>) => void;\n}\n\nexport const Config: FunctionalComponent<ConfigProps> = ({ config, onConfigChange }) => {\n    const [tempConfig, setTempConfig] = useState(config); // Temporary config for unsaved changes\n    const [backgroundPicker, setBackgroundPicker] = useState<VanillaPicker | null>(null);\n    const [textPicker, setTextPicker] = useState<VanillaPicker | null>(null);\n    const [showConfig, setShowConfig] = useState(false);\n    const backgroundSwatchRef = useRef<HTMLDivElement>(null);\n    const textSwatchRef = useRef<HTMLDivElement>(null);\n\n    useEffect(() => {\n        // Reset tempConfig when dropdown opens\n        setTempConfig(config);\n\n        if (backgroundSwatchRef.current && !backgroundPicker) {\n            const newPicker = new VanillaPicker({\n                parent: backgroundSwatchRef.current,\n                color: tempConfig.colorMode === 'dark' ? tempConfig.backgroundColorDark : tempConfig.backgroundColorLight,\n                popup: 'bottom',\n                editor: true,\n                onChange: (color: { hex: string }) => {\n                    setTempConfig(prev => ({\n                        ...prev,\n                        [prev.colorMode === 'dark' ? 'backgroundColorDark' : 'backgroundColorLight']: color.hex\n                    }));\n                },\n                onDone: (color: { hex: string }) => {\n                    setTempConfig(prev => ({\n                        ...prev,\n                        [prev.colorMode === 'dark' ? 'backgroundColorDark' : 'backgroundColorLight']: color.hex\n                    }));\n                }\n            });\n            setBackgroundPicker(newPicker);\n        } else if (backgroundPicker) {\n            backgroundPicker.setColor(tempConfig.colorMode === 'dark' ? tempConfig.backgroundColorDark : tempConfig.backgroundColorLight);\n        }\n\n        if (textSwatchRef.current && !textPicker) {\n            const newTextPicker = new VanillaPicker({\n                parent: textSwatchRef.current,\n                color: tempConfig.colorMode === 'dark' ? tempConfig.fontColorDark : tempConfig.fontColorLight,\n                popup: 'bottom',\n                editor: true,\n                onChange: (color: { hex: string }) => {\n                    setTempConfig(prev => ({\n                        ...prev,\n                        [prev.colorMode === 'dark' ? 'fontColorDark' : 'fontColorLight']: color.hex\n                    }));\n                },\n                onDone: (color: { hex: string }) => {\n                    setTempConfig(prev => ({\n                        ...prev,\n                        [prev.colorMode === 'dark' ? 'fontColorDark' : 'fontColorLight']: color.hex\n                    }));\n                }\n            });\n            setTextPicker(newTextPicker);\n        } else if (textPicker) {\n            textPicker.setColor(tempConfig.colorMode === 'dark' ? tempConfig.fontColorDark : tempConfig.fontColorLight);\n        }\n\n        return () => {\n            backgroundPicker?.destroy();\n            textPicker?.destroy();\n        };\n    }, [config, tempConfig]);\n\n    const handleCombineSimilarChange = useCallback((e: Event) => {\n        setTempConfig(prev => ({ ...prev, combineSimilar: (e.target as HTMLInputElement).checked }));\n    }, []);\n\n    const handleColorModeChange = useCallback((e: Event) => {\n        const isDark = (e.target as HTMLInputElement).checked;\n        setTempConfig(prev => ({ ...prev, colorMode: isDark ? 'dark' : 'light' }));\n    }, []);\n\n    const handleSave = useCallback(() => {\n        onConfigChange(tempConfig);\n        setShowConfig(false);\n        // Assuming there's a way to close the dropdown from here,\n        // like passing down a close function from Dropdown\n    }, [tempConfig, onConfigChange]);\n\n    const handleCancel = useCallback(() => {\n        setShowConfig(false);\n        console.log(`cancel`)\n        // Close dropdown without saving changes\n        // This would typically involve calling a close method from Dropdown\n    }, []);\n\n    return (\n        <Dropdown onClose={handleCancel} show={showConfig} onShow={(s) => setShowConfig(s)}>  // Assuming Dropdown component can take an onClose prop\n            <div style={{ display: 'flex', flexDirection: 'column', padding: '10px' }}>\n                <label>\n                    <input\n                        type=\"checkbox\"\n                        checked={tempConfig.combineSimilar}\n                        onChange={handleCombineSimilarChange}\n                    />\n                    Combine Similar\n                </label>\n                <label>\n                    <input\n                        type=\"checkbox\"\n                        checked={tempConfig.colorMode === 'dark'}\n                        onChange={handleColorModeChange}\n                    />\n                    Dark Mode\n                </label>\n                <div style={{ display: 'flex', alignItems: 'center', marginTop: '10px' }}>\n                    <span>Background Color</span>\n                    <div\n                        ref={backgroundSwatchRef}\n                        style={{\n                            width: '24px',\n                            height: '24px',\n                            backgroundColor: tempConfig.colorMode === 'dark' ? tempConfig.backgroundColorDark : tempConfig.backgroundColorLight,\n                            marginLeft: '10px',\n                            cursor: 'pointer'\n                        }}\n                        onClick={() => backgroundPicker?.show()}\n                    />\n                </div>\n                <div style={{ display: 'flex', alignItems: 'center', marginTop: '10px' }}>\n                    <span>Text Color</span>\n                    <div\n                        ref={textSwatchRef}\n                        style={{\n                            color: tempConfig.colorMode === 'dark' ? tempConfig.fontColorDark : tempConfig.fontColorLight,\n                            marginLeft: '10px',\n                            cursor: 'pointer'\n                        }}\n                    >\n                        Sample\n                    </div>\n                    <button\n                        style={{\n                            background: 'transparent',\n                            border: 'none',\n                            cursor: 'pointer',\n                            padding: 0,\n                            color: 'inherit',\n                            fontSize: 'inherit'\n                        }}\n                        onClick={() => textPicker?.show()}\n                    >\n                        Sample\n                    </button>\n                </div>\n                <div style={{ display: 'flex', justifyContent: 'space-between', marginTop: '10px' }}>\n                    <button onClick={handleCancel}>Cancel</button>\n                    <button onClick={handleSave}>Save</button>\n                </div>\n            </div>\n        </Dropdown>\n    );\n};", "import { FunctionalComponent, h } from 'preact';\nimport { useCallback, useEffect, useRef, useState } from 'preact/hooks';\n\ninterface DropdownProps {\n    show: boolean;\n    onShow: (s) => void;\n    children: h.JSX.Element;\n}\n\nexport const Dropdown: FunctionalComponent<DropdownProps> = ({ show, onShow, children }) => {\n    const [isOpen, setIsOpen] = useState(show || false);\n    const dropdownRef = useRef<HTMLDivElement>(null);\n    const hoverTimeout = useRef<number | null>(null);\n\n    const handleToggle = useCallback(() => {\n        setIsOpen(!isOpen);\n        onShow(!isOpen);\n    }, [isOpen]);\n\n    const handleMouseEnter = useCallback(() => {\n        if (hoverTimeout.current !== null) {\n            clearTimeout(hoverTimeout.current);\n            hoverTimeout.current = null;\n        }\n    }, []);\n\n    useEffect(() => {\n        setIsOpen(show);\n    }, [show]);\n\n    const handleMouseLeave = useCallback(() => {\n        // hoverTimeout.current = window.setTimeout(() => {\n        //     setIsOpen(false);\n        // }, 5000);\n    }, []);\n\n    useEffect(() => {\n        if (dropdownRef.current) {\n            dropdownRef.current.addEventListener('mouseenter', handleMouseEnter);\n            dropdownRef.current.addEventListener('mouseleave', handleMouseLeave);\n        }\n\n        return () => {\n            if (dropdownRef.current) {\n                dropdownRef.current.removeEventListener('mouseenter', handleMouseEnter);\n                dropdownRef.current.removeEventListener('mouseleave', handleMouseLeave);\n            }\n            if (hoverTimeout.current !== null) {\n                clearTimeout(hoverTimeout.current);\n            }\n        };\n    }, [handleMouseEnter, handleMouseLeave]);\n\n    return (\n        <div className=\"dropdown-container\" ref={dropdownRef}>\n            <button className=\"dropdown-button\" onClick={handleToggle}>\n                <span>Config</span>\n            </button>\n            {isOpen && (\n                <div className=\"dropdown-menu\" style={{ position: 'absolute', top: '100%', right: 0, zIndex: 1000 }}>\n                    {children}\n                </div>\n            )}\n        </div>\n    );\n};", "import { ColorWithID } from 'components/pages/Colors/utils';\nimport { FunctionalComponent } from 'preact';\nimport { useCallback, useEffect, useMemo, useState } from 'preact/hooks';\nimport seedrandom from 'seedrandom';\nimport { parseColorsWithPosition, replaceColors } from './utils';\n\ninterface OutputColumnProps {\n    colors: ColorWithID[];\n    tokenizedText: string;\n    importedFileName?: string;\n}\n\nexport const OutputColumn: FunctionalComponent<OutputColumnProps> = ({ colors, tokenizedText, importedFileName }) => {\n\n    const [activeTab, setActiveTab] = useState('swatches');\n    const [outputTextModified, setOutputTextModified] = useState('');\n    const [colorsWithPosition, setColorsWithPosition] = useState<ReturnType<typeof parseColorsWithPosition>>([]);\n    const [showOriginal, setShowOriginal] = useState(false);\n    const [showModified, setShowModified] = useState(true);\n\n    const sessionSeed = useMemo(() => Math.random().toString(36).substring(7), []);\n    const rng = useMemo(() => seedrandom(sessionSeed), [sessionSeed]);\n\n    const generateRandomSentences = useMemo(() => {\n        const sentences = [\n            \"The quick brown fox jumps.\",\n            \"Now is the time for all.\",\n            \"Pack my box with five.\",\n            \"Sphinx of black quartz, judge.\",\n            \"Razorback frogs level six.\",\n            \"Waltz, nymph, for quick jigs.\",\n            \"Five boxing wizards jump.\",\n            \"Extra pluck and zeal from.\",\n            \"Fredericka bought exquisite opal.\",\n            \"The job requires young wage.\"\n        ];\n        return Array.from({ length: colors.length }, () => sentences[Math.floor(rng() * sentences.length)]);\n    }, [colors.length, rng]);\n\n    useEffect(() => {\n        const parsedColors = parseColorsWithPosition(tokenizedText);\n        setColorsWithPosition(parsedColors);\n        const updatedColorsWithPosition = parsedColors.map(parsed => {\n            const match = colors.find(c => c.color === parsed.color);\n            return match ? { ...parsed, modifiedColor: match.modifiedColor } : parsed;\n        });\n        const modifiedText = replaceColors(tokenizedText, updatedColorsWithPosition);\n        setOutputTextModified(modifiedText);\n    }, [colors, tokenizedText]);\n\n    const handleSave = useCallback(() => {\n        const blob = new Blob([outputTextModified], { type: 'text/plain' });\n        const link = document.createElement('a');\n        link.href = URL.createObjectURL(blob);\n\n        let fileName = 'output.txt';\n        if (importedFileName) {\n            fileName = importedFileName.replace(/\\.[^/.]+$/, \"\") + '_modified.txt';\n        }\n\n        link.download = fileName;\n        link.click();\n        URL.revokeObjectURL(link.href);\n    }, [outputTextModified, importedFileName]);\n\n    const renderColumn = (isOriginal: boolean) => (\n        <div className={activeTab === 'text' ? 'text-content' : 'column-content'} style={{ flex: 1, overflowY: 'auto' }}>\n            {activeTab === 'swatches' ?\n                colors.map((color, index) => (\n                    <div key={index} className=\"color-swatch\" style={{ backgroundColor: isOriginal ? color.color : color.modifiedColor }}></div>\n                ))\n                :\n                colors.map((color, index) => (\n                    <div key={index} style={{ color: isOriginal ? color.color : color.modifiedColor }}>\n                        {generateRandomSentences[index]}\n                    </div>\n                ))\n            }\n        </div>\n    );\n\n    return (\n        <div className=\"column OutputColumn\">\n            <div className=\"tab-bar\">\n                <button\n                    className={activeTab === 'swatches' ? 'active' : ''}\n                    onClick={() => setActiveTab('swatches')}\n                >\n                    Swatches\n                </button>\n                <button\n                    className={activeTab === 'text' ? 'active' : ''}\n                    onClick={() => setActiveTab('text')}\n                >\n                    Text\n                </button>\n                <button\n                    className={activeTab === 'output' ? 'active' : ''}\n                    onClick={() => setActiveTab('output')}\n                    style={{ marginLeft: 'auto' }}\n                >\n                    Output\n                </button>\n            </div>\n            <div className=\"tab-content\" style={{ height: '100%', overflowY: 'auto' }}>\n                {activeTab !== 'output' ? (\n                    <div style={{ display: 'flex', flexDirection: 'column', height: '100%' }}>\n                        <div className=\"checkbox-container\">\n                            <label>\n                                <input\n                                    type=\"checkbox\"\n                                    checked={showOriginal}\n                                    onChange={() => setShowOriginal(!showOriginal)}\n                                />\n                                Original\n                            </label>\n                            <label>\n                                <input\n                                    type=\"checkbox\"\n                                    checked={showModified}\n                                    onChange={() => setShowModified(!showModified)}\n                                />\n                                Modified\n                            </label>\n                        </div>\n                        <div style={{ display: 'flex', flex: 1 }}>\n                            {showOriginal && renderColumn(true)}\n                            {showModified && renderColumn(false)}\n                        </div>\n                    </div>\n                ) : (\n                    <div className=\"output-preview\" style={{ height: '100%' }}>\n                        <textarea\n                            value={outputTextModified}\n                            readOnly\n                            style={{ width: '100%', height: '100%', padding: 'var(--item-padding)' }}\n                        />\n                    </div>\n                )}\n            </div>\n            <div className=\"button-bar\">\n                <button onClick={handleSave}>Save</button>\n            </div>\n        </div>\n    );\n};", "import EventService from 'lib/EventService';\nimport { ROUTE_CHANGE_EVENT, router } from 'lib/Router';\nimport { useEffect, useState } from 'preact/hooks';\n\n// useRoute - Binds route changes to local listeners that components can\n// use to find the current route and detect route changes.\n\nexport function useRouter() {\n    const [route, setRoute] = useState(undefined);\n    const [routeParams, setRouteParams] = useState(undefined);\n    const [routeArgs, setRouteArgs] = useState(undefined);\n\n    function handleRouteChange(e) {\n        setRoute(e.target.route);\n        setRouteParams(e.target.params);\n        setRouteArgs(e.target.args);\n    }\n\n    useEffect(() => {\n        EventService.subscribe(ROUTE_CHANGE_EVENT, handleRouteChange);\n        return () => {\n            EventService.unsubscribe(ROUTE_CHANGE_EVENT, handleRouteChange);\n        };\n    }, []);\n\n    return { route, routeParams, routeArgs, navigate: router.navigate };\n}\n", "import * as eventbus from 'eventbusjs';\n\nclass _EventService {\n\n    debug = false;\n\n    // fire event\n    dispatch(name, data?) {\n        if (this.debug)\n            console.log('EVENT:', name, data);\n\n        eventbus.dispatch(name, data);\n    }\n\n    subscribe(event, cb) {\n        eventbus.addEventListener(event, cb);\n    }\n\n    unsubscribe(event, cb) {\n        eventbus.removeEventListener(event, cb);\n    }\n\n}\n\nconst EventService = new _EventService();\nexport default EventService;", "import routes from 'config/routes';\nimport EventService from 'lib/EventService';\nimport qs from 'query-string';\nimport RouteParser from 'routes';\n\nexport const ROUTE_CHANGE_EVENT = 'route-change';\n\nexport class Router {\n\n\tprivate parser: RouteParser | undefined = undefined;\n\tpublic routes = routes;\n\n\tpublic route = undefined;\n\tpublic routeParams = undefined;\n\tpublic routeArgs\n\n\tconstructor() {\n\t\tthis.parser = RouteParser();\n\t\tthis.registerRoutes(routes);\n\n\t\t// try to load previous route url on \"back\" event\n\t\twindow.addEventListener(\"popstate\", (e) => {\n\t\t\tif (e.state?.url) this.navigate(e.state?.url);\n\t\t});\n\t}\n\n\tpublic registerRoutes = (routes) => {\n\t\tif (this.parser) {\n\t\t\tconsole.log(`registerRoutes`, routes)\n\t\t\tObject.keys(routes).forEach(r => this.parser!.addRoute(r, this._onRouteChange));\n\t\t}\n\t}\n\n\t// try to find and load a route, change page url, and emit route-change event\n\tpublic navigate = (url, emit = true) => {\n\t\tlet r = this.loadUrl(url);\n\t\t// todo: support recursive navigate/virtual functions by letting loadUrl finalize on state?\n\t\tif (!r && url != '/page-not-found') return this.navigate('/page-not-found');\n\t\twindow.history.pushState({ url, params: r.params }, \"\", url);\n\t\tif (emit) EventService.dispatch(ROUTE_CHANGE_EVENT, r);\n\t}\n\n\t// given a url, try to match a route and set variables.\n\tpublic loadUrl = (url) => {\n\t\t// strip query string (because it doesn't match with it?) and parse to args\n\t\tlet qp = url.indexOf('?');\n\t\tlet r = this.parser.match(qp != -1 ? url.slice(0, qp) : url);\n\t\tif (r) {\n\t\t\tlet args = qp != -1 ? url.slice(qp, url.length) : '';\n\t\t\tr.args = qs.parse(args);\n\t\t\tr.fn(r);\n\t\t\treturn r;\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\t// auto-change handler from url change.\n\tprivate _onRouteChange = (r) => {\n\t\tthis.route = r.route;\n\t\tthis.routeParams = r.params;\n\t}\n}\n\nexport const router = new Router();", "import * as queryString from './base.js';\n\nexport default queryString;\n", "import decodeComponent from 'decode-uri-component';\nimport {includeKeys} from 'filter-obj';\nimport splitOnFirst from 'split-on-first';\n\nconst isNullOrUndefined = value => value === null || value === undefined;\n\n// eslint-disable-next-line unicorn/prefer-code-point\nconst strictUriEncode = string => encodeURIComponent(string).replaceAll(/[!'()*]/g, x => `%${x.charCodeAt(0).toString(16).toUpperCase()}`);\n\nconst encodeFragmentIdentifier = Symbol('encodeFragmentIdentifier');\n\nfunction encoderForArrayFormat(options) {\n\tswitch (options.arrayFormat) {\n\t\tcase 'index': {\n\t\t\treturn key => (result, value) => {\n\t\t\t\tconst index = result.length;\n\n\t\t\t\tif (\n\t\t\t\t\tvalue === undefined\n\t\t\t\t\t|| (options.skipNull && value === null)\n\t\t\t\t\t|| (options.skipEmptyString && value === '')\n\t\t\t\t) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\n\t\t\t\tif (value === null) {\n\t\t\t\t\treturn [\n\t\t\t\t\t\t...result, [encode(key, options), '[', index, ']'].join(''),\n\t\t\t\t\t];\n\t\t\t\t}\n\n\t\t\t\treturn [\n\t\t\t\t\t...result,\n\t\t\t\t\t[encode(key, options), '[', encode(index, options), ']=', encode(value, options)].join(''),\n\t\t\t\t];\n\t\t\t};\n\t\t}\n\n\t\tcase 'bracket': {\n\t\t\treturn key => (result, value) => {\n\t\t\t\tif (\n\t\t\t\t\tvalue === undefined\n\t\t\t\t\t|| (options.skipNull && value === null)\n\t\t\t\t\t|| (options.skipEmptyString && value === '')\n\t\t\t\t) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\n\t\t\t\tif (value === null) {\n\t\t\t\t\treturn [\n\t\t\t\t\t\t...result,\n\t\t\t\t\t\t[encode(key, options), '[]'].join(''),\n\t\t\t\t\t];\n\t\t\t\t}\n\n\t\t\t\treturn [\n\t\t\t\t\t...result,\n\t\t\t\t\t[encode(key, options), '[]=', encode(value, options)].join(''),\n\t\t\t\t];\n\t\t\t};\n\t\t}\n\n\t\tcase 'colon-list-separator': {\n\t\t\treturn key => (result, value) => {\n\t\t\t\tif (\n\t\t\t\t\tvalue === undefined\n\t\t\t\t\t|| (options.skipNull && value === null)\n\t\t\t\t\t|| (options.skipEmptyString && value === '')\n\t\t\t\t) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\n\t\t\t\tif (value === null) {\n\t\t\t\t\treturn [\n\t\t\t\t\t\t...result,\n\t\t\t\t\t\t[encode(key, options), ':list='].join(''),\n\t\t\t\t\t];\n\t\t\t\t}\n\n\t\t\t\treturn [\n\t\t\t\t\t...result,\n\t\t\t\t\t[encode(key, options), ':list=', encode(value, options)].join(''),\n\t\t\t\t];\n\t\t\t};\n\t\t}\n\n\t\tcase 'comma':\n\t\tcase 'separator':\n\t\tcase 'bracket-separator': {\n\t\t\tconst keyValueSeparator = options.arrayFormat === 'bracket-separator'\n\t\t\t\t? '[]='\n\t\t\t\t: '=';\n\n\t\t\treturn key => (result, value) => {\n\t\t\t\tif (\n\t\t\t\t\tvalue === undefined\n\t\t\t\t\t|| (options.skipNull && value === null)\n\t\t\t\t\t|| (options.skipEmptyString && value === '')\n\t\t\t\t) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\n\t\t\t\t// Translate null to an empty string so that it doesn't serialize as 'null'\n\t\t\t\tvalue = value === null ? '' : value;\n\n\t\t\t\tif (result.length === 0) {\n\t\t\t\t\treturn [[encode(key, options), keyValueSeparator, encode(value, options)].join('')];\n\t\t\t\t}\n\n\t\t\t\treturn [[result, encode(value, options)].join(options.arrayFormatSeparator)];\n\t\t\t};\n\t\t}\n\n\t\tdefault: {\n\t\t\treturn key => (result, value) => {\n\t\t\t\tif (\n\t\t\t\t\tvalue === undefined\n\t\t\t\t\t|| (options.skipNull && value === null)\n\t\t\t\t\t|| (options.skipEmptyString && value === '')\n\t\t\t\t) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\n\t\t\t\tif (value === null) {\n\t\t\t\t\treturn [\n\t\t\t\t\t\t...result,\n\t\t\t\t\t\tencode(key, options),\n\t\t\t\t\t];\n\t\t\t\t}\n\n\t\t\t\treturn [\n\t\t\t\t\t...result,\n\t\t\t\t\t[encode(key, options), '=', encode(value, options)].join(''),\n\t\t\t\t];\n\t\t\t};\n\t\t}\n\t}\n}\n\nfunction parserForArrayFormat(options) {\n\tlet result;\n\n\tswitch (options.arrayFormat) {\n\t\tcase 'index': {\n\t\t\treturn (key, value, accumulator) => {\n\t\t\t\tresult = /\\[(\\d*)]$/.exec(key);\n\n\t\t\t\tkey = key.replace(/\\[\\d*]$/, '');\n\n\t\t\t\tif (!result) {\n\t\t\t\t\taccumulator[key] = value;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (accumulator[key] === undefined) {\n\t\t\t\t\taccumulator[key] = {};\n\t\t\t\t}\n\n\t\t\t\taccumulator[key][result[1]] = value;\n\t\t\t};\n\t\t}\n\n\t\tcase 'bracket': {\n\t\t\treturn (key, value, accumulator) => {\n\t\t\t\tresult = /(\\[])$/.exec(key);\n\t\t\t\tkey = key.replace(/\\[]$/, '');\n\n\t\t\t\tif (!result) {\n\t\t\t\t\taccumulator[key] = value;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (accumulator[key] === undefined) {\n\t\t\t\t\taccumulator[key] = [value];\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\taccumulator[key] = [...accumulator[key], value];\n\t\t\t};\n\t\t}\n\n\t\tcase 'colon-list-separator': {\n\t\t\treturn (key, value, accumulator) => {\n\t\t\t\tresult = /(:list)$/.exec(key);\n\t\t\t\tkey = key.replace(/:list$/, '');\n\n\t\t\t\tif (!result) {\n\t\t\t\t\taccumulator[key] = value;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (accumulator[key] === undefined) {\n\t\t\t\t\taccumulator[key] = [value];\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\taccumulator[key] = [...accumulator[key], value];\n\t\t\t};\n\t\t}\n\n\t\tcase 'comma':\n\t\tcase 'separator': {\n\t\t\treturn (key, value, accumulator) => {\n\t\t\t\tconst isArray = typeof value === 'string' && value.includes(options.arrayFormatSeparator);\n\t\t\t\tconst newValue = isArray ? value.split(options.arrayFormatSeparator).map(item => decode(item, options)) : (value === null ? value : decode(value, options));\n\t\t\t\taccumulator[key] = newValue;\n\t\t\t};\n\t\t}\n\n\t\tcase 'bracket-separator': {\n\t\t\treturn (key, value, accumulator) => {\n\t\t\t\tconst isArray = /(\\[])$/.test(key);\n\t\t\t\tkey = key.replace(/\\[]$/, '');\n\n\t\t\t\tif (!isArray) {\n\t\t\t\t\taccumulator[key] = value ? decode(value, options) : value;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst arrayValue = value === null\n\t\t\t\t\t? []\n\t\t\t\t\t: decode(value, options).split(options.arrayFormatSeparator);\n\n\t\t\t\tif (accumulator[key] === undefined) {\n\t\t\t\t\taccumulator[key] = arrayValue;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\taccumulator[key] = [...accumulator[key], ...arrayValue];\n\t\t\t};\n\t\t}\n\n\t\tdefault: {\n\t\t\treturn (key, value, accumulator) => {\n\t\t\t\tif (accumulator[key] === undefined) {\n\t\t\t\t\taccumulator[key] = value;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\taccumulator[key] = [...[accumulator[key]].flat(), value];\n\t\t\t};\n\t\t}\n\t}\n}\n\nfunction validateArrayFormatSeparator(value) {\n\tif (typeof value !== 'string' || value.length !== 1) {\n\t\tthrow new TypeError('arrayFormatSeparator must be single character string');\n\t}\n}\n\nfunction encode(value, options) {\n\tif (options.encode) {\n\t\treturn options.strict ? strictUriEncode(value) : encodeURIComponent(value);\n\t}\n\n\treturn value;\n}\n\nfunction decode(value, options) {\n\tif (options.decode) {\n\t\treturn decodeComponent(value);\n\t}\n\n\treturn value;\n}\n\nfunction keysSorter(input) {\n\tif (Array.isArray(input)) {\n\t\treturn input.sort();\n\t}\n\n\tif (typeof input === 'object') {\n\t\treturn keysSorter(Object.keys(input))\n\t\t\t.sort((a, b) => Number(a) - Number(b))\n\t\t\t.map(key => input[key]);\n\t}\n\n\treturn input;\n}\n\nfunction removeHash(input) {\n\tconst hashStart = input.indexOf('#');\n\tif (hashStart !== -1) {\n\t\tinput = input.slice(0, hashStart);\n\t}\n\n\treturn input;\n}\n\nfunction getHash(url) {\n\tlet hash = '';\n\tconst hashStart = url.indexOf('#');\n\tif (hashStart !== -1) {\n\t\thash = url.slice(hashStart);\n\t}\n\n\treturn hash;\n}\n\nfunction parseValue(value, options, type) {\n\tif (type === 'string' && typeof value === 'string') {\n\t\treturn value;\n\t}\n\n\tif (typeof type === 'function' && typeof value === 'string') {\n\t\treturn type(value);\n\t}\n\n\tif (type === 'boolean' && value === null) {\n\t\treturn true;\n\t}\n\n\tif (type === 'boolean' && value !== null && (value.toLowerCase() === 'true' || value.toLowerCase() === 'false')) {\n\t\treturn value.toLowerCase() === 'true';\n\t}\n\n\tif (type === 'boolean' && value !== null && (value.toLowerCase() === '1' || value.toLowerCase() === '0')) {\n\t\treturn value.toLowerCase() === '1';\n\t}\n\n\tif (type === 'string[]' && options.arrayFormat !== 'none' && typeof value === 'string') {\n\t\treturn [value];\n\t}\n\n\tif (type === 'number[]' && options.arrayFormat !== 'none' && !Number.isNaN(Number(value)) && (typeof value === 'string' && value.trim() !== '')) {\n\t\treturn [Number(value)];\n\t}\n\n\tif (type === 'number' && !Number.isNaN(Number(value)) && (typeof value === 'string' && value.trim() !== '')) {\n\t\treturn Number(value);\n\t}\n\n\tif (options.parseBooleans && value !== null && (value.toLowerCase() === 'true' || value.toLowerCase() === 'false')) {\n\t\treturn value.toLowerCase() === 'true';\n\t}\n\n\tif (options.parseNumbers && !Number.isNaN(Number(value)) && (typeof value === 'string' && value.trim() !== '')) {\n\t\treturn Number(value);\n\t}\n\n\treturn value;\n}\n\nexport function extract(input) {\n\tinput = removeHash(input);\n\tconst queryStart = input.indexOf('?');\n\tif (queryStart === -1) {\n\t\treturn '';\n\t}\n\n\treturn input.slice(queryStart + 1);\n}\n\nexport function parse(query, options) {\n\toptions = {\n\t\tdecode: true,\n\t\tsort: true,\n\t\tarrayFormat: 'none',\n\t\tarrayFormatSeparator: ',',\n\t\tparseNumbers: false,\n\t\tparseBooleans: false,\n\t\ttypes: Object.create(null),\n\t\t...options,\n\t};\n\n\tvalidateArrayFormatSeparator(options.arrayFormatSeparator);\n\n\tconst formatter = parserForArrayFormat(options);\n\n\t// Create an object with no prototype\n\tconst returnValue = Object.create(null);\n\n\tif (typeof query !== 'string') {\n\t\treturn returnValue;\n\t}\n\n\tquery = query.trim().replace(/^[?#&]/, '');\n\n\tif (!query) {\n\t\treturn returnValue;\n\t}\n\n\tfor (const parameter of query.split('&')) {\n\t\tif (parameter === '') {\n\t\t\tcontinue;\n\t\t}\n\n\t\tconst parameter_ = options.decode ? parameter.replaceAll('+', ' ') : parameter;\n\n\t\tlet [key, value] = splitOnFirst(parameter_, '=');\n\n\t\tif (key === undefined) {\n\t\t\tkey = parameter_;\n\t\t}\n\n\t\t// Missing `=` should be `null`:\n\t\t// http://w3.org/TR/2012/WD-url-20120524/#collect-url-parameters\n\t\tvalue = value === undefined ? null : (['comma', 'separator', 'bracket-separator'].includes(options.arrayFormat) ? value : decode(value, options));\n\t\tformatter(decode(key, options), value, returnValue);\n\t}\n\n\tfor (const [key, value] of Object.entries(returnValue)) {\n\t\tif (typeof value === 'object' && value !== null && options.types[key] !== 'string') {\n\t\t\tfor (const [key2, value2] of Object.entries(value)) {\n\t\t\t\tconst typeOption = options.types[key];\n\t\t\t\tconst type = typeof typeOption === 'function' ? typeOption : (typeOption ? typeOption.replace('[]', '') : undefined);\n\t\t\t\tvalue[key2] = parseValue(value2, options, type);\n\t\t\t}\n\t\t} else if (typeof value === 'object' && value !== null && options.types[key] === 'string') {\n\t\t\treturnValue[key] = Object.values(value).join(options.arrayFormatSeparator);\n\t\t} else {\n\t\t\treturnValue[key] = parseValue(value, options, options.types[key]);\n\t\t}\n\t}\n\n\tif (options.sort === false) {\n\t\treturn returnValue;\n\t}\n\n\t// TODO: Remove the use of `reduce`.\n\t// eslint-disable-next-line unicorn/no-array-reduce\n\treturn (options.sort === true ? Object.keys(returnValue).sort() : Object.keys(returnValue).sort(options.sort)).reduce((result, key) => {\n\t\tconst value = returnValue[key];\n\t\tresult[key] = Boolean(value) && typeof value === 'object' && !Array.isArray(value) ? keysSorter(value) : value;\n\t\treturn result;\n\t}, Object.create(null));\n}\n\nexport function stringify(object, options) {\n\tif (!object) {\n\t\treturn '';\n\t}\n\n\toptions = {\n\t\tencode: true,\n\t\tstrict: true,\n\t\tarrayFormat: 'none',\n\t\tarrayFormatSeparator: ',',\n\t\t...options,\n\t};\n\n\tvalidateArrayFormatSeparator(options.arrayFormatSeparator);\n\n\tconst shouldFilter = key => (\n\t\t(options.skipNull && isNullOrUndefined(object[key]))\n\t\t|| (options.skipEmptyString && object[key] === '')\n\t);\n\n\tconst formatter = encoderForArrayFormat(options);\n\n\tconst objectCopy = {};\n\n\tfor (const [key, value] of Object.entries(object)) {\n\t\tif (!shouldFilter(key)) {\n\t\t\tobjectCopy[key] = value;\n\t\t}\n\t}\n\n\tconst keys = Object.keys(objectCopy);\n\n\tif (options.sort !== false) {\n\t\tkeys.sort(options.sort);\n\t}\n\n\treturn keys.map(key => {\n\t\tlet value = object[key];\n\n\t\t// Apply replacer function if provided\n\t\tif (options.replacer) {\n\t\t\tvalue = options.replacer(key, value);\n\n\t\t\t// If replacer returns undefined, skip this key\n\t\t\tif (value === undefined) {\n\t\t\t\treturn '';\n\t\t\t}\n\t\t}\n\n\t\tif (value === undefined) {\n\t\t\treturn '';\n\t\t}\n\n\t\tif (value === null) {\n\t\t\treturn encode(key, options);\n\t\t}\n\n\t\tif (Array.isArray(value)) {\n\t\t\tif (value.length === 0 && options.arrayFormat === 'bracket-separator') {\n\t\t\t\treturn encode(key, options) + '[]';\n\t\t\t}\n\n\t\t\t// Apply replacer to array elements if provided\n\t\t\t// Note: We don't re-apply replacer to the array itself, only to elements\n\t\t\tlet processedArray = value;\n\t\t\tif (options.replacer) {\n\t\t\t\tprocessedArray = value.map((item, index) =>\n\t\t\t\t\toptions.replacer(`${key}[${index}]`, item),\n\t\t\t\t).filter(item => item !== undefined);\n\t\t\t}\n\n\t\t\treturn processedArray\n\t\t\t\t.reduce(formatter(key), [])\n\t\t\t\t.join('&');\n\t\t}\n\n\t\treturn encode(key, options) + '=' + encode(value, options);\n\t}).filter(x => x.length > 0).join('&');\n}\n\nexport function parseUrl(url, options) {\n\toptions = {\n\t\tdecode: true,\n\t\t...options,\n\t};\n\n\tlet [url_, hash] = splitOnFirst(url, '#');\n\n\tif (url_ === undefined) {\n\t\turl_ = url;\n\t}\n\n\treturn {\n\t\turl: url_?.split('?')?.[0] ?? '',\n\t\tquery: parse(extract(url), options),\n\t\t...(options && options.parseFragmentIdentifier && hash ? {fragmentIdentifier: decode(hash, options)} : {}),\n\t};\n}\n\nexport function stringifyUrl(object, options) {\n\toptions = {\n\t\tencode: true,\n\t\tstrict: true,\n\t\t[encodeFragmentIdentifier]: true,\n\t\t...options,\n\t};\n\n\tconst url = removeHash(object.url).split('?')[0] || '';\n\tconst queryFromUrl = extract(object.url);\n\n\tconst query = {\n\t\t...parse(queryFromUrl, {sort: false, ...options}),\n\t\t...object.query,\n\t};\n\n\tlet queryString = stringify(query, options);\n\tqueryString &&= `?${queryString}`;\n\n\tlet hash = getHash(object.url);\n\tif (typeof object.fragmentIdentifier === 'string') {\n\t\tconst urlObjectForFragmentEncode = new URL(url);\n\t\turlObjectForFragmentEncode.hash = object.fragmentIdentifier;\n\t\thash = options[encodeFragmentIdentifier] ? urlObjectForFragmentEncode.hash : `#${object.fragmentIdentifier}`;\n\t}\n\n\treturn `${url}${queryString}${hash}`;\n}\n\nexport function pick(input, filter, options) {\n\toptions = {\n\t\tparseFragmentIdentifier: true,\n\t\t[encodeFragmentIdentifier]: false,\n\t\t...options,\n\t};\n\n\tconst {url, query, fragmentIdentifier} = parseUrl(input, options);\n\n\treturn stringifyUrl({\n\t\turl,\n\t\tquery: includeKeys(query, filter),\n\t\tfragmentIdentifier,\n\t}, options);\n}\n\nexport function exclude(input, filter, options) {\n\tconst exclusionFilter = Array.isArray(filter) ? key => !filter.includes(key) : (key, value) => !filter(key, value);\n\n\treturn pick(input, exclusionFilter, options);\n}\n", "const token = '%[a-f0-9]{2}';\nconst singleMatcher = new RegExp('(' + token + ')|([^%]+?)', 'gi');\nconst multiMatcher = new RegExp('(' + token + ')+', 'gi');\n\nfunction decodeComponents(components, split) {\n\ttry {\n\t\t// Try to decode the entire string first\n\t\treturn [decodeURIComponent(components.join(''))];\n\t} catch {\n\t\t// Do nothing\n\t}\n\n\tif (components.length === 1) {\n\t\treturn components;\n\t}\n\n\tsplit = split || 1;\n\n\t// Split the array in 2 parts\n\tconst left = components.slice(0, split);\n\tconst right = components.slice(split);\n\n\treturn Array.prototype.concat.call([], decodeComponents(left), decodeComponents(right));\n}\n\nfunction decode(input) {\n\ttry {\n\t\treturn decodeURIComponent(input);\n\t} catch {\n\t\tlet tokens = input.match(singleMatcher) || [];\n\n\t\tfor (let i = 1; i < tokens.length; i++) {\n\t\t\tinput = decodeComponents(tokens, i).join('');\n\n\t\t\ttokens = input.match(singleMatcher) || [];\n\t\t}\n\n\t\treturn input;\n\t}\n}\n\nfunction customDecodeURIComponent(input) {\n\t// Keep track of all the replacements and prefill the map with the `BOM`\n\tconst replaceMap = {\n\t\t'%FE%FF': '\\uFFFD\\uFFFD',\n\t\t'%FF%FE': '\\uFFFD\\uFFFD',\n\t};\n\n\tlet match = multiMatcher.exec(input);\n\twhile (match) {\n\t\ttry {\n\t\t\t// Decode as big chunks as possible\n\t\t\treplaceMap[match[0]] = decodeURIComponent(match[0]);\n\t\t} catch {\n\t\t\tconst result = decode(match[0]);\n\n\t\t\tif (result !== match[0]) {\n\t\t\t\treplaceMap[match[0]] = result;\n\t\t\t}\n\t\t}\n\n\t\tmatch = multiMatcher.exec(input);\n\t}\n\n\t// Add `%C2` at the end of the map to make sure it does not replace the combinator before everything else\n\treplaceMap['%C2'] = '\\uFFFD';\n\n\tconst entries = Object.keys(replaceMap);\n\n\tfor (const key of entries) {\n\t\t// Replace all decoded components\n\t\tinput = input.replace(new RegExp(key, 'g'), replaceMap[key]);\n\t}\n\n\treturn input;\n}\n\nexport default function decodeUriComponent(encodedURI) {\n\tif (typeof encodedURI !== 'string') {\n\t\tthrow new TypeError('Expected `encodedURI` to be of type `string`, got `' + typeof encodedURI + '`');\n\t}\n\n\ttry {\n\t\t// Try the built in decoder first\n\t\treturn decodeURIComponent(encodedURI);\n\t} catch {\n\t\t// Fallback to a more advanced decoder\n\t\treturn customDecodeURIComponent(encodedURI);\n\t}\n}\n", "export function includeKeys(object, predicate) {\n\tconst result = {};\n\n\tif (Array.isArray(predicate)) {\n\t\tfor (const key of predicate) {\n\t\t\tconst descriptor = Object.getOwnPropertyDescriptor(object, key);\n\t\t\tif (descriptor?.enumerable) {\n\t\t\t\tObject.defineProperty(result, key, descriptor);\n\t\t\t}\n\t\t}\n\t} else {\n\t\t// `Reflect.ownKeys()` is required to retrieve symbol properties\n\t\tfor (const key of Reflect.ownKeys(object)) {\n\t\t\tconst descriptor = Object.getOwnPropertyDescriptor(object, key);\n\t\t\tif (descriptor.enumerable) {\n\t\t\t\tconst value = object[key];\n\t\t\t\tif (predicate(key, value, object)) {\n\t\t\t\t\tObject.defineProperty(result, key, descriptor);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn result;\n}\n\nexport function excludeKeys(object, predicate) {\n\tif (Array.isArray(predicate)) {\n\t\tconst set = new Set(predicate);\n\t\treturn includeKeys(object, key => !set.has(key));\n\t}\n\n\treturn includeKeys(object, (key, value, object) => !predicate(key, value, object));\n}\n", "export default function splitOnFirst(string, separator) {\n\tif (!(typeof string === 'string' && typeof separator === 'string')) {\n\t\tthrow new TypeError('Expected the arguments to be of type `string`');\n\t}\n\n\tif (string === '' || separator === '') {\n\t\treturn [];\n\t}\n\n\tconst separatorIndex = string.indexOf(separator);\n\n\tif (separatorIndex === -1) {\n\t\treturn [];\n\t}\n\n\treturn [\n\t\tstring.slice(0, separatorIndex),\n\t\tstring.slice(separatorIndex + separator.length)\n\t];\n}\n"],
  "mappings": "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",
  "names": ["assign", "obj", "props", "i", "removeNode", "node", "parentNode", "removeChild", "createElement", "type", "children", "key", "ref", "normalizedProps", "arguments", "length", "slice", "call", "defaultProps", "createVNode", "original", "vnode", "__k", "__", "__b", "__e", "__c", "constructor", "__v", "vnodeId", "__i", "__u", "options", "Fragment", "BaseComponent", "context", "this", "getDomSibling", "childIndex", "sibling", "updateParentDomPointers", "child", "base", "enqueueRender", "c", "__d", "rerenderQueue", "push", "process", "__r", "prevDebounce", "debounceRendering", "defer", "component", "newVNode", "oldVNode", "oldDom", "commitQueue", "refQueue", "l", "sort", "depthSort", "shift", "__P", "diff", "__n", "namespaceURI", "commitRoot", "diffChildren", "parentDom", "renderResult", "newParentVNode", "oldParentVNode", "globalContext", "namespace", "excessDomChildren", "isHydrating", "childVNode", "newDom", "firstChildDom", "result", "shouldPlace", "oldChildren", "EMPTY_ARR", "newChildrenLength", "constructNewChildrenArray", "EMPTY_OBJ", "applyRef", "insert", "nextSibling", "skewedIndex", "matchingIndex", "oldChildrenLength", "remainingOldChildren", "skew", "Array", "String", "isArray", "undefined", "findMatchingIndex", "unmount", "parentVNode", "insertBefore", "nodeType", "x", "y", "matched", "setStyle", "style", "value", "setProperty", "IS_NON_DIMENSIONAL", "test", "dom", "name", "oldValue", "useCapture", "lowerCaseName", "o", "cssText", "replace", "CAPTURE_REGEX", "toLowerCase", "_attached", "eventClock", "addEventListener", "eventProxyCapture", "eventProxy", "removeEventListener", "e", "removeAttribute", "setAttribute", "createEventProxy", "eventHandler", "_dispatched", "event", "tmp", "isNew", "oldProps", "oldState", "snapshot", "clearProcessingException", "newProps", "isClassComponent", "provider", "componentContext", "renderHook", "count", "newType", "outer", "prototype", "render", "contextType", "__E", "doRender", "sub", "state", "__h", "_sb", "__s", "getDerivedStateFromProps", "componentWillMount", "componentDidMount", "componentWillReceiveProps", "shouldComponentUpdate", "some", "componentWillUpdate", "componentDidUpdate", "getChildContext", "getSnapshotBeforeUpdate", "cloneNode", "then", "MODE_HYDRATE", "indexOf", "markAsForce", "diffElementNodes", "diffed", "forEach", "root", "cb", "map", "newHtml", "oldHtml", "newChildren", "inputValue", "checked", "localName", "document", "createTextNode", "createElementNS", "is", "__m", "data", "childNodes", "attributes", "__html", "innerHTML", "content", "hasRefUnmount", "current", "skipRemove", "r", "componentWillUnmount", "replaceNode", "documentElement", "firstChild", "isValidElement", "error", "errorInfo", "ctor", "handled", "getDerivedStateFromError", "setState", "componentDidCatch", "update", "callback", "s", "forceUpdate", "Promise", "bind", "resolve", "setTimeout", "a", "b", "i", "EventBus", "parse", "C", "decode", "e", "e", "r", "t", "_getRequireWildcardCache", "n", "a", "u", "i", "o", "CookieStorage", "e", "o", "a", "n", "e", "r", "t", "i", "MemoryStorage", "get", "e", "global", "module", "define", "t", "f", "n", "data", "i", "h", "global", "module", "define", "t", "k", "f", "global", "module", "define", "t", "k", "f", "global", "module", "define", "i", "t", "v", "w", "me", "seed", "j", "f", "global", "module", "define", "w", "i", "t", "v", "me", "seed", "j", "f", "global", "module", "define", "b", "c", "d", "a", "k", "f", "t", "global", "seedrandom", "n", "d", "x", "prng", "seed", "t", "i", "j", "s", "r", "f", "e", "a", "require_seedrandom", "e", "f", "define", "module", "exports", "t", "n", "r", "s", "o", "u", "a", "i", "_", "j", "Router", "match", "m", "l", "log", "warn", "error", "d", "e", "log", "t", "vnodeId", "isArray", "Array", "createVNode", "type", "props", "key", "isStaticChildren", "__source", "__self", "ref", "i", "normalizedProps", "vnode", "__k", "__", "__b", "__e", "__c", "constructor", "__v", "__i", "__u", "defaultProps", "options", "u", "clone", "f", "error", "x", "y", "a", "b", "collectChildrenPatchFilter", "diffFilter", "patchFilter", "nestedPatchFilter", "collectChildrenPatchFilter", "reverseFilter", "collectChildrenReverseFilter", "error", "patch", "diffFilter", "diff", "patchFilter", "i", "reverseFilter", "diffFilter", "patchFilter", "reverseFilter", "diffFilter", "collectChildrenPatchFilter", "patchFilter", "collectChildrenReverseFilter", "reverseFilter", "error", "e", "u", "u", "u", "e", "e", "e", "e", "s", "t", "currentIndex", "currentComponent", "previousComponent", "prevRaf", "currentHook", "afterPaintEffects", "options", "_options", "oldBeforeDiff", "__b", "oldBeforeRender", "__r", "oldAfterDiff", "diffed", "oldCommit", "__c", "oldBeforeUnmount", "unmount", "oldRoot", "__", "getHookState", "index", "type", "__h", "hooks", "__H", "length", "push", "useState", "initialState", "useReducer", "invokeOrReturn", "reducer", "init", "hookState", "_reducer", "action", "currentValue", "__N", "nextValue", "setState", "__f", "updateHookState", "p", "s", "c", "stateHooks", "filter", "x", "every", "prevScu", "call", "this", "shouldUpdate", "props", "forEach", "hookItem", "shouldComponentUpdate", "prevCWU", "componentWillUpdate", "__e", "tmp", "useEffect", "callback", "args", "state", "__s", "argsChanged", "_pendingArgs", "useRef", "initialValue", "currentHook", "useMemo", "current", "useMemo", "factory", "args", "state", "getHookState", "currentIndex", "argsChanged", "__H", "__", "__h", "useCallback", "callback", "currentHook", "flushAfterPaintEffects", "component", "afterPaintEffects", "shift", "__P", "__H", "__h", "forEach", "invokeCleanup", "invokeEffect", "e", "options", "__e", "__v", "__b", "vnode", "currentComponent", "oldBeforeDiff", "__", "parentDom", "__k", "__m", "oldRoot", "__r", "oldBeforeRender", "currentIndex", "hooks", "__c", "previousComponent", "hookItem", "__N", "_pendingArgs", "diffed", "oldAfterDiff", "c", "length", "push", "prevRaf", "requestAnimationFrame", "afterNextFrame", "commitQueue", "some", "filter", "cb", "oldCommit", "unmount", "oldBeforeUnmount", "hasErrored", "s", "HAS_RAF", "callback", "raf", "done", "clearTimeout", "timeout", "cancelAnimationFrame", "setTimeout", "hook", "comp", "cleanup", "argsChanged", "oldArgs", "newArgs", "arg", "index", "invokeOrReturn", "f", "i", "i", "Blob", "LocalStorageFallback", "i", "_", "EventBus", "data", "log", "warn", "h", "a", "log", "warn", "NER", "log", "warn", "c", "NER", "i", "n", "nodeChildren", "log", "error", "NodeEntryCache", "NER", "e", "import_eventbusjs", "log", "warn", "EventBus", "log", "error", "NodeEntryCache", "e", "c", "i", "b", "e", "d", "A", "y", "Blob", "error", "e", "u", "u", "u", "events", "x", "y", "event", "y", "u", "d", "f", "u", "e", "i", "Color", "r", "g", "b", "a", "h", "s", "l", "x", "get", "d", "hue2rgb", "p", "q", "t", "EventBucket", "e", "w", "y", "$", "Picker", "openProxy", "c", "events", "popupCloseProxy", "timeKeeper", "onDoneProxy", "d", "A", "y", "color", "q", "u", "q", "c", "u", "c", "token", "a", "b", "token", "r", "g", "n", "_", "a", "b", "Dropdown", "d", "A", "q", "y", "u", "d", "A", "y", "q", "e", "u", "Dropdown", "s", "d", "A", "y", "q", "e", "u", "d", "T", "rng", "seedrandom", "y", "c", "q", "u", "d", "y", "u", "p", "u", "data", "i", "x", "decode", "a", "b", "import_routes", "RouteParser", "e", "r", "d", "e", "y", "y", "l", "u", "u"]
}
